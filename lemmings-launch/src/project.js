window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=360,i=180,r=2.2,a=.45454545,s=.5;function c(t){return t>>0}function l(t,e,o){return t<e?e:t>o?o:t}function u(t){return t<0?0:t>1?1:t}function p(t,e,o){return(e-t)*u(o)+t}function d(t){return(t=c(t))<0?0:(--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+=1)}o.deg2Rad=2*Math.PI/n,o.rad2Deg=n/(2*Math.PI),o.approximately=function(t,e){return Math.abs(t-e)<Number.EPSILON},o.clamp=l,o.clamp01=u,o.closestPowerOfTwo=function(t){var e=d(t);return e-t>e>>2?e>>1:e},o.closestPowerOfTwoLong=function(t){if((t=c(t))<0)return 0;var e=2<<Math.floor(Math.log2(t));return e-t>e>>2?e>>1:e},o.deltaAngle=function(t,e){return Math.abs(t)>n&&(t%=n),Math.abs(e)>n&&(e%=n),e-t},o.gammaToLinearSpace=function(t){return Math.pow(t,r)},o.inverseLerp=function(t,e,o){return(l(o,Math.min(t,e),Math.max(t,e))-t)/(e-t)},o.isPowerOfTwo=function(t){return 0==((t=c(t))&t-1)},o.lerp=p,o.lerpAngle=function(t,e,o){for(;t>e+i;)e+=n;for(;e>t+i;)e-=n;return p(t,e,o)},o.lerpUnclamped=function(t,e,o){return o<0||o>1?t+Math.abs(e-t)*o:(e-t)*u(o)+t},o.linearToGammaSpace=function(t){return Math.pow(t,a)},o.moveTowards=function(t,e,o){if(o>0){if(e<t&&t-o<e)return e;if(e>t&&t+o>e)return e}return t>e?t-o:t+o},o.nextPowerOfTwo=d,o.pingPong=function(t,e){t<0&&(t=-t);var o=t%e;return Math.ceil(t/e)%2==0?0===o?0:e-o:0===o?e:o},o.repeat=function(t,e){return t>0?t%e:e+t%e},o.round=function(t){var e=t+s;return e===Math.ceil(t)?e%2==0?t+s:t-s:Math.round(t)},o.sign=function(t){return t>=0?1:-1}},{}],2:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./management"),i=t("./subscription"),r=function(){function t(){this._wrap=new s(this),this._subscriptions=new Array}return Object.defineProperty(t.prototype,"count",{get:function(){return this._subscriptions.length},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){var e=this;return t&&this._subscriptions.push(new i.Subscription(t,!1)),function(){e.unsubscribe(t)}},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.one=function(t){var e=this;return t&&this._subscriptions.push(new i.Subscription(t,!0)),function(){e.unsubscribe(t)}},t.prototype.has=function(t){return!!t&&this._subscriptions.some(function(e){return e.handler==t})},t.prototype.unsubscribe=function(t){if(t)for(var e=0;e<this._subscriptions.length;e++)if(this._subscriptions[e].handler==t){this._subscriptions.splice(e,1);break}},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype._dispatch=function(t,e,o){for(var i=this,r=function(r){var s=new n.EventManagement(function(){return i.unsub(r.handler)}),c=Array.prototype.slice.call(o);if(c.push(s),r.execute(t,e,c),a.cleanup(r),!t&&s.propagationStopped)return"break"},a=this,s=0,c=this._subscriptions.slice();s<c.length;s++){if("break"===r(c[s]))break}},t.prototype.cleanup=function(t){if(t.isOnce&&t.isExecuted){var e=this._subscriptions.indexOf(t);e>-1&&this._subscriptions.splice(e,1)}},t.prototype.asEvent=function(){return this._wrap},t.prototype.clear=function(){this._subscriptions.splice(0,this._subscriptions.length)},t}();o.DispatcherBase=r;var a=function(){function t(){this._events={}}return t.prototype.get=function(t){var e=this._events[t];return e||(e=this.createDispatcher(),this._events[t]=e,e)},t.prototype.remove=function(t){delete this._events[t]},t}();o.EventListBase=a;var s=function(){function t(t){this._subscribe=function(e){return t.subscribe(e)},this._unsubscribe=function(e){return t.unsubscribe(e)},this._one=function(e){return t.one(e)},this._has=function(e){return t.has(e)},this._clear=function(){return t.clear()},this._count=function(){return t.count}}return Object.defineProperty(t.prototype,"count",{get:function(){return this._count()},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){return this._subscribe(t)},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.unsubscribe=function(t){this._unsubscribe(t)},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype.one=function(t){return this._one(t)},t.prototype.has=function(t){return this._has(t)},t.prototype.clear=function(){this._clear()},t}();o.DispatcherWrapper=s},{"./management":4,"./subscription":5}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./dispatching");o.DispatcherBase=n.DispatcherBase,o.DispatcherWrapper=n.DispatcherWrapper,o.EventListBase=n.EventListBase;var i=t("./subscription");o.Subscription=i.Subscription},{"./dispatching":2,"./subscription":5}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this.unsub=t,this.propagationStopped=!1}return t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();o.EventManagement=n},{}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e){this.handler=t,this.isOnce=e,this.isExecuted=!1}return t.prototype.execute=function(t,e,o){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var n=this.handler;t?setTimeout(function(){n.apply(e,o)},1):n.apply(e,o)}},t}();o.Subscription=n},{}],6:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("ste-core"),r=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.dispatch=function(t,e){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(t,e){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(i.DispatcherBase);o.EventDispatcher=r;var a=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.createDispatcher=function(){return new r},e}(i.EventListBase);o.EventList=a;var s=function(){function t(){this._events=new a}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t}();o.EventHandlingBase=s},{"ste-core":3}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./events");o.EventDispatcher=n.EventDispatcher,o.EventHandlingBase=n.EventHandlingBase,o.EventList=n.EventList},{"./events":6}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./signals");o.SignalDispatcher=n.SignalDispatcher,o.SignalHandlingBase=n.SignalHandlingBase,o.SignalList=n.SignalList},{"./signals":9}],9:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("ste-core"),r=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(i.DispatcherBase);o.SignalDispatcher=r;var a=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.createDispatcher=function(){return new r},e}(i.EventListBase);o.SignalList=a;var s=function(){function t(){this._events=new a}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t}();o.SignalHandlingBase=s},{"ste-core":3}],10:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./simple-events");o.SimpleEventDispatcher=n.SimpleEventDispatcher,o.SimpleEventHandlingBase=n.SimpleEventHandlingBase,o.SimpleEventList=n.SimpleEventList},{"./simple-events":11}],11:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("ste-core"),r=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.dispatch=function(t){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(t){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(i.DispatcherBase);o.SimpleEventDispatcher=r;var a=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.createDispatcher=function(){return new r},e}(i.EventListBase);o.SimpleEventList=a;var s=function(){function t(){this._events=new a}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t}();o.SimpleEventHandlingBase=s},{"ste-core":3}],12:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("ste-core");o.DispatcherBase=n.DispatcherBase,o.DispatcherWrapper=n.DispatcherWrapper,o.EventListBase=n.EventListBase,o.Subscription=n.Subscription;var i=t("ste-events");o.EventDispatcher=i.EventDispatcher,o.EventHandlingBase=i.EventHandlingBase,o.EventList=i.EventList;var r=t("ste-simple-events");o.SimpleEventDispatcher=r.SimpleEventDispatcher,o.SimpleEventHandlingBase=r.SimpleEventHandlingBase,o.SimpleEventList=r.SimpleEventList;var a=t("ste-signals");o.SignalDispatcher=a.SignalDispatcher,o.SignalHandlingBase=a.SignalHandlingBase,o.SignalList=a.SignalList},{"ste-core":3,"ste-events":7,"ste-signals":8,"ste-simple-events":10}],13:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t("./BSTreeKV").default);o.default=i},{"./BSTreeKV":14}],14:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./Queue"),r=function(){function t(t){this.root=null,this.compare=t||n.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!n.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!n.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var o=1;null!==t&&0!==o;)(o=this.compare(e,t.element))<0?t=t.leftCh:o>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,o){null===t||o.stop||(this.inorderTraversalAux(t.leftCh,e,o),o.stop||(o.stop=!1===e(t.element),o.stop||this.inorderTraversalAux(t.rightCh,e,o)))},t.prototype.levelTraversalAux=function(t,e){var o=new i.default;for(null!==t&&o.enqueue(t),t=o.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&o.enqueue(t.leftCh),null!==t.rightCh&&o.enqueue(t.rightCh),t=o.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,e,o){null===t||o.stop||(o.stop=!1===e(t.element),o.stop||(this.preorderTraversalAux(t.leftCh,e,o),o.stop||this.preorderTraversalAux(t.rightCh,e,o)))},t.prototype.postorderTraversalAux=function(t,e,o){null===t||o.stop||(this.postorderTraversalAux(t.leftCh,e,o),o.stop||(this.postorderTraversalAux(t.rightCh,e,o),o.stop||(o.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,o=this.root;null!==o;){var n=this.compare(t.element,o.element);if(0===n)return null;n<0?(e=o,o=o.leftCh):(e=o,o=o.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();o.default=r},{"./Queue":24,"./util":29}],15:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./Dictionary"),r=t("./Set"),a=function(){function t(t){this.toStrF=t||n.defaultToString,this.dictionary=new i.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var o={value:t,copies:e};this.dictionary.setValue(t,o)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var o=this.dictionary.getValue(t);return e>o.copies?this.nElements-=o.copies:this.nElements-=e,o.copies-=e,o.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=0,o=this.dictionary.values();e<o.length;e++)for(var n=o[e],i=n.value,r=n.copies,a=0;a<r;a++)t.push(i);return t},t.prototype.toSet=function(){for(var t=new r.default(this.toStrF),e=0,o=this.dictionary.values();e<o.length;e++){var n=o[e].value;t.add(n)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,o){for(var n=o.value,i=o.copies,r=0;r<i;r++)if(!1===t(n))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();o.default=a},{"./Dictionary":16,"./Set":25,"./util":29}],16:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var o,i="$"+this.toStr(t),r=this.table[i];return n.isUndefined(r)?(this.nElements++,o=void 0):o=r.value,this.table[i]={key:t,value:e},o}},t.prototype.remove=function(t){var e="$"+this.toStr(t),o=this.table[e];if(!n.isUndefined(o))return delete this.table[e],this.nElements--,o.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];t.push(o.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];t.push(o.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];if(!1===t(o.key,o.value))return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,o){t+="\n\t"+e+" : "+o}),t+"\n}"},t}();o.default=i},{"./util":29}],17:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Dictionary"),r=t("./util"),a=function(t){function e(e,o){var n=t.call(this,o)||this;return n.defaultFactoryFunction=e,n}return n(e,t),e.prototype.setDefault=function(e,o){var n=t.prototype.getValue.call(this,e);return r.isUndefined(n)?(this.setValue(e,o),o):n},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(i.default);o.default=a},{"./Dictionary":16,"./util":29}],18:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./arrays"),r=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)i.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)i.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!n.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return i.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){i.forEach(this.data,t)},t}();o.default=r},{"./arrays":27,"./util":29}],19:[function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Dictionary"),r=t("./util"),a=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),s=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}();function c(t){return null===t.next}var l=function(t){function e(e){var o=t.call(this,e)||this;return o.head=new s,o.tail=new s,o.head.next=o.tail,o.tail.prev=o.head,o}return n(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!r.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!r.isUndefined(e))return e.value},e.prototype.remove=function(e){var o=this.getLinkedDictionaryPair(e);if(!r.isUndefined(o))return t.prototype.remove.call(this,e),o.unlink(),o.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var o="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[o]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!r.isUndefined(t)&&!r.isUndefined(e)){var o=this.getLinkedDictionaryPair(t),n=new a(t,e),i="$"+this.toStr(t);return r.isUndefined(o)?(this.appendToTail(n),this.table[i]=n,void++this.nElements):(this.replace(o,n),o.value)}},e.prototype.keys=function(){var t=[];return this.forEach(function(e,o){t.push(e)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(e,o){t.push(o)}),t},e.prototype.forEach=function(t){for(var e=this.head.next;!c(e);){if(!1===t(e.key,e.value))return;e=e.next}},e}(i.default);o.default=l},{"./Dictionary":16,"./util":29}],20:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./arrays"),r=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(n.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||n.isUndefined(t))return!1;var o=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=o,this.lastNode=o;else if(e===this.nElements)this.lastNode.next=o,this.lastNode=o;else if(0===e)o.next=this.firstNode,this.firstNode=o;else{var i=this.nodeAtIndex(e-1);if(null==i)return!1;o.next=i.next,i.next=o}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var o=e||n.defaultEquals;if(n.isUndefined(t))return-1;for(var i=this.firstNode,r=0;null!==i;){if(o(i.element,t))return r;r++,i=i.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var o=e||n.defaultEquals;if(this.nElements<1||n.isUndefined(t))return!1;for(var i=null,r=this.firstNode;null!==r;){if(o(r.element,t))return null==i?(this.firstNode=r.next,r===this.lastNode&&(this.lastNode=null)):r===this.lastNode?(this.lastNode=i,i.next=r.next,r.next=null):(i.next=r.next,r.next=null),this.nElements--,!0;i=r,r=r.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,o){var i=o||n.defaultEquals;return e instanceof t&&(this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,i))},t.prototype.equalsAux=function(t,e,o){for(;null!==t&&null!==e;){if(!o(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var o=this.nodeAtIndex(t-1);null===o?(e=this.firstNode.element,this.firstNode=this.firstNode.next):o.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=o),null!==o&&null!==o.next&&(e=o.next.element,o.next=o.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,o=null;null!==e;)o=e.next,e.next=t,t=e,e=o;o=this.firstNode,this.firstNode=this.lastNode,this.lastNode=o},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return i.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,o=0;o<t&&null!=e;o++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();o.default=r},{"./arrays":27,"./util":29}],21:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./Dictionary"),r=t("./arrays"),a=function(){function t(t,e,o){void 0===o&&(o=!1),this.dict=new i.default(t),this.equalsF=e||n.defaultEquals,this.allowDuplicate=o}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return n.isUndefined(e)?[]:r.copy(e)},t.prototype.setValue=function(t,e){if(n.isUndefined(t)||n.isUndefined(e))return!1;var o=this.dict.getValue(t);return n.isUndefined(o)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&r.contains(o,e,this.equalsF))&&(o.push(e),!0)},t.prototype.remove=function(t,e){if(n.isUndefined(e)){var o=this.dict.remove(t);return!n.isUndefined(o)}var i=this.dict.getValue(t);return!(n.isUndefined(i)||!r.remove(i,e,this.equalsF))&&(0===i.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],e=0,o=this.dict.values();e<o.length;e++)for(var n=0,i=o[e];n<i.length;n++){var r=i[n];t.push(r)}return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();o.default=a},{"./Dictionary":16,"./arrays":27,"./util":29}],22:[function(t,e,o){"use strict";var n;Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var i=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var o=e[t];this.createEmptyNodeIfNotExist(o)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,o=this.nodes[t];e<o.length;e++){var n=o[e];this.createEmptyNodeIfNotExist(n)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var t=this,e=[],o=0;o<this.rootIds.length;o++){var n=this.rootIds[o];e.push({id:n,level:0,hasParent:!1,childrenCount:0}),c(n,this.nodes,e,0)}for(var i=0,r=e;i<r.length;i++){var a=r[i];a.childrenCount=s(a.id)}return e;function s(e){return t.nodes[e]?t.nodes[e].length:0}function c(t,e,o,n){if(void 0===n&&(n=0),t&&e&&o&&e[t]){n++;for(var i=e[t],r=0;r<i.length;r++){var a=i[r];o.push({id:a,level:n,hasParent:!0}),c(a,e,o,n)}n--}}},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,n.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,n.AFTER)},t.prototype.moveIdIntoId=function(t,e,o){return void 0===o&&(o=!0),o?this.moveId(t,e,n.INSIDE_AT_START):this.moveId(t,e,n.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var o=this.findRootId(t),n=this.findRootId(e);this.swapRootPositionWithRootPosition(o,n)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var o=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=o},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var o=this.findRootId(t);o>-1&&this.insertIdIntoRoot(e,o);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var i=this.findNodeId(n,t);i>-1&&this.insertIdIntoNode(n,e,i)}},t.prototype.insertIdAfterId=function(t,e){var o=this.findRootId(t);o>-1&&this.insertIdIntoRoot(e,o+1);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var i=this.findNodeId(n,t);i>-1&&this.insertIdIntoNode(n,e,i+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var o=this.rootIds.length;this.rootIds.splice(e+o+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,o){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===o)this.nodeInsertAtEnd(t,e);else if(o<0){var n=this.nodes[t].length;this.nodes[t].splice(o+n+1,0,e)}else this.nodes[t].splice(o,0,e)},t.prototype.moveId=function(t,e,o){var i=t,r=this.findRootId(i);this.nodes[e];for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){this.findNodeId(a,e);break}var s=e,c=this.findRootId(s);this.nodes[e];for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){this.findNodeId(a,e);break}if(r>-1)if(c>-1)switch(this.rootDelete(r),c>r&&c--,o){case n.BEFORE:this.insertIdIntoRoot(i,c);break;case n.AFTER:this.insertIdIntoRoot(i,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}else{this.rootDelete(r);for(var a in this.nodes){if(this.nodes.hasOwnProperty(a))if((l=this.findNodeId(a,s))>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(a,i,l);break;case n.AFTER:this.insertIdIntoNode(a,i,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}break}}}else if(c>-1){for(var a in this.nodes){if(this.nodes.hasOwnProperty(a))if((l=this.findNodeId(a,i))>-1){this.nodeDeleteAtIndex(a,l);break}}switch(o){case n.BEFORE:this.insertIdIntoRoot(i,c);break;case n.AFTER:this.insertIdIntoRoot(i,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}}else{for(var a in this.nodes){if(this.nodes.hasOwnProperty(a))if((l=this.findNodeId(a,i))>-1){this.nodeDeleteAtIndex(a,l);break}}for(var a in this.nodes){var l;if(this.nodes.hasOwnProperty(a))if((l=this.findNodeId(a,s))>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(a,i,l);break;case n.AFTER:this.insertIdIntoNode(a,i,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(s,i);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(s,i)}break}}}},t.prototype.swapArrayElements=function(t,e,o){var n=t[e];return t[e]=t[o],t[o]=n,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],o=0;o<this.nodes[t].length;o++){var n=this.nodes[t][o];this.nodeAndSubNodesDelete(n),e.push(t)}this.nodeDelete(t);for(o=0;o<e.length;o++)this.nodeDelete(e[o])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var o=0;o<this.nodes[e].length;o++){this.nodes[e][o]===t&&this.nodeDeleteAtIndex(e,o)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();o.default=i},{}],23:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./Heap"),r=function(){function t(t){this.heap=new i.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();o.default=r},{"./Heap":18,"./util":29}],24:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LinkedList"),i=function(){function t(){this.list=new n.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();o.default=i},{"./LinkedList":20}],25:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./arrays"),r=t("./Dictionary"),a=function(){function t(t){this.dictionary=new r.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(o){return t.contains(o)||e.remove(o),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(o){return!!t.contains(o)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,o){return t(o)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return i.toString(this.toArray())},t}();o.default=a},{"./Dictionary":16,"./arrays":27,"./util":29}],26:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LinkedList"),i=function(){function t(){this.list=new n.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();o.default=i},{"./LinkedList":20}],27:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util");function i(t,e,o){for(var i=o||n.defaultEquals,r=t.length,a=0;a<r;a++)if(i(t[a],e))return a;return-1}o.indexOf=i,o.lastIndexOf=function(t,e,o){for(var i=o||n.defaultEquals,r=t.length-1;r>=0;r--)if(i(t[r],e))return r;return-1},o.contains=function(t,e,o){return i(t,e,o)>=0},o.remove=function(t,e,o){var n=i(t,e,o);return!(n<0||(t.splice(n,1),0))},o.frequency=function(t,e,o){for(var i=o||n.defaultEquals,r=t.length,a=0,s=0;s<r;s++)i(t[s],e)&&a++;return a},o.equals=function(t,e,o){var i=o||n.defaultEquals;if(t.length!==e.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!i(t[a],e[a]))return!1;return!0},o.copy=function(t){return t.concat()},o.swap=function(t,e,o){if(e<0||e>=t.length||o<0||o>=t.length)return!1;var n=t[e];return t[e]=t[o],t[o]=n,!0},o.toString=function(t){return"["+t.toString()+"]"},o.forEach=function(t,e){for(var o=0,n=t;o<n.length;o++)if(!1===e(n[o]))return}},{"./util":29}],28:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("./arrays");o.arrays=n;var i=t("./Bag");o.Bag=i.default;var r=t("./BSTree");o.BSTree=r.default;var a=t("./BSTreeKV");o.BSTreeKV=a.default;var s=t("./Dictionary");o.Dictionary=s.default;var c=t("./Heap");o.Heap=c.default;var l=t("./LinkedDictionary");o.LinkedDictionary=l.default;var u=t("./LinkedList");o.LinkedList=u.default;var p=t("./MultiDictionary");o.MultiDictionary=p.default;var d=t("./FactoryDictionary");o.FactoryDictionary=d.default;var h=t("./FactoryDictionary");o.DefaultDictionary=h.default;var f=t("./Queue");o.Queue=f.default;var m=t("./PriorityQueue");o.PriorityQueue=m.default;var y=t("./Set");o.Set=y.default;var g=t("./Stack");o.Stack=g.default;var _=t("./MultiRootTree");o.MultiRootTree=_.default;var v=t("./util");o.util=v},{"./BSTree":13,"./BSTreeKV":14,"./Bag":15,"./Dictionary":16,"./FactoryDictionary":17,"./Heap":18,"./LinkedDictionary":19,"./LinkedList":20,"./MultiDictionary":21,"./MultiRootTree":22,"./PriorityQueue":23,"./Queue":24,"./Set":25,"./Stack":26,"./arrays":27,"./util":29}],29:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function i(t){return"function"==typeof t}function r(t){return void 0===t}function a(t){return"[object String]"===Object.prototype.toString.call(t)}o.has=function(t,e){return n.call(t,e)},o.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},o.defaultEquals=function(t,e){return t===e},o.defaultToString=function(t){return null===t?"COLLECTION_NULL":r(t)?"COLLECTION_UNDEFINED":a(t)?"$s"+t:"$o"+t.toString()},o.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(r(t))return"COLLECTION_UNDEFINED";if(a(t))return t.toString();var n="{",i=!0;for(var s in t)o.has(t,s)&&(i?i=!1:n+=e,n=n+s+":"+t[s]);return n+"}"},o.isFunction=i,o.isUndefined=r,o.isString=a,o.reverseCompareFunction=function(t){return r(t)||!i(t)?function(t,e){return t<e?1:t===e?0:-1}:function(e,o){return-1*t(e,o)}},o.compareToEquals=function(t){return function(e,o){return 0===t(e,o)}}},{}],30:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.IsNullOrWhiteSpace=function(t){try{return null==t||"undefined"==t||t.toString().replace(/\s/g,"").length<1}catch(t){return console.log(t),!1}},t.Join=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];try{var i=o[0];if(Array.isArray(i)||i instanceof Array){for(var r=t.Empty,a=0;a<i.length;a++){var s=i[a];a<i.length-1?r+=s+e:r+=s}return r}if("object"==typeof i){var c=t.Empty,l=i;return Object.keys(i).forEach(function(t){c+=l[t]+e}),c=c.slice(0,c.length-e.length)}var u=o;return t.join.apply(t,[e].concat(u))}catch(e){return console.log(e),t.Empty}},t.Format=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];try{return e.match(t.regexNumber)?t.format(t.regexNumber,e,o):e.match(t.regexObject)?t.format(t.regexObject,e,o,!0):t.Empty}catch(e){return console.log(e),t.Empty}},t.format=function(e,o,n,i){return void 0===i&&(i=!1),o.replace(e,function(e,o){var r,a=e.split(":");return a.length>1&&(o=a[0].replace("{",""),e=a[1].replace("}","")),null==(r=i?n[0][o]:n[o])||void 0==r||e.match(/{\d+}/)?r:void 0!==(r=t.parsePattern(e,r))&&null!=r?r:t.Empty})},t.parsePattern=function(e,o){switch(e){case"L":return o.toLowerCase();case"U":return o.toUpperCase();case"d":if("string"==typeof o)return t.getDisplayDateFromString(o);if(o instanceof Date)return t.Format("{0:00}.{1:00}.{2:0000}",o.getDate(),o.getMonth(),o.getFullYear());break;case"s":if("string"==typeof o)return t.getSortableDateFromString(o);if(o instanceof Date)return t.Format("{0:0000}-{1:00}-{2:00}",o.getFullYear(),o.getMonth(),o.getDate());break;case"n":"string"!=typeof o&&(o=o.toString());var n=o.replace(/,/g,".");if(isNaN(parseFloat(n))||n.length<=3)break;var i=n.split(/[^0-9]+/g),r=i;i.length>1&&(r=[t.join.apply(t,[""].concat(i.splice(0,i.length-1))),i[i.length-1]]);var a=r[0],s=a.length%3,c=s>0?a.substring(0,s):t.Empty,l=a.substring(s).match(/.{3}/g);return(c=c+"."+t.Join(".",l))+(r.length>1?","+r[1]:"")}return"number"!=typeof o&&isNaN(o)||isNaN(+e)||t.IsNullOrWhiteSpace(o)?o:t.formatNumber(o,e)},t.getDisplayDateFromString=function(t){var e;if((e=t.split("-")).length<=1)return t;var o=e[e.length-1],n=e[e.length-2],i=e[e.length-3];return(o=(o=o.split("T")[0]).split(" ")[0])+"."+n+"."+i},t.getSortableDateFromString=function(e){var o=e.replace(",","").split(".");if(o.length<=1)return e;var n=o[o.length-1].split(" "),i=t.Empty;n.length>1&&(i=n[n.length-1]);var r=o[o.length-1].split(" ")[0]+"-"+o[o.length-2]+"-"+o[o.length-3];return!t.IsNullOrWhiteSpace(i)&&i.length>1?r+="T"+i:r+="T00:00:00",r},t.formatNumber=function(t,e){var o=e.length,n=t.toString();if(o<=n.length)return n;var i=o-n.length;return new Array(i+=1).join("0")+n},t.join=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];for(var i=t.Empty,r=0;r<o.length;r++)if(!("string"==typeof o[r]&&t.IsNullOrWhiteSpace(o[r])||"number"!=typeof o[r]&&"string"!=typeof o[r])){i+=""+o[r];for(var a=r+1;a<o.length;a++)if(!t.IsNullOrWhiteSpace(o[a])){i+=e,r=a-1;break}}return i},t.regexNumber=/{(\d+(:\w*)?)}/g,t.regexObject=/{(\w+(:\w*)?)}/g,t.Empty="",t}();o.String=n;var i=function(){function t(t){void 0===t&&(t=n.Empty),this.Values=[],this.Values=new Array(t)}return t.prototype.ToString=function(){return this.Values.join("")},t.prototype.Append=function(t){this.Values.push(t)},t.prototype.AppendFormat=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.Values.push(n.Format.apply(n,[t].concat(e)))},t.prototype.Clear=function(){this.Values=[]},t}();o.StringBuilder=i},{}],AnimFSM:[function(t,e,o){"use strict";cc._RF.push(e,"18813ZBMzRIdIEo8XrJajjW","AnimFSM"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=(n.menu,function(){function t(t,e,o,n){this.OutState="",this.InState="",this.Action="",this.HasExitTime=!1,this.GoNextOnComplete=!1,this.InState=t,this.OutState=e,this.Action=o,this.HasExitTime=n}return t.prototype.ToString=function(){return"\n In: "+this.InState+"\n Out: "+this.OutState+"\n Action: "+this.Action+"\n Exit: "+this.HasExitTime},__decorate([r(cc.String)],t.prototype,"OutState",void 0),__decorate([r(cc.String)],t.prototype,"InState",void 0),__decorate([r(cc.String)],t.prototype,"Action",void 0),__decorate([r(Boolean)],t.prototype,"HasExitTime",void 0),__decorate([r(Boolean)],t.prototype,"GoNextOnComplete",void 0),t=__decorate([i],t)}());(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transitions=[],e.DEFAULT_START_STATE_NAME="<START>",e.DEFAULT_END_STATE_NAME="<END>",e.DEFAULT_ANY_STATE_NAME="<ANY>",e.DEFAULT_INVALID_STATE_NAME="<!INVALID_STATE>",e.DEFAULT_WRAP_END_ACTION="WrapExit",e.DEFAULT_ENTER_ACTION="FSM_Enter",e.DEFAULT_EXIT_ACTION="FSM_Exit",e.AnimationClips=[],e.CurrentState=e.DEFAULT_INVALID_STATE_NAME,e.ACTION_TO_EXECUTE="None",e.EXECUTE_ACTION=!1,e.USE_DEFAULT_TRANSITIONS=!1,e.Anim_Names="",e.DEFAULT_IN_PREFIX="IN_",e.DEFAULT_OUT_PREFIX="OUT_",e.DEFAULT_LOOP_PREFIX="LOOP_",e}__extends(e,t),e.prototype.onLoad=function(){this.USE_DEFAULT_TRANSITIONS&&(this.transitions[0]=new a(this.DEFAULT_START_STATE_NAME,this.DEFAULT_IN_PREFIX+this.Anim_Names,this.DEFAULT_ENTER_ACTION,!1),this.transitions[1]=new a(this.DEFAULT_IN_PREFIX+this.Anim_Names,this.DEFAULT_LOOP_PREFIX+this.Anim_Names,"ToLoop",!1),this.transitions[2]=new a(this.DEFAULT_LOOP_PREFIX+this.Anim_Names,this.DEFAULT_LOOP_PREFIX+this.Anim_Names,"KeepLoop",!1),this.transitions[3]=new a(this.DEFAULT_LOOP_PREFIX+this.Anim_Names,this.DEFAULT_OUT_PREFIX+this.Anim_Names,"ToOut",!1),this.transitions[4]=new a(this.DEFAULT_OUT_PREFIX+this.Anim_Names,this.DEFAULT_END_STATE_NAME,this.DEFAULT_EXIT_ACTION,!1),this.transitions[5]=new a(this.DEFAULT_END_STATE_NAME,this.DEFAULT_START_STATE_NAME,this.DEFAULT_WRAP_END_ACTION,!1));var t=this.getComponent(cc.Animation);null!=t&&(this.AnimationClips=t.getClips()),this.CurrentState=this.DEFAULT_START_STATE_NAME},e.prototype.update=function(){this.EXECUTE_ACTION&&(this.EXECUTE_ACTION=!1,this.ChangeState(this.ACTION_TO_EXECUTE))},e.prototype.ChangeState=function(t){var e=this;console.log("Current: "+this.CurrentState),console.log("Action: "+t),this.transitions.forEach(function(o){o.Action==t&&e.CurrentState==o.InState&&(e.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,e.AnimationFinished),e.CurrentState=o.OutState,e.CurrentState!=e.DEFAULT_ANY_STATE_NAME&&e.CurrentState!=e.DEFAULT_START_STATE_NAME&&e.CurrentState!=e.DEFAULT_END_STATE_NAME&&e.getComponent(cc.Animation).play(e.CurrentState),e.StateChanged())})},e.prototype.StateChanged=function(){console.log("New State : "+this.CurrentState),this.CurrentState==this.DEFAULT_START_STATE_NAME&&this.ChangeState(this.DEFAULT_ENTER_ACTION),this.CurrentState==this.DEFAULT_END_STATE_NAME&&this.ChangeState(this.DEFAULT_WRAP_END_ACTION)},e.prototype.AnimationFinished=function(t){console.log("Anim finished"+t.type)},__decorate([r(a)],e.prototype,"transitions",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_START_STATE_NAME",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_END_STATE_NAME",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_ANY_STATE_NAME",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_INVALID_STATE_NAME",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_WRAP_END_ACTION",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_ENTER_ACTION",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_EXIT_ACTION",void 0),__decorate([r(cc.Animation)],e.prototype,"AnimationClips",void 0),__decorate([r(cc.String)],e.prototype,"CurrentState",void 0),__decorate([r(cc.String)],e.prototype,"ACTION_TO_EXECUTE",void 0),__decorate([r(Boolean)],e.prototype,"EXECUTE_ACTION",void 0),__decorate([r(Boolean)],e.prototype,"USE_DEFAULT_TRANSITIONS",void 0),__decorate([r(cc.String)],e.prototype,"Anim_Names",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_IN_PREFIX",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_OUT_PREFIX",void 0),__decorate([r(cc.String)],e.prototype,"DEFAULT_LOOP_PREFIX",void 0),e=__decorate([i],e)})(cc.Component);cc._RF.pop()},{}],ArrayTest:[function(t,e,o){"use strict";cc._RF.push(e,"f06bb1Nd8RCN7vvz/FSg1eX","ArrayTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=0,s=function(){function t(){this.s="",this.n=a,this.x=null}return __decorate([r(cc.String)],t.prototype,"s",void 0),__decorate([r(cc.Integer)],t.prototype,"n",void 0),__decorate([r(cc.Node)],t.prototype,"x",void 0),t=__decorate([i("__T1__")],t)}(),c=function(){function t(){this.t1=[],this.x=null}return __decorate([r({type:[s]})],t.prototype,"t1",void 0),__decorate([r(cc.Node)],t.prototype,"x",void 0),t=__decorate([i("__T2__")],t)}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodes=[],e.t2=[],e}return __extends(e,t),__decorate([r([cc.Sprite])],e.prototype,"nodes",void 0),__decorate([r({type:[c]})],e.prototype,"t2",void 0),e=__decorate([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],AudioClipCollection:[function(t,e,o){"use strict";cc._RF.push(e,"5e0f1Azv+pBYJxmIYMwvMnd","AudioClipCollection"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(){function t(){this.clips=[]}return Object.defineProperty(t.prototype,"randomClip",{get:function(){if(n.isZero(this.clips.length))return null;return this.clips[Math.round(Math.random()*(this.clips.length-1))]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipCount",{get:function(){return this.clips.length},enumerable:!0,configurable:!0}),t.prototype.getClip=function(t){return this.clips[t]},__decorate([a({type:[cc.AudioClip],visible:!0})],t.prototype,"clips",void 0),t=__decorate([r("AudioClipCollection")],t)}();o.default=s,cc._RF.pop()},{"./Utils/MathUtils":"MathUtils"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"3719fnGN0VPVLAlJbK1YgDq","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,i=1,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tweens=[],e.musicTween=null,e._masterVol=i,e._sfxVol=i,e._musicVol=i,e}return __extends(e,t),Object.defineProperty(e.prototype,"masterVol",{get:function(){return this._masterVol},set:function(t){this._masterVol=t,cc.audioEngine.setEffectsVolume(this._masterVol*this._sfxVol),cc.audioEngine.setMusicVolume(this._masterVol*this._musicVol)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sfxVol",{get:function(){return this._sfxVol},set:function(t){this._sfxVol=t,cc.audioEngine.setEffectsVolume(this._masterVol*this._sfxVol)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outSfxVol",{get:function(){return this._masterVol*this._sfxVol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"musicVol",{get:function(){return this._musicVol},set:function(t){this._musicVol=t,cc.audioEngine.setMusicVolume(this._masterVol*this._musicVol)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outMusicVol",{get:function(){return this._masterVol*this._musicVol},enumerable:!0,configurable:!0}),e.prototype.play=function(t,e){return cc.audioEngine.playEffect(t,e)},e.prototype.playMusic=function(t,e){return cc.audioEngine.playMusic(t,e)},e.prototype.stop=function(t){var e=this.getAudioTween(t);this.stopAndSplice(e),cc.audioEngine.stop(t)},e.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},e.prototype.stopAll=function(){this.stopAndClear(),null!=this.musicTween&&(this.musicTween.tween.stop(),this.musicTween=null),cc.audioEngine.stopAll()},e.prototype.pause=function(t){var e=this.getAudioTween(t);-1!=e&&cc.director.getActionManager().pauseTarget(this.tweens[e].target),cc.audioEngine.pause(t)},e.prototype.pauseMusic=function(){null!=this.musicTween&&cc.director.getActionManager().pauseTarget(this.musicTween.target),cc.audioEngine.pauseMusic()},e.prototype.pauseAll=function(){this.tweens.forEach(function(t){return cc.director.getActionManager().pauseTarget(t.target)}),null!=this.musicTween&&cc.director.getActionManager().pauseTarget(this.musicTween.target),cc.audioEngine.pauseAll()},e.prototype.resume=function(t){var e=this.getAudioTween(t);-1!=e&&cc.director.getActionManager().resumeTarget(this.tweens[e].target),cc.audioEngine.resume(t)},e.prototype.resumeMusic=function(){null!=this.musicTween&&cc.director.getActionManager().resumeTarget(this.musicTween.target),cc.audioEngine.resumeMusic()},e.prototype.resumeAll=function(){this.tweens.forEach(function(t){return cc.director.getActionManager().resumeTarget(t.target)}),null!=this.musicTween&&cc.director.getActionManager().resumeTarget(this.musicTween.target),cc.audioEngine.resumeAll()},e.prototype.playFadingIn=function(t,e,o,n){var i=cc.audioEngine.play(t,n,0),r={volume:0,audio:i};return this.fadeInAudio(i,e,o,r),i},e.prototype.playMusicFadingIn=function(t,e,o,n){var i=cc.audioEngine.playMusic(t,n);cc.audioEngine.setMusicVolume(0);var r={volume:0,audio:i};return this.fadeInMusic(e,o,r),i},e.prototype.stopFadingOut=function(t,e,o){this.fadeOutAudio(t,e,o,function(){cc.audioEngine.stop(t)})},e.prototype.stopMusicFadingOut=function(t,e){this.fadeOutMusic(t,e,function(){cc.audioEngine.stopMusic()})},e.prototype.pauseFadingOut=function(t,e,o){this.fadeOutAudio(t,e,o,function(){cc.audioEngine.pause(t)})},e.prototype.pauseMusicFadingOut=function(t,e){this.fadeOutMusic(t,e,function(){cc.audioEngine.pauseMusic()})},e.prototype.fadeInAudio=function(t,e,o,n){var i=this,r=new cc.Tween(n);r.to(e,{volume:this.outSfxVol},{progress:function(e,o,n,r){return cc.audioEngine.setVolume(t,cc.misc.lerp(0,i.outSfxVol,r)),r},easing:o}),r.call(function(){var e=i.getAudioTween(t);-1!=e&&i.tweens.splice(e,1)}),r.start(),this.tweens.push({tween:r,id:t,target:n})},e.prototype.fadeInMusic=function(t,e,o){var n=this,i=new cc.Tween(o);i.to(t,{volume:this.outMusicVol},{progress:function(t,e,o,i){return cc.audioEngine.setMusicVolume(cc.misc.lerp(0,n.outMusicVol,i)),i},easing:e}),i.call(function(){n.musicTween=null}),i.start(),this.musicTween={tween:i,id:-1,target:o}},e.prototype.fadeOutAudio=function(t,e,o,n){var i=this,r=this.getAudioTween(t),a=-1!=r?this.tweens[r].target:{volume:this.outSfxVol,audio:t};if(this.stopAndSplice(r),cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PLAYING){var s=cc.audioEngine.getVolume(t)/this.outSfxVol,c=new cc.Tween(a);c.to(e,{volume:0},{progress:function(e,o,n,r){return cc.audioEngine.setVolume(t,cc.misc.lerp(s*i.outSfxVol,0,r)),r},easing:o}),c.call(n),c.start()}},e.prototype.fadeOutMusic=function(t,e,o){var n=this,i=null;null!=this.musicTween&&(i=this.musicTween.target,this.musicTween.tween.stop(),this.musicTween=null),null==i&&(i={volume:this.outMusicVol});var r=cc.audioEngine.getMusicVolume()/this.outSfxVol,a=new cc.Tween(i);a.to(t,{volume:0},{progress:function(t,e,o,i){return cc.audioEngine.setMusicVolume(cc.misc.lerp(r*n.outMusicVol,0,i)),i},easing:e}),a.call(o),a.start(),this.musicTween={tween:a,id:-1,target:i}},e.prototype.getAudioTween=function(t){return this.tweens.findIndex(function(e){return e.id==t})},e.prototype.stopAndSplice=function(t){if(t>-1){this.tweens[t].tween.stop(),this.tweens.splice(t,1)}},e.prototype.stopAndClear=function(){this.tweens.forEach(function(t){t.tween.stop()}),this.tweens.length=0},e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],AudioSettingsController:[function(t,e,o){"use strict";cc._RF.push(e,"596d1sylnhGZbRgiLf8lvNh","AudioSettingsController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Core/Maestro"),i=t("../UIAudioClips"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(){function t(){this.normal=null,this.pressed=null,this.hover=null,this.disabled=null}return __decorate([s(cc.SpriteFrame)],t.prototype,"normal",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"pressed",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"hover",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"disabled",void 0),t=__decorate([a("AudioSettingButtonSprites")],t)}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicButton=null,e.sfxButton=null,e.musicEnabledSprites=new c,e.musicDisabledSprites=new c,e.sfxEnabledSprites=new c,e.sfxDisabledSprites=new c,e}return __extends(e,t),e.prototype.switchMusicState=function(){this.playButtonSound();var t=n.default.DefaultInstance.GetConcreteState();t.StateContainer.isMusicEnabled=!t.StateContainer.isMusicEnabled,t.StateContainer.isMusicEnabled?this.changeButtonSprites(this.musicButton,this.musicEnabledSprites):this.changeButtonSprites(this.musicButton,this.musicDisabledSprites)},e.prototype.switchSFXState=function(){this.playButtonSound();var t=n.default.DefaultInstance.GetConcreteState();t.StateContainer.isSFXEnabled=!t.StateContainer.isSFXEnabled,t.StateContainer.isSFXEnabled?this.changeButtonSprites(this.sfxButton,this.sfxEnabledSprites):this.changeButtonSprites(this.sfxButton,this.sfxDisabledSprites)},e.prototype.playButtonSound=function(){var t=n.default.DefaultInstance.GetPersistentNode().getComponent(i.default);t&&t.playButtonClip()},e.prototype.changeButtonSprites=function(t,e){t.normalSprite=e.normal,t.pressedSprite=e.pressed,t.hoverSprite=e.hover,t.disabledSprite=e.disabled},e.prototype.suscribeSwitchBehaviour=function(t,e){var o=new cc.Component.EventHandler;o.target=this.node,o.component="AudioSettingsController",o.handler=e,t.clickEvents.push(o)},e.prototype.onLoad=function(){var t=n.default.DefaultInstance.GetConcreteState();this.musicEnabledSprites.size=this.musicButton.node.getContentSize(),this.sfxEnabledSprites.size=this.sfxButton.node.getContentSize(),this.musicDisabledSprites.size=this.musicButton.node.getContentSize(),this.sfxDisabledSprites.size=this.sfxButton.node.getContentSize(),t.StateContainer.isMusicEnabled?this.changeButtonSprites(this.musicButton,this.musicEnabledSprites):this.changeButtonSprites(this.musicButton,this.musicDisabledSprites),t.StateContainer.isSFXEnabled?this.changeButtonSprites(this.sfxButton,this.sfxEnabledSprites):this.changeButtonSprites(this.sfxButton,this.sfxDisabledSprites),this.suscribeSwitchBehaviour(this.musicButton,"switchMusicState"),this.suscribeSwitchBehaviour(this.sfxButton,"switchSFXState")},__decorate([s(cc.Button)],e.prototype,"musicButton",void 0),__decorate([s(cc.Button)],e.prototype,"sfxButton",void 0),__decorate([s(c)],e.prototype,"musicEnabledSprites",void 0),__decorate([s(c)],e.prototype,"musicDisabledSprites",void 0),__decorate([s(c)],e.prototype,"sfxEnabledSprites",void 0),__decorate([s(c)],e.prototype,"sfxDisabledSprites",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../CrabWare/Core/Maestro":"Maestro","../UIAudioClips":"UIAudioClips"}],AudioTest:[function(t,e,o){"use strict";cc._RF.push(e,"3d590vmYwxPPbVk8bbobm1v","AudioTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/AudioManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.am=null,e.ac=null,e}return __extends(e,t),e.prototype.start=function(){var t=this,e=this.am.play(this.ac,!0);this.scheduleOnce(function(){t.am.stop(e)},1),this.scheduleOnce(function(){e=t.am.play(t.ac,!0)},2),this.scheduleOnce(function(){t.am.pause(e)},3.33),this.scheduleOnce(function(){e=t.am.play(t.ac,!0)},4),this.scheduleOnce(function(){t.am.pause(e)},5.33),this.scheduleOnce(function(){t.am.resume(e)},6),this.scheduleOnce(function(){t.am.masterVol=.1},6.5),this.scheduleOnce(function(){t.am.masterVol=1},7),this.scheduleOnce(function(){t.am.sfxVol=.1},7.5),this.scheduleOnce(function(){t.am.masterVol=.1},8),this.scheduleOnce(function(){t.am.masterVol=t.am.sfxVol=1},9),this.scheduleOnce(function(){t.am.stop(e)},10),this.scheduleOnce(function(){e=t.am.playFadingIn(t.ac,3,"quadIn",!0)},11),this.scheduleOnce(function(){t.am.stop(e)},15),this.scheduleOnce(function(){e=t.am.playFadingIn(t.ac,3,"linear",!0)},20),this.scheduleOnce(function(){t.am.pauseFadingOut(e,3,"linear")},21),this.scheduleOnce(function(){e=t.am.playFadingIn(t.ac,5,"elasticIn",!0)},25),this.scheduleOnce(function(){t.am.pause(e)},28),this.scheduleOnce(function(){t.am.resume(e)},35),this.scheduleOnce(function(){t.am.stop(e)},38),this.scheduleOnce(function(){e=t.am.playMusic(t.ac,!0)},40),this.scheduleOnce(function(){t.am.stopMusic()},42),this.scheduleOnce(function(){e=t.am.playMusicFadingIn(t.ac,5,"lineal",!0)},45),this.scheduleOnce(function(){t.am.pauseMusic()},47.5),this.scheduleOnce(function(){t.am.resumeMusic()},50),this.scheduleOnce(function(){t.am.stopMusicFadingOut(5,"lineal")},55),this.scheduleOnce(function(){t.am.pauseMusic()},57.5),this.scheduleOnce(function(){t.am.resumeMusic()},60)},__decorate([a(n.default)],e.prototype,"am",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"ac",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../Scripts/CrabWare/Core/AudioManager":"AudioManager"}],"AutoChangeScene.ts":[function(t,e,o){"use strict";cc._RF.push(e,"6726440+XBEYoG49JIZFFJZ","AutoChangeScene.ts"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneName="gameplay",e}return __extends(e,t),e.prototype.start=function(){n.default.DefaultInstance.SceneManager.ChangeScene(this.sceneName)},__decorate([a],e.prototype,"sceneName",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../Core/Maestro":"Maestro"}],BaseBoosterEffect:[function(t,e,o){"use strict";cc._RF.push(e,"50d7fGM+7pFeY6/4ncXqoy9","BaseBoosterEffect"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BaseBoosterPickup:[function(t,e,o){"use strict";cc._RF.push(e,"15e3fSzjsJEKYLNMxrFZHOb","BaseBoosterPickup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BasePickup"),i=t("../CrabWare/Core/Maestro"),r=t("../CrabWare/Components/PhysicsProjectile"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoConsume=!1,e}return __extends(e,t),e.prototype.onBeginContact=function(e,o,n){if(t.prototype.onBeginContact.call(this),this.autoConsume){var a=n.node.getComponent(r.default);this.autoConsumeBooster(a)}else{var s=i.default.DefaultInstance.SceneManager.GetController();s&&s.addBooster(this.getBooster())}},e.prototype.getBooster=function(){return null},e.prototype.autoConsumeBooster=function(t){this.getBooster().doEffect(t)},__decorate([c],e.prototype,"autoConsume",void 0),e=__decorate([s],e)}(n.default);o.default=l,cc._RF.pop()},{"../CrabWare/Components/PhysicsProjectile":"PhysicsProjectile","../CrabWare/Core/Maestro":"Maestro","./BasePickup":"BasePickup"}],BaseCallOnAction:[function(t,e,o){"use strict";cc._RF.push(e,"541b0I+YcVLSJ9y3AVZJIAR","BaseCallOnAction"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Subscribers=[],e}return __extends(e,t),e.prototype.CallSubscribers=function(){this.OnActionCalled(),this.Subscribers.forEach(function(t){t.emit([])})},__decorate([r([cc.Component.EventHandler])],e.prototype,"Subscribers",void 0),e=__decorate([i],e)}(cc.Component);o.BaseCallOnAction=a,cc._RF.pop()},{}],BaseExposedLocalizationItem:[function(t,e,o){"use strict";cc._RF.push(e,"79dd6h2xFBPHYn15kgfwA3Q","BaseExposedLocalizationItem"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BaseLocalizationItem:[function(t,e,o){"use strict";cc._RF.push(e,"2bed2du+P5N8bfRNgGAY3RU","BaseLocalizationItem"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BasePickup:[function(t,e,o){"use strict";cc._RF.push(e,"205c5MrNAZLA55prwNIV1pC","BasePickup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=1e3,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destroyAnimationName="OUT_",e.animation=null,e.contactClip=null,e._score=s,e}return __extends(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),e.prototype.onBeginContact=function(t,e,o){var i=n.default.DefaultInstance.SceneManager.GetController();(i.showObtainedScoreLabel(this.node,this.score,"pickup"),i.score+=this.score,this.animation)?(this.animation.play(this.destroyAnimationName),this.node.getComponentsInChildren(cc.PhysicsCollider).forEach(function(t){t.enabled=!1})):this.destroyObject();this.contactClip&&cc.audioEngine.playEffect(this.contactClip,!1)},e.prototype.destroyObject=function(){this.node.destroy()},e.prototype.start=function(){var t=this;this.animation||(this.animation=this.getComponent(cc.Animation),this.animation||(this.animation=this.getComponentInChildren(cc.Animation))),this.animation&&this.animation.on("finished",function(){t.animation.currentClip.name===t.destroyAnimationName&&t.destroyObject()}),n.default.DefaultInstance.GetConcreteState().StateContainer.currentLevelData.MaxScore+=this.score},__decorate([a],e.prototype,"destroyAnimationName",void 0),__decorate([a(cc.Animation)],e.prototype,"animation",void 0),__decorate([a({type:cc.AudioClip})],e.prototype,"contactClip",void 0),__decorate([a({visible:!0})],e.prototype,"_score",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro"}],BaseSceneController:[function(t,e,o){"use strict";cc._RF.push(e,"415beZVoq1ERIy/538Wa2hK","BaseSceneController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([i,r("CrabWare/Core/BaseSceneController")],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],BaseStateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"cf1d8pvFpVHNaQTtYEz++g2","BaseStateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"currentStateName",{get:function(){return this.currentState.name},enumerable:!0,configurable:!0}),e.prototype.changeState=function(t){var e=this;if(null!=this.transitions){var o=this.transitions.find(function(o){return o.fromState==e.currentState&&o.action==t});null!=o&&(o.toState.do(),this.currentState=o.toState)}},e.prototype.changeStateOnClick=function(t,e){this.changeState(e)},e.prototype.setState=function(t){var e=this.states.find(function(e){return t==e.name});null!=e&&(e.do(),this.currentState=e)},e.prototype.setStateOnClick=function(t,e){this.setState(e)},e=__decorate([i,r("CrabWare/Components/FSM/BaseStateMachine")],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],BaseState:[function(t,e,o){"use strict";cc._RF.push(e,"f9831+iXOtHPpSB9yodf74X","BaseState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BoosterSpeedEffect:[function(t,e,o){"use strict";cc._RF.push(e,"aa8a1cDtA1ImJEZVM6nV1Mc","BoosterSpeedEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=function(){function t(t,e,o){this.speedMultiplier=t,this.densityMultiplier=e,this.direction=o}return t.prototype.doEffect=function(t){n.default.log("direction norm: X "+this.direction.normalize().x+"; Y: "+this.direction.normalize().y);var e=t.getComponent(cc.RigidBody),o=t.getComponent(cc.PhysicsCollider),i=e.linearVelocity.mag()*this.speedMultiplier;e.linearVelocity=this.direction.normalize().mul(i),o.density=o.density*this.densityMultiplier;o._fixtures[0].SetDensity(o.density),o._fixtures[0].m_body.ResetMassData(),t&&t.BoostLemmingGraphics()},t}();o.default=i,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro"}],BoosterSpeedPickup:[function(t,e,o){"use strict";cc._RF.push(e,"fda41ZK94BDuIfRm9+FBfwJ","BoosterSpeedPickup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseBoosterPickup"),i=t("./BoosterSpeedEffect"),r=cc._decorator,a=r.ccclass,s=r.property,c=2,l=2.5,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speedMultiplier=c,e.densityMultiplier=l,e.target=null,e.referenceNode=null,e}return __extends(e,t),e.prototype.getBooster=function(){var t=cc.Vec2.ZERO,e=this.node.parent.convertToWorldSpaceAR(this.node.position);return t=this.target.parent.convertToWorldSpaceAR(this.target.position).sub(e),new i.default(this.speedMultiplier,this.densityMultiplier,t.normalize())},e.prototype.start=function(){this.referenceNode=new cc.Node("POSITION_REFERENCE"),this.referenceNode.position=cc.Vec2.ZERO,this.referenceNode.parent=null,t.prototype.start.call(this)},__decorate([s],e.prototype,"speedMultiplier",void 0),__decorate([s],e.prototype,"densityMultiplier",void 0),__decorate([s(cc.Node)],e.prototype,"target",void 0),e=__decorate([a],e)}(n.default);o.default=u,cc._RF.pop()},{"./BaseBoosterPickup":"BaseBoosterPickup","./BoosterSpeedEffect":"BoosterSpeedEffect"}],BoosterSpreadEffect:[function(t,e,o){"use strict";cc._RF.push(e,"b0ef2NDIvFPnbHDgnlSakrL","BoosterSpreadEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.doEffect=function(){},t}();o.default=n,cc._RF.pop()},{}],BoosterSpreadPickup:[function(t,e,o){"use strict";cc._RF.push(e,"147646TfcpM2YRAiqzlSCT8","BoosterSpreadPickup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseBoosterPickup"),i=t("./BoosterSpreadEffect"),r=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getBooster=function(){return new i.default},e=__decorate([r],e)}(n.default);o.default=a,cc._RF.pop()},{"./BaseBoosterPickup":"BaseBoosterPickup","./BoosterSpreadEffect":"BoosterSpreadEffect"}],BootController:[function(t,e,o){"use strict";cc._RF.push(e,"9ab7azlwN5C17S8eF+xHLGK","BootController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("./MusicPlayer"),r=cc._decorator,a=r.ccclass,s=r.property,c=0,l=1,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.startButton=null,e.TargetLevel="",e.LevelsToLoad=[],e.currentLoadingLevel=c,e.loaded=!1,e.maxLoadPerLevel=l,e}return __extends(e,t),e.prototype.onLoad=function(){i.default.instance;this.loadLevel(this.LevelsToLoad[this.currentLoadingLevel]),this.maxLoadPerLevel=1/this.LevelsToLoad.length},e.prototype.loadLevel=function(t){var e=this;cc.director.preloadScene(t,function(t,o){e.levelLoading(t,o)},function(t,o){e.levelLoaded(t,o)})},e.prototype.levelLoaded=function(t,e){t&&(console.error("Error "+t.name+" while loading: "+e.name),this.loaded=!1),n.default.log("level_finish_loading");this.currentLoadingLevel==this.LevelsToLoad.length-1?(this.loaded=!0,this.startButton.active=!0,this.progressBar.node.active=!1,n.default.log("DONE")):(this.currentLoadingLevel++,this.loadLevel(this.LevelsToLoad[this.currentLoadingLevel]))},e.prototype.levelLoading=function(t,e){var o=t/e*this.maxLoadPerLevel+this.maxLoadPerLevel*this.currentLoadingLevel;this.progressBar&&(this.progressBar.progress=o)},e.prototype.boot=function(){this.loaded&&cc.director.loadScene(this.TargetLevel)},__decorate([s(cc.ProgressBar)],e.prototype,"progressBar",void 0),__decorate([s(cc.Node)],e.prototype,"startButton",void 0),__decorate([s],e.prototype,"TargetLevel",void 0),__decorate([s([cc.String])],e.prototype,"LevelsToLoad",void 0),e=__decorate([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","./MusicPlayer":"MusicPlayer"}],BootOrientationPopup:[function(t,e,o){"use strict";cc._RF.push(e,"2c76czHUqlM0YWK/VqEz7G+","BootOrientationPopup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Components/PopupController"),i=t("../CrabWare/Core/Maestro"),r=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),cc.sys.isMobile?(i.default.isLandscape&&this.close(),this.showOnOrientationChange=function(){i.default.isLandscape?e.close():e.show()},cc.view.on("canvas-resize",this.showOnOrientationChange,this)):this.node.destroy()},e.prototype.onDestroy=function(){cc.view.off("canvas-resize",this.showOnOrientationChange,this)},e=__decorate([r],e)}(n.default);o.default=a,cc._RF.pop()},{"../CrabWare/Components/PopupController":"PopupController","../CrabWare/Core/Maestro":"Maestro"}],CallOnClick:[function(t,e,o){"use strict";cc._RF.push(e,"75f68Tf3lhP1Lbh/nnhJ/M4","CallOnClick"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseCallOnAction"),i=cc._decorator,r=i.ccclass,a=i.menu,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.OnActionCalled=function(){},e.prototype.onLoad=function(){cc.sys.isMobile?this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this):this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onInputDown,this)},e.prototype.onInputDown=function(){this.CallSubscribers()},e=__decorate([r,a("CrabWare/Components/CallOnClick")],e)}(n.BaseCallOnAction);o.default=s,cc._RF.pop()},{"./BaseCallOnAction":"BaseCallOnAction"}],CallOnContact:[function(t,e,o){"use strict";cc._RF.push(e,"02dccly/21GWKYH6TB0zcYq","CallOnContact"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseCallOnAction"),i=cc._decorator,r=i.ccclass,a=i.menu,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.OnActionCalled=function(){},e.prototype.onBeginContact=function(){this.CallSubscribers()},e=__decorate([r,a("CrabWare/Components/CallOnContact")],e)}(n.BaseCallOnAction);o.default=s,cc._RF.pop()},{"./BaseCallOnAction":"BaseCallOnAction"}],CallOnKey:[function(t,e,o){"use strict";cc._RF.push(e,"1152cnNd9VPIYIGgObUq0Iy","CallOnKey"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseCallOnAction"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.menu,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.WatchedKey=cc.macro.KEY.space,e}return __extends(e,t),e.prototype.OnActionCalled=function(){},e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(t){t.keyCode==this.WatchedKey&&this.CallSubscribers()},__decorate([a({type:cc.Enum(cc.macro.KEY)})],e.prototype,"WatchedKey",void 0),e=__decorate([r,s("CrabWare/Components/CallOnKey")],e)}(n.BaseCallOnAction);o.default=c,cc._RF.pop()},{"./BaseCallOnAction":"BaseCallOnAction"}],CameraController:[function(t,e,o){"use strict";cc._RF.push(e,"73ee3hcpk9JNJ9o8uuFZeiD","CameraController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.requireComponent,c=i.menu,l=.5,u=2,p=10,d=.1,h=1,f=1,m=0,y=1.5,g=1,_=0,v=0,C=0,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.min=null,e.max=null,e.bottom=null,e.minMax=new cc.Vec2(cc.view.getViewportRect().xMin,cc.view.getViewportRect().xMax),e._targetNode=null,e.maxRange=m,e.minZoom=l,e.zoomFactor=h,e.minZoomTargetSpeed=u,e.catchSpeed=p,e.catchZoom=d,e.defaultZoom=f,e.isLinear=!0,e.isZoomLinear=!1,e._isOffsetAhead=!1,e.dragActivatorThreshold=y,e.hasBeenMovedByInput=!1,e._isUserControllable=!0,e.targetOld={node:null,pos:0},e.nodePos=_,e.inputSpeed=v,e.target=C,e.persistentTargetZoomRatio=g,e.persistentZoomRatio=g,e.gotInput=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"targetNode",{get:function(){return this._targetNode},set:function(t){this._targetNode=t,t||(this.target=this.nodePos)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUserControllable",{get:function(){return this._isUserControllable},set:function(t){this._isUserControllable!=t&&(this._isUserControllable=t,t?this.suscribeInputEvents():this.unsuscribeInputEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOffsetAhead",{get:function(){return this._isOffsetAhead},set:function(t){if(this._isOffsetAhead=t,t)if(this.targetNode){var e=this.targetNode.parent.convertToWorldSpaceAR(this.targetNode.position),o=this.node.parent.convertToNodeSpaceAR(e).x-this.node.x;this.node.x+=2*o}else this.target=this.node.x;this.nodePos=this.node.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this.node.getComponent(cc.Camera)},enumerable:!0,configurable:!0}),e.prototype.getViewPortHalfWidth=function(t,e){return.5*t.width/e/this.camera.zoomRatio},e.prototype.getViewPortHalfHeight=function(t,e){return.5*t.height/e/this.camera.zoomRatio},e.prototype.forceNodePosUpdate=function(){this.nodePos=this.node.x},Object.defineProperty(e.prototype,"zoomRatio",{set:function(t){this.camera.zoomRatio=t;var e=new cc.Size(cc.view.getViewportRect().size.width/this.camera.zoomRatio,cc.view.getViewportRect().size.height/this.camera.zoomRatio);this.node.setContentSize(e)},enumerable:!0,configurable:!0}),e.prototype.alignPositionInRange=function(){var t=cc.view.getViewportRect(),e=cc.view.getScaleX(),o=this.getViewPortHalfWidth(t,e),n=this.getViewPortHalfHeight(t,e),i=this.node.x-o,r=this.node.x+o;null!=this.bottom&&(this.node.y=this.bottom.y+n),null==this.min||null==this.max?i<this.minMax.x?this.node.x=this.minMax.x+o:this.minMax.y<r&&(this.node.x=this.minMax.y-o):i<this.min.x?this.node.x=this.min.x+o:this.max.x<r&&(this.node.x=this.max.x-o)},e.prototype.alignTarget=function(){var t=cc.view.getViewportRect(),e=cc.view.getScaleX(),o=this.getViewPortHalfWidth(t,e),n=this.target-o,i=this.target+o;null==this.min||null==this.max?n<this.minMax.x?this.target=this.minMax.x+o:this.minMax.y<i&&(this.target=this.minMax.y-o):n<this.min.x?this.target=this.min.x+o:this.max.x<i&&(this.target=this.max.x-o)},e.prototype.offsetCamera=function(){var t=this.target-this.nodePos,e=Math.abs(t);if(e>this.maxRange)n.isPositive(t)?this.nodePos=this.target-this.maxRange:this.nodePos=this.target+this.maxRange;else{var o=cc.PhysicsManager.FIXED_TIME_STEP,i=void 0;if(this.isLinear)i=1-cc.misc.clamp01((e-this.catchSpeed*o)/this.maxRange);else{var r=Math.sqrt(e/this.maxRange);i=1-cc.misc.clamp01((e-this.catchSpeed*o*r)/this.maxRange)}i*=.5,n.isPositive(t)?this.nodePos=cc.misc.lerp(this.target-this.maxRange,this.target+this.maxRange,i):this.nodePos=cc.misc.lerp(this.target+this.maxRange,this.target-this.maxRange,i)}if(this.isOffsetAhead){t=this.target-this.nodePos,this.node.x=this.nodePos+2*t}else this.node.x=this.nodePos},e.prototype.applyZoom=function(){var t,e=Math.abs(this.target-this.targetOld.pos),o=cc.PhysicsManager.FIXED_TIME_STEP,n=1,i=this.camera.zoomRatio/this.defaultZoom;if(null!=this.targetOld.node&&this.targetOld.node==this.targetNode&&e>this.minZoomTargetSpeed){var r=this.minZoom/this.defaultZoom;(n=1-.025*(e-this.minZoomTargetSpeed)*this.zoomFactor)<r&&(n=r)}if(this.persistentTargetZoomRatio>n&&(this.persistentTargetZoomRatio=n),n<i){if(this.isZoomLinear||1==this.persistentTargetZoomRatio)t=i-this.catchZoom*o;else{var a=-1/(this.persistentTargetZoomRatio-1)*(i-this.persistentTargetZoomRatio);t=i-this.catchZoom*o*Math.pow(a,2)}t<this.persistentTargetZoomRatio&&(t=this.persistentTargetZoomRatio)}else{if(this.isZoomLinear||1==this.persistentTargetZoomRatio)t=i+this.catchZoom*o;else{i==this.persistentTargetZoomRatio&&(this.persistentTargetZoomRatio+=.001);a=-1/(this.persistentTargetZoomRatio-1)*(i-this.persistentTargetZoomRatio);t=i+this.catchZoom*o*Math.pow(a,2)}t>n&&(t=n)}1==t&&1==n?this.persistentTargetZoomRatio=1:this.persistentZoomRatio==t&&(this.persistentTargetZoomRatio=t),this.persistentZoomRatio=t,t*=this.defaultZoom,this.zoomRatio=t},e.prototype.suscribeInputEvents=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onInputMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this)},e.prototype.unsuscribeInputEvents=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onInputMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this)},e.prototype.onInputDown=function(){this.onUserControlStart&&this.onUserControlStart(),this.gotInput=!0},e.prototype.onInputUp=function(){if(this.gotInput){this.gotInput=!1,this.targetNode||(this.inputSpeed<-15?null!=this.onHardRight&&this.onHardRight():this.inputSpeed>15&&null!=this.onHardLeft&&this.onHardLeft())}},e.prototype.onInputMove=function(t){if(this.gotInput){var e=this.dragActivatorThreshold*cc.view.getDevicePixelRatio();this.inputSpeed=t.getDeltaX(),Math.abs(this.inputSpeed)>e&&this.targetNode&&(this.isOffsetAhead=!1,this.hasBeenMovedByInput=!0,this.target=this.node.x,this.targetNode=null),this.targetNode||(this.target-=this.inputSpeed)}},e.prototype.onLoad=function(){var t=cc.view.getScaleX(),e=cc.view.getScaleY(),o=new cc.Size(cc.view.getViewportRect().size.width/t/this.camera.zoomRatio+Math.abs(this.node.x),cc.view.getViewportRect().size.height/e/this.camera.zoomRatio+Math.abs(this.node.y));this.node.setContentSize(o),this._isUserControllable&&this.suscribeInputEvents()},e.prototype.start=function(){this.nodePos=this.node.x},e.prototype.onDestroy=function(){this.isUserControllable=!1},e.prototype.lateUpdate=function(){if(null!=this.targetNode){var t=this.targetNode.parent.convertToWorldSpaceAR(this.targetNode.position);this.target=this.node.parent.convertToNodeSpaceAR(t).x,this._isOffsetAhead||this.alignTarget()}this.offsetCamera(),this.alignPositionInRange(),this.targetOld.pos=this.target,this.targetOld.node=this.targetNode},__decorate([a(cc.Node)],e.prototype,"min",void 0),__decorate([a(cc.Node)],e.prototype,"max",void 0),__decorate([a(cc.Node)],e.prototype,"bottom",void 0),__decorate([a({tooltip:"You can also set the min and max values of x here, where the x component is min and y component is max (To use this value, do not set the min and max properties)"})],e.prototype,"minMax",void 0),__decorate([a({type:cc.Node,visible:!0})],e.prototype,"_targetNode",void 0),__decorate([a({tooltip:"Maximum distance the camera is allowed to be from the target"})],e.prototype,"maxRange",void 0),__decorate([a({tooltip:"The lower the value, the greater it will zoom out"})],e.prototype,"minZoom",void 0),__decorate([a({tooltip:"Factor used to calculate the target zoom"})],e.prototype,"zoomFactor",void 0),__decorate([a({tooltip:"If the target speed is lower than this value, the zoom value will approach the default Zoom value"})],e.prototype,"minZoomTargetSpeed",void 0),__decorate([a({tooltip:"How fast the camera will catch its target"})],e.prototype,"catchSpeed",void 0),__decorate([a({tooltip:"How fast the zoom will catch its normalized target value. If the zoom is quadratic, this value is the top rate of change"})],e.prototype,"catchZoom",void 0),__decorate([a({tooltip:"Default zoom value. It will never zoom in more than the value defined here"})],e.prototype,"defaultZoom",void 0),__decorate([a({tooltip:"Motion type. If true, it will use a linear (constant) motion.  If false, it will use a quadratic motion (Slower when close to the target, fast when far)"})],e.prototype,"isLinear",void 0),__decorate([a({tooltip:"When true, the zoom rate of change will be constant. If false, it will be quadratic (Fast when close - slow when far)"})],e.prototype,"isZoomLinear",void 0),__decorate([a({tooltip:"Offset type. False will make the camera chase the target. True will position the camera ahead of the target"})],e.prototype,"_isOffsetAhead",void 0),__decorate([a({tooltip:"How many units the cursor has to move to be considered a drag command"})],e.prototype,"dragActivatorThreshold",void 0),e=__decorate([r,s(cc.Camera),c("Controllers/CameraController")],e)}(cc.Component);o.default=S,cc._RF.pop()},{"../../CrabWare/Utils/MathUtils":"MathUtils"}],CameraTest:[function(t,e,o){"use strict";cc._RF.push(e,"b8a038BT+VFEJ55oalMUgBY","CameraTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e}return __extends(e,t),e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this.move=1;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.move=2}},e.prototype.update=function(t){1==this.move?(this.camera.x+=600*t,this.move=0):2==this.move&&(this.camera.x-=600*t,this.move=0)},e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},__decorate([r(cc.Node)],e.prototype,"camera",void 0),e=__decorate([i,a("Test/CameraTest")],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],CloudAnimator:[function(t,e,o){"use strict";cc._RF.push(e,"18efcu2+w1JspEJLYfK8RYH","CloudAnimator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spawnYMinOffset=-100,e.spawnYMaxOffset=100,e.maxX=1e3,e.speed=100,e.startPosition=cc.Vec2.ZERO,e}return __extends(e,t),e.prototype.start=function(){this.startPosition=this.node.position},e.prototype.update=function(t){this.node.position=this.node.position.addSelf(new cc.Vec2(this.speed*t,0)),this.IsOutsideScreenRight()&&(this.node.position=this.GetNewSpawnPoint())},e.prototype.GetNewSpawnPoint=function(){var t,e=-cc.view.getVisibleSize().width/2,o=this.node.getContentSize().width/2;return t=n.randomIntFromInterval(this.startPosition.y+this.spawnYMinOffset,this.startPosition.y+this.spawnYMaxOffset),new cc.Vec2(e-o,t)},e.prototype.IsOutsideScreenRight=function(){var t=cc.view.getVisibleSize().width/2,e=this.node.getContentSize().width/2;return this.node.position.x>=t+e},__decorate([a],e.prototype,"spawnYMinOffset",void 0),__decorate([a],e.prototype,"spawnYMaxOffset",void 0),__decorate([a],e.prototype,"maxX",void 0),__decorate([a],e.prototype,"speed",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../CrabWare/Utils/MathUtils":"MathUtils"}],ComicController:[function(t,e,o){"use strict";cc._RF.push(e,"769b218aFxEv5z/eH/ZZmZS","ComicController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../CrabWare/Core/Maestro"),i=t("../../UIAudioClips"),r=t("../../MusicPlayer"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.comic=null,e.continueButton=null,e}return __extends(e,t),e.prototype.start=function(){var t=r.default.instance;t&&!t.isPlayingMenu&&t.playMenuMusic(),!1!==n.default.DefaultInstance.GetConcreteState().StateContainer.shouldDisplayComic?this.comic.play("comic_intro_in"):this.comic.play("comic_final_in"),this.comic.on("finished",this.onAnimationFinished,this)},e.prototype.goToLevelSelect=function(){this.continueButton.enabled=!1,!1!==n.default.DefaultInstance.GetConcreteState().StateContainer.shouldDisplayComic?this.comic.play("comic_intro_out"):this.comic.play("comic_final_out");var t=n.default.DefaultInstance.GetPersistentNode().getComponent(i.default);t&&t.playButtonClip()},e.prototype.onAnimationFinished=function(){if("comic_intro_out"===this.comic.currentClip.name||"comic_final_out"===this.comic.currentClip.name){var t=n.default.DefaultInstance.GetConcreteState();t.StateContainer.shouldDisplayComic=!1,t.Save(),n.default.DefaultInstance.SceneManager.ChangeScene("level_select")}},__decorate([c(cc.Animation)],e.prototype,"comic",void 0),__decorate([c(cc.Button)],e.prototype,"continueButton",void 0),e=__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../CrabWare/Core/Maestro":"Maestro","../../MusicPlayer":"MusicPlayer","../../UIAudioClips":"UIAudioClips"}],ConfirmPopupController:[function(t,e,o){"use strict";cc._RF.push(e,"27c15pLytdPSZ4Gxy+VTKlT","ConfirmPopupController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Components/PopupController"),i=t("../../CrabWare/LocalizationTextComponent"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodesToHideOnShow=[],e.popupAnimation=null,e.text=null,e.acceptButton=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"textKey",{get:function(){return this.text.key},set:function(t){this.text.key=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceptCallback",{get:function(){return this.acceptButton.clickEvents},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.popupAnimation.on("finished",this.onAnimationFinished,this)},e.prototype.show=function(){this.popupAnimation.play("tutorial_popup_in"),this.nodesToHideOnShow.forEach(function(t){t.active=!1}),t.prototype.show.call(this)},e.prototype.close=function(){this.popupAnimation.play("tutorial_popup_out"),this.nodesToHideOnShow.forEach(function(t){t.active=!0})},e.prototype.onAnimationFinished=function(){"tutorial_popup_out"===this.popupAnimation.currentClip.name&&t.prototype.close.call(this)},__decorate([s([cc.Node])],e.prototype,"nodesToHideOnShow",void 0),__decorate([s(cc.Animation)],e.prototype,"popupAnimation",void 0),__decorate([s(i.default)],e.prototype,"text",void 0),__decorate([s(cc.Button)],e.prototype,"acceptButton",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"../../CrabWare/Components/PopupController":"PopupController","../../CrabWare/LocalizationTextComponent":"LocalizationTextComponent"}],CrabWareSettings:[function(t,e,o){"use strict";cc._RF.push(e,"4b559VKiupNrZ6pf2W88bro","CrabWareSettings"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Singleton"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.menu,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneRootNode=null,e}var o;return __extends(e,t),o=e,e.prototype.GetSceneRootNode=function(){if(this.sceneRootNode){var t=cc.find(o.DEFAULT_ROOT_NODE_NAME);if(t)return this.sceneRootNode=t,this.sceneRootNode;var e=new cc.Node(o.DEFAULT_ROOT_NODE_NAME);return cc.director.getScene().addChild(e),this.sceneRootNode=e,this.sceneRootNode}return this.sceneRootNode},e.DEFAULT_ROOT_NODE_NAME="[ROOT_NODE]",e.DEFAULT_CONTROLLER_NODE_NAME="[Controller]",__decorate([a(cc.Node)],e.prototype,"sceneRootNode",void 0),e=o=__decorate([r,s("CrabWare/Core/CrabWareSettings")],e)}(n.default);o.default=c,cc._RF.pop()},{"./Singleton":"Singleton"}],DefaultAnimStateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"fd9f2RhdpVClY5wAoyqWYPO","DefaultAnimStateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseStateMachine"),i=t("./State"),r=cc._decorator,a=r.ccclass,s=r.property,c=r.menu,l=function(){function t(){this.inName="",this.inComponent=null,this.loopName="",this.loopComponent=null,this.outName="",this.outComponent=null}return __decorate([s(cc.String)],t.prototype,"inName",void 0),__decorate([s(cc.Animation)],t.prototype,"inComponent",void 0),__decorate([s(cc.String)],t.prototype,"loopName",void 0),__decorate([s(cc.Animation)],t.prototype,"loopComponent",void 0),__decorate([s(cc.String)],t.prototype,"outName",void 0),__decorate([s(cc.Animation)],t.prototype,"outComponent",void 0),t=__decorate([a("Animations")],t)}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animations=new l,e}return __extends(e,t),e.prototype.start=function(){var t=new cc.Component.EventHandler;t.target=this.animations.inComponent.node,t.component="cc.Animation",t.handler="play",t.customEventData=this.animations.inName;var e=new cc.Component.EventHandler;e.target=this.animations.loopComponent.node,e.component="cc.Animation",e.handler="play",e.customEventData=this.animations.loopName;var o=new cc.Component.EventHandler;o.target=this.animations.outComponent.node,o.component="cc.Animation",o.handler="play",o.customEventData=this.animations.outName;var n=new i.default("in",[t]),r=new i.default("loop",[e]),a=new i.default("out",[o]);this.states=[n,r,a],this.transitions=[{fromState:n,toState:r,action:"to loop"},{fromState:r,toState:a,action:"to out"}],this.setState("in")},__decorate([s({type:l})],e.prototype,"animations",void 0),e=__decorate([a,c("CrabWare/Components/FSM//DefaultAnimationStateMachine")],e)}(n.default);o.default=u,cc._RF.pop()},{"./BaseStateMachine":"BaseStateMachine","./State":"State"}],DefaultAnimationFSM:[function(t,e,o){"use strict";cc._RF.push(e,"e8a0eyY8yNNrK7jgW4agTBi","DefaultAnimationFSM"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/FSM/FiniteStateMachine"),i=t("../../CrabWare/Core/Maestro"),r=cc._decorator,a=r.ccclass,s=r.menu,c=r.property;o.DEFAULT_ENTER_LOOP_ACTION="EnterLoop",o.DEFAULT_KEEP_LOOP_ACTION="KeepLoop",o.DEFAULT_EXIT_LOOP_ACTION="ExitLoop";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.InStateID="In",e.OutStateID="Out",e.LoopStateID="Loop",e.animNames="",e.DEFAULT_IN_PREFIX="IN_",e.DEFAULT_OUT_PREFIX="OUT_",e.DEFAULT_LOOP_PREFIX="LOOP_",e.fsm=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this,e=[this.InStateID,this.LoopStateID,this.OutStateID];this.fsm=new n.FiniteStateMachine(e,this.InStateID,n.eWrapStyle.Loop),this.fsm.AddTransitionToState(this.InStateID,o.DEFAULT_ENTER_LOOP_ACTION,this.LoopStateID),this.fsm.AddTransitionToState(this.LoopStateID,o.DEFAULT_KEEP_LOOP_ACTION,this.LoopStateID),this.fsm.AddTransitionToState(this.LoopStateID,o.DEFAULT_EXIT_LOOP_ACTION,this.OutStateID),this.fsm.AddTransitionToState(this.OutStateID,n.DEFAULT_EXIT_ACTION,n.DEFAULT_END_STATE_NAME),this.fsm.StateEnter.subscribe(function(e){return t.StateEnter(e)}),this.getComponent(cc.Animation).on("finished",function(e){return t.AnimationFinished(e)})},e.prototype.AnimationFinished=function(){i.default.log("animation finished : "+this.fsm.CurrentStateID),"Out"==this.fsm.CurrentStateID?this.fsm.IssueCommand(n.DEFAULT_EXIT_ACTION):"In"==this.fsm.CurrentStateID&&this.fsm.IssueCommand(o.DEFAULT_ENTER_LOOP_ACTION)},e.prototype.StateEnter=function(t){switch(i.default.log("StateEnter"),t){case"In":this.getComponent(cc.Animation).play(this.DEFAULT_IN_PREFIX+this.animNames);break;case"Loop":this.getComponent(cc.Animation).play(this.DEFAULT_LOOP_PREFIX+this.animNames);break;case"Out":this.getComponent(cc.Animation).play(this.DEFAULT_OUT_PREFIX+this.animNames)}},e.prototype.IssueFSMCommand=function(t){this.fsm.IssueCommand(t)},e.prototype.BeginFSM=function(){this.fsm.Begin()},e.prototype.PrintFSM=function(){i.default.log(this.fsm.toString())},__decorate([c(cc.String)],e.prototype,"InStateID",void 0),__decorate([c(cc.String)],e.prototype,"OutStateID",void 0),__decorate([c(cc.String)],e.prototype,"LoopStateID",void 0),__decorate([c(cc.String)],e.prototype,"animNames",void 0),__decorate([c(cc.String)],e.prototype,"DEFAULT_IN_PREFIX",void 0),__decorate([c(cc.String)],e.prototype,"DEFAULT_OUT_PREFIX",void 0),__decorate([c(cc.String)],e.prototype,"DEFAULT_LOOP_PREFIX",void 0),e=__decorate([a,s("GrizzyBirds/Animation/DefaultFSM")],e)}(cc.Component);o.DefaultAnimationFSM=l,cc._RF.pop()},{"../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/FSM/FiniteStateMachine":"FiniteStateMachine"}],DontDestroyOnLoad:[function(t,e,o){"use strict";cc._RF.push(e,"528ceq9nSZD5aXgpcbb3286","DontDestroyOnLoad"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){cc.log("Persisting node: "+this.node.name),cc.game.addPersistRootNode(this.node),cc.log("Node persisted")},e=__decorate([i,r("CrabWare/Utils/DontDestroyOnLoad")],e)}(cc.Component);o.DontDestroyOnLoad=a,cc._RF.pop()},{}],DrawDebug:[function(t,e,o){"use strict";cc._RF.push(e,"ce115R3/8JKaIfwe+k0zyIe","DrawDebug"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.requireComponent,a=n.menu,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return __extends(e,t),o=e,e.GetInstance=function(){return this.instance?this.instance:(this.instance=new o,this.instance)},e=o=__decorate([i,r(cc.Graphics),a("CrabWare/Utils/DrawDebug")],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],EventChainTest:[function(t,e,o){"use strict";cc._RF.push(e,"766c9+Ucf1D5Ir4ArclVDSr","EventChainTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e.times=0,e}return __extends(e,t),e.prototype.runSequence=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.events.forEach(function(t){return t.emit([])}),console.log(this.events),[2]})})},e.prototype.ev=function(){console.log("Run: "+ ++this.times)},__decorate([r([cc.Component.EventHandler])],e.prototype,"events",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],EventTester:[function(t,e,o){"use strict";cc._RF.push(e,"4b9c5QXPRZBeZlZ5owSuR25","EventTester"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.doA=function(){console.log("I'm doing A")},e.prototype.doB=function(){console.log("I'm doing B")},e.prototype.doC=function(){console.log("I'm doing C")},e.prototype.doD=function(){console.log("I'm doing D")},e.prototype.doE=function(){console.log("I'm doing E")},e.prototype.doF=function(){console.log("I'm doing F")},e.prototype.doG=function(){console.log("I'm doing G")},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],ExposedLocalizationBindText:[function(t,e,o){"use strict";cc._RF.push(e,"108f8JhxbJFi5ScJgopiJPc","ExposedLocalizationBindText"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationBindText"),i=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"textComponent",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._text.string},set:function(t){this.textCache=t,this.replaceValues()},enumerable:!0,configurable:!0}),e=__decorate([i("ExposedLocalizationBindText")],e)}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationBindText":"LocalizationBindText"}],ExposedLocalizationImage:[function(t,e,o){"use strict";cc._RF.push(e,"81cf5YwqmhHGpkIzPYmKgfp","ExposedLocalizationImage"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationImage"),i=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"spriteComponent",{get:function(){return this.sprite},set:function(t){this.sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.sprite.spriteFrame},set:function(t){this.sprite.spriteFrame=t},enumerable:!0,configurable:!0}),e=__decorate([i("ExposedLocalizationImage")],e)}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationImage":"LocalizationImage"}],ExposedLocalizationText:[function(t,e,o){"use strict";cc._RF.push(e,"f30b5rn2HZOTrSUHlkokDQi","ExposedLocalizationText"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationText"),i=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"textComponent",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._text.string},set:function(t){this._text.string=t},enumerable:!0,configurable:!0}),e=__decorate([i("ExposedLocalizationText")],e)}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationText":"LocalizationText"}],FSMState:[function(t,e,o){"use strict";cc._RF.push(e,"3da2eNp//JLbJd3cN+1aB0b","FSMState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("typescript-collections"),i=t("./FSMTransition"),r=function(){function t(){this.StateID="",this.transitions=new n.LinkedList}return Object.defineProperty(t.prototype,"Transitions",{get:function(){return null==this.transitions&&(this.transitions=new n.LinkedList),this.transitions},enumerable:!0,configurable:!0}),t.prototype.HasTransitionAction=function(t){var e=!1;return this.transitions.forEach(function(o){o.Action==t&&(e=!0)}),e},t.prototype.AddTransition=function(t,e){if(!this.HasTransitionAction(t)){var o=new i.StateTransition;o.Action=t,o.TargetStateID=e,this.transitions.add(o)}},t.prototype.GetTransitionByAction=function(t){var e=new i.StateTransition;return this.HasTransitionAction(t)&&this.transitions.forEach(function(o){o.Action==t&&(e=o)}),e},t.prototype.toString=function(){var t="State : "+this.StateID+";\t Transitions : "+this.Transitions.size()+";\n";return this.Transitions.forEach(function(e){t+=e.toString()+"\n"}),t},t}();o.State=r,cc._RF.pop()},{"./FSMTransition":"FSMTransition","typescript-collections":28}],FSMTransition:[function(t,e,o){"use strict";cc._RF.push(e,"48e27cAFPREq581snvui0GK","FSMTransition"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.TargetStateID="null",this.Action="null"}return t.prototype.toString=function(){return"Action : "+this.Action+";\t TargetState : "+this.TargetStateID+";"},t}();o.StateTransition=n,cc._RF.pop()},{}],FiniteStateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"c1310A1LTpLLoZG3h5jIUOj","FiniteStateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=t("typescript-collections"),r=t("strongly-typed-events"),a=t("./FSMState");o.DEFAULT_START_STATE_NAME="<START>",o.DEFAULT_END_STATE_NAME="<END>",o.DEFAULT_ANY_STATE_NAME="<ANY>",o.DEFAULT_ENTER_ACTION="[ENTER!]",o.DEFAULT_EXIT_ACTION="[EXIT!]",o.DEFAULT_WRAP_ACTION="[WRAP!]",function(t){t[t.none=0]="none",t[t.OneShot=1]="OneShot",t[t.Loop=2]="Loop"}(n=o.eWrapStyle||(o.eWrapStyle={}));var s=n.OneShot,c=function(){return function(t,e){this.FromState="null",this.ToState="null",this.FromState=t,this.ToState=e}}();o.StateChangeEventArgs=c;var l=function(){function t(t,e,o){this.wrapStyle=s,this.isActive=!1,this.stateEnter=new r.SimpleEventDispatcher,this.stateLeave=new r.SimpleEventDispatcher,this.stateChanging=new r.SimpleEventDispatcher,this.stateChanged=new r.SimpleEventDispatcher,this.currentStateID="null",this.states=new i.LinkedList,this.defaultStateID=e,this.wrapStyle=o,this.Initalize(t)}return Object.defineProperty(t.prototype,"DefaultState",{get:function(){return this.defaultStateID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WrapStyle",{get:function(){return this.wrapStyle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsActive",{get:function(){return this.isActive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateEnter",{get:function(){return this.stateEnter.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateLeave",{get:function(){return this.stateLeave.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateChanging",{get:function(){return this.stateChanging.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StateChanged",{get:function(){return this.stateChanged.asEvent()},enumerable:!0,configurable:!0}),t.prototype.OnStateEnter=function(t){this.stateEnter.dispatch(t)},t.prototype.OnStateLeave=function(t){this.stateLeave.dispatch(t)},t.prototype.OnStateChanging=function(t){this.stateChanging.dispatch(t)},t.prototype.OnStateChanged=function(t){this.stateChanged.dispatch(t)},Object.defineProperty(t.prototype,"States",{get:function(){return null==this.states&&(this.states=new i.LinkedList),this.states},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentState",{get:function(){return this.currentState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentStateID",{get:function(){return this.currentStateID},enumerable:!0,configurable:!0}),t.prototype.SetStatesFromArray=function(t){var e=this;t.forEach(function(t){e.AddState(t)})},t.prototype.Initalize=function(t){var e=this;this.AddState(o.DEFAULT_START_STATE_NAME),this.AddState(o.DEFAULT_END_STATE_NAME),this.AddState(o.DEFAULT_ANY_STATE_NAME),this.SetStatesFromArray(t),this.AddTransitionToState(o.DEFAULT_START_STATE_NAME,o.DEFAULT_ENTER_ACTION,this.defaultStateID),this.AddTransitionToState(o.DEFAULT_END_STATE_NAME,o.DEFAULT_WRAP_ACTION,o.DEFAULT_START_STATE_NAME),this.changeState(o.DEFAULT_START_STATE_NAME),this.StateEnter.subscribe(function(t){return e._stateEnter(t)})},t.prototype.Activate=function(){this.isActive=!0},t.prototype.Deactivate=function(){this.isActive=!1},t.prototype.ToggleActive=function(){this.isActive=!this.IsActive},t.prototype._stateEnter=function(t){this.IsActive&&(t==o.DEFAULT_START_STATE_NAME?this.IssueCommand(o.DEFAULT_ENTER_ACTION):t==o.DEFAULT_END_STATE_NAME&&this.WrapStyle==n.Loop&&this.IssueCommand(o.DEFAULT_WRAP_ACTION))},t.prototype.changeState=function(t){var e=this.CurrentStateID;this.HasState(t)&&(this.OnStateChanging(new c(e,t)),this.OnStateLeave(e),this.currentState=this.GetState(t),this.currentStateID=t,this.OnStateEnter(t),this.OnStateChanged(new c(e,t)))},t.prototype.GetState=function(t){var e=null;return this.HasState(t)&&this.states.forEach(function(o){o.StateID==t&&(e=o)}),e},t.prototype.HasState=function(t){var e=!1;return this.states.forEach(function(o){o.StateID==t&&(e=!0)}),e},t.prototype.AddState=function(t){if(!this.HasState(t)){var e=new a.State;e.StateID=t,this.states.add(e)}},t.prototype.AddTransitionToState=function(t,e,o){this.HasState(t)&&(this.GetState(t).HasTransitionAction(e)||this.GetState(t).AddTransition(e,o))},t.prototype.Begin=function(){this.Activate(),this.IssueCommand(o.DEFAULT_ENTER_ACTION)},t.prototype.BeginForce=function(t){return!!this.HasState(t)&&(this.Activate(),this.changeState(t),!0)},t.prototype.GetAvailableCommands=function(){var t=new i.LinkedList;return this.currentState.Transitions.forEach(function(e){t.add(e.Action)}),t},t.prototype.IsCommandValid=function(t){var e=this.GetAvailableCommands();return!(e.isEmpty()||!e.contains(t))},t.prototype.IssueCommand=function(t){if(this.IsActive){if(this.IsCommandValid(t)){var e=this.currentState.GetTransitionByAction(t).TargetStateID;return this.changeState(e),!0}return!1}return!1},t.prototype.toString=function(){var t="CurrentState: "+this.currentStateID+";\t States : "+this.states.size()+";\n";return this.States.forEach(function(e){t+=e.toString()+"\n"}),t},t}();o.FiniteStateMachine=l,cc._RF.pop()},{"./FSMState":"FSMState","strongly-typed-events":12,"typescript-collections":28}],GameEngineSettings:[function(t,e,o){"use strict";cc._RF.push(e,"34dc2+M1FBF542ecuR8/+1v","GameEngineSettings"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,s=new cc.Vec2(0,-320),c=0,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UsePhysics=!1,e.gravity=s,e.drawBits=c,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.UsePhysics){var t=cc.director.getPhysicsManager();t.enabled=!0,t.enabledAccumulator=!0,t.gravity=this.gravity,t.debugDrawFlags=this.drawBits}},__decorate([r],e.prototype,"UsePhysics",void 0),__decorate([r(cc.Vec2)],e.prototype,"gravity",void 0),__decorate([r],e.prototype,"drawBits",void 0),e=__decorate([i,a("CrabWare/Core/GameEngineSettings")],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameOverController:[function(t,e,o){"use strict";cc._RF.push(e,"0f40956s0tCCapC94wBbap4","GameOverController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../CrabWare/Core/BaseSceneController"),i=t("../../../../CrabWare/Core/Maestro"),r=t("../../../../CrabWare/Utils/GrizzyBirdsState"),a=t("../../../UIAudioClips"),s=t("../../../MusicPlayer"),c=t("../../../../CrabWare/LocalizationBindTextComponent"),l=cc._decorator,u=l.ccclass,p=l.property,d=1,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animationTarget=null,e.targetScene=null,e.firstStar=null,e.secondStar=null,e.thirdStar=null,e.levelLabel=null,e.scoreLabel=null,e.scoreIncrementTime=d,e.completed=!1,e.sceneGreetSound=null,e.firstStarSound=null,e.secondStarSound=null,e.thirdStarSound=null,e.introSnore=null,e.loopSnore=null,e.snoreLoopId=null,e}return __extends(e,t),e.prototype.SceneExit=function(){i.default.log("exit on gameover"),this.snoreLoopId&&cc.audioEngine.stopEffect(this.snoreLoopId)},e.prototype.SceneEnter=function(){var t=s.default.instance;t&&!t.isPlayingGameplay&&t.playGameplayMusic(),i.default.log("enter on gameover"),this.sceneGreetSound&&cc.audioEngine.playEffect(this.sceneGreetSound,!1)},e.prototype.start=function(){var t=this,e=this.animationTarget.getComponent(cc.Animation);if(e.on(cc.Animation.EventType.FINISHED,this.animationCompleted,this),e.play("go_in"),this.completed){var o=i.default.DefaultInstance.GetConcreteState();this.levelLabel.value=o.StateContainer.currentLevel;var n=o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score/this.scoreIncrementTime,a=o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score,s=0,c=function(){var e=n*cc.director.getDeltaTime();(s+=e)>a&&(s=a,t.unschedule(c)),t.scoreLabel.string=""+~~s};this.schedule(c,0,cc.macro.REPEAT_FOREVER,0);var l=o.getScoreRatio(o.StateContainer.currentLevel),u=l.firstStarRatio*o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).MaxScore,p=l.secondStarRatio*o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).MaxScore,d=l.thirdStarRatio*o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).MaxScore;i.default.log("Score: "+o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score+" - First star: "+u+" ("+100*l.firstStarRatio+"%) - Second star: "+p+" ("+100*l.secondStarRatio+"%) - Third star: "+d+" ("+100*l.thirdStarRatio+"%)"),this.firstStar.active=!1,this.secondStar.active=!1,this.thirdStar.active=!1;var h=0;o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score>=u&&(h++,this.scheduleOnce(function(){t.firstStarSound&&cc.audioEngine.playEffect(t.firstStarSound,!1),t.firstStar.active=!0},.25),o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score>=p&&(h++,this.scheduleOnce(function(){t.secondStarSound&&cc.audioEngine.playEffect(t.secondStarSound,!1),t.secondStar.active=!0},1.125),o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Score>=d&&(h++,this.scheduleOnce(function(){t.thirdStarSound&&cc.audioEngine.playEffect(t.thirdStarSound,!1),t.thirdStar.active=!0},2)))),o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Stars<h&&(o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Stars=h,o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).NeedsStarsUpdate=!0),o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel).Stars>0&&o.StateContainer.currentLevel<r.DEFAULT_MAX_LEVELS&&o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel+1).IsLocked&&(o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel+1).IsLocked=!1,o.StateContainer.LevelsData.getValue(o.StateContainer.currentLevel+1).IsFreshlyUnlocked=!0),o.Save()}else{var f=cc.audioEngine.playEffect(this.introSnore,!1),m=cc.audioEngine.getDuration(f);this.scheduleOnce(function(){t.snoreLoopId=cc.audioEngine.playEffect(t.loopSnore,!0)},m)}},e.prototype.animationCompleted=function(t,e){if(t===cc.Animation.EventType.FINISHED)switch(e.clip.name){case"go_in":break;case"go_out":i.default.DefaultInstance.SceneManager.ChangeScene(this.targetScene)}},e.prototype.gotoScene=function(t){this.targetScene=t,this.animationTarget.getComponent(cc.Animation).play("go_out"),i.default.DefaultInstance.SceneManager.ChangeScene(this.targetScene)},e.prototype.restartLevel=function(){this.playButtonSound(),i.default.DefaultInstance.SceneManager.ChangeScene("gameplay")},e.prototype.gotoLevelSelect=function(){this.playButtonSound();var t=i.default.DefaultInstance.GetConcreteState();t.StateContainer.AllLevelHasStars()&&!t.StateContainer.confettiAppeared?this.gotoScene("comic"):this.gotoScene("level_select")},e.prototype.goToNextLevel=function(){if(this.playButtonSound(),i.default.DefaultInstance.GetConcreteState().StateContainer.currentLevel==r.DEFAULT_MAX_LEVELS){var t=i.default.DefaultInstance.GetConcreteState();t.StateContainer.AllLevelHasStars()&&!t.StateContainer.confettiAppeared?this.gotoScene("comic"):this.gotoScene("level_select")}else i.default.DefaultInstance.GetConcreteState().StateContainer.currentLevel++,i.default.DefaultInstance.SceneManager.ChangeScene("gameplay")},e.prototype.playButtonSound=function(){var t=i.default.DefaultInstance.GetPersistentNode().getComponent(a.default);t&&t.playButtonClip()},__decorate([p(cc.Node)],e.prototype,"animationTarget",void 0),__decorate([p(cc.Node)],e.prototype,"firstStar",void 0),__decorate([p(cc.Node)],e.prototype,"secondStar",void 0),__decorate([p(cc.Node)],e.prototype,"thirdStar",void 0),__decorate([p(c.default)],e.prototype,"levelLabel",void 0),__decorate([p(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([p({tooltip:"Time in seconds"})],e.prototype,"scoreIncrementTime",void 0),__decorate([p],e.prototype,"completed",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"sceneGreetSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"firstStarSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"secondStarSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"thirdStarSound",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"introSnore",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"loopSnore",void 0),e=__decorate([u],e)}(n.default);o.default=h,cc._RF.pop()},{"../../../../CrabWare/Core/BaseSceneController":"BaseSceneController","../../../../CrabWare/Core/Maestro":"Maestro","../../../../CrabWare/LocalizationBindTextComponent":"LocalizationBindTextComponent","../../../../CrabWare/Utils/GrizzyBirdsState":"GrizzyBirdsState","../../../MusicPlayer":"MusicPlayer","../../../UIAudioClips":"UIAudioClips"}],GameState:[function(t,e,o){"use strict";cc._RF.push(e,"0315dZ2BZFHQ5zuSIKZ0KUp","GameState"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.LoadOrCreate=function(){null==cc.sys.localStorage.getItem(this.GetPersistentKey("saveVersion"))?(this.ResetState(),this.Save()):this.Load()},e.prototype.GetPersistentKey=function(t){return this.GetPrefix()+"-"+this.GetVersion()+"-"+t},e=__decorate([i,r("CrabWare/Core/GameState")],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameplayController:[function(t,e,o){"use strict";cc._RF.push(e,"a5629Z6+p1NK5Xkdp6PAbf0","GameplayController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../CrabWare/Core/BaseSceneController"),i=t("../../../../CrabWare/Core/Maestro"),r=t("../../../../CrabWare/Components/StateMachine"),a=t("../../../Components/StructureUnit"),s=t("../../../../CrabWare/Utils/MathUtils"),c=t("ste-signals"),l=t("../../LemmingsLauncherController"),u=t("../../CameraController"),p=t("../../../../CrabWare/Components/PhysicsProjectile"),d=t("../../PausePopupController"),h=t("../../../Components/SingleLemmingProjectile"),f=t("../../../../CrabWare/AudioClipCollection"),m=t("../../../UIAudioClips"),y=t("../../../MusicPlayer"),g=cc._decorator,_=g.ccclass,v=g.property,C=1,S=1,b=0,E=0,A=0,T=1.5,P=1,M=0,I=200,L=1,O=.1;var D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lemmingLaunched=new c.SignalDispatcher,e.lemmingHit=new c.SignalDispatcher,e.lemmingDestroyed=new c.SignalDispatcher,e.fsm=null,e.GrizzyReaction=null,e.GrizzyReactionAnimParent=null,e.obtainedScoreLabelPrefab=null,e.defaultScoreFont=null,e.noiseScoreFont=null,e.pickupScoreFont=null,e.lemmingScoreFont=null,e.onScoreChanged=null,e.canvasNode=null,e.uiRootNode=null,e.scoreIncrementTime=C,e.grizzyWaitHideTime=S,e.goToSlingshot=null,e.endGameWaitTime=L,e.endGameScoreDeltaTime=L,e.movementBaseSpdCheck=O,e.movementAccSpdDelta=O,e.outLemmingsParent=null,e.minLemmingDestroyDelta=P,e.grizzyWaitTimeBeforeAppearing=T,e.cameraReturnWaitTime=M,e.groundMass=I,e.projectedTrajectoryDotPrefab=null,e.levelStartClips=new f.default,e.grizzyAwakeningClip=null,e.grizzySleepingClip=null,e.grizzyScaredClip=null,e.grizzyLevelFailedClip=null,e.obtainedScoreLabelsPool=new cc.NodePool,e._score=b,e.scoreUpdateFn=null,e.sligshotButtonShouldBeVisible=!0,e.grizzyShouldAppear=!1,e.grizzyScaredAppeared=!1,e.grizzyAnimSwitchCount=E,e.playGrizzyAwakeFlag=A,e.boostersQueue=[],e.cameraController=null,e.structure=null,e.cameraMaxBounds=null,e.physicsBounds=null,e.isMoveCheckActive=!1,e.hasGameStarted=!1,e.pausePopupController=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"LemmingLaunched",{get:function(){return this.lemmingLaunched.asEvent()},enumerable:!0,configurable:!0}),e.prototype.OnLemmingLaunched=function(){++this.lemmingActiveCount,this.lemmingLaunched.dispatch()},Object.defineProperty(e.prototype,"LemmingHit",{get:function(){return this.lemmingHit.asEvent()},enumerable:!0,configurable:!0}),e.prototype.OnLemmingHit=function(){this.lemmingHit.dispatch()},Object.defineProperty(e.prototype,"LemmingDestroyed",{get:function(){return this.lemmingDestroyed.asEvent()},enumerable:!0,configurable:!0}),e.prototype.OnLemmingDestroyed=function(t){var e=this;if(--this.lemmingActiveCount,this.lemmingDestroyed.dispatch(),t){var o=this.outLemmingsParent.children[this.outLemmingsParent.childrenCount-1];o.setSiblingIndex(0),o.position=o.parent.convertToNodeSpaceAR(t),o.active=!0,o.getComponent(cc.Animation).play()}if(s.isZero(this.lemmingActiveCount)){if(!s.isZero(this.slingshot.LaunchTries))if(this.slingshot.isNextLemmingBoosted){this.onCameraHardLeft();this.scheduleOnce(function(){e.slingshot.reload()},1)}else this.slingshot.reload();if(!this.isMoveCheckActive){var n=this.slingshot.LaunchTries;this.scheduleOnce(function(){e.grizzyShouldAppear?e.displayGrizzy():e.displaySleepingGrizzy(n),e.grizzyShouldAppear=!1},this.grizzyWaitTimeBeforeAppearing)}}},e.prototype.onLoad=function(){this.clockCounter=0},Object.defineProperty(e.prototype,"clocksLeft",{get:function(){return this.clockCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slingshot",{get:function(){return this._slingshot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lemmingExitWaitTimeRemaining",{get:function(){var t=i.default.DefaultInstance.inGameElapsed/1e3,e=this.minLemmingDestroyDelta-(t-this.lastLemmingDestroyedTimestamp);return s.isNegative(e)?0:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){var e=this,o=this._score;if(this._score=t,null!=this.scoreUpdateFn)this.baseScoreIncrement=this.visualScore,this.realScoreIncrementTime=this.scoreIncrementTime-this.elapsedTime,s.isNegative(this.realScoreIncrementTime)&&(this.realScoreIncrementTime=0);else if(null!=this.onScoreChanged){this.visualScore=o,this.baseScoreIncrement=this.visualScore,this.elapsedTime=0,this.realScoreIncrementTime=this.scoreIncrementTime,this.scoreUpdateFn=function(){var t=(e._score-e.baseScoreIncrement)/(cc.game.getFrameRate()*e.realScoreIncrementTime);e.visualScore+=t,e.visualScore>=e._score&&(e.visualScore=e._score,e.unschedule(e.scoreUpdateFn),e.scoreUpdateFn=null),e.elapsedTime+=cc.director.getDeltaTime(),e.onScoreChanged.emit([~~e.visualScore])},this.schedule(this.scoreUpdateFn,0,cc.macro.REPEAT_FOREVER,0)}},enumerable:!0,configurable:!0}),e.prototype.addBooster=function(t){this.slingshot.boostNextLemming(),this.boostersQueue.push(t)},e.prototype.removeBooster=function(){return this.boostersQueue.shift()},e.prototype.getCurrentBooster=function(){return this.boostersQueue[0]},e.prototype.resetLastLemmmingDestroyedTimestamp=function(){this.lastLemmingDestroyedTimestamp=i.default.DefaultInstance.inGameElapsed/1e3},e.prototype.PlayReaction=function(t){null!=this.GrizzyReaction&&null!=this.GrizzyReactionAnimParent&&(++this.grizzyAnimSwitchCount,this.GrizzyReactionAnimParent.node.active=!0,this.GrizzyReactionAnimParent.play("reaction_in"),this.GrizzyReaction.setAnimation(1,t,!0))},e.prototype.hideReaction=function(){null!=this.GrizzyReaction&&null!=this.GrizzyReactionAnimParent&&this.GrizzyReactionAnimParent.play("reaction_out")},e.prototype.winGame=function(){i.default.DefaultInstance.SceneManager.GoToWin()},e.prototype.loseGame=function(){i.default.DefaultInstance.SceneManager.GoToLose()},e.prototype.SceneEnter=function(){var t=y.default.instance;t&&!t.isPlayingGameplay&&t.playGameplayMusic(),i.default.log("enter on gameplay");var e=i.default.DefaultInstance.GetConcreteState();e.StateContainer.LevelsData.getValue(e.StateContainer.currentLevel).MaxScore=0,a.default.init(),cc.director.getScene().getComponentsInChildren(cc.RigidBody).forEach(function(t){t.linearDamping=10,t.scheduleOnce(function(){t.linearDamping=0},3),t.syncPosition(!1),t.syncRotation(!1)})},e.prototype.SceneExit=function(){i.default.log("exit on gameplay");var t=i.default.DefaultInstance.GetConcreteState();t.StateContainer.LevelsData.getValue(t.StateContainer.currentLevel).Score=this.score},e.prototype.pauseGame=function(){this.playButtonSound(),cc.director.isPaused()?(cc.director.resume(),this.enableInputSlingshot(),this.pausePopupController.endPauseUpdate(),this.uiRootNode.active=!0):(cc.director.pause(),this.disableInputSlingshot(),this.pausePopupController.startPauseUpdate(),this.uiRootNode.active=!1)},e.prototype.changeState=function(t){null!=this.fsm&&this.fsm.changeState(t)},e.prototype.createClock=function(){this.clockCounter++},e.prototype.destroyClock=function(){this.clockCounter--,s.isZero(this.clockCounter)&&(this.playGrizzyAwakeFlag=1,this._slingshot.shouldBeEnabled=!1,s.isZero(this.grizzyAnimSwitchCount)?this.displayGrizzy():null!=this.GrizzyReaction&&null!=this.GrizzyReactionAnimParent&&(++this.grizzyAnimSwitchCount,this.GrizzyReaction.setAnimation(1,"loop_3",!0),this.scheduleHideGrizzy(),this.grizzyScaredClip&&cc.audioEngine.playEffect(this.grizzyScaredClip,!1)),this.grizzyScaredAppeared=!0),this.grizzyShouldAppear=!0},e.prototype.showObtainedScoreLabel=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=cc.Vec2.ZERO);var i=this.obtainedScoreLabelsPool.get();i||(i=this.createNewObtainedScoreLabel()),this.canvasNode.addChild(i);i.setSiblingIndex(this.uiRootNode.getSiblingIndex()-1);var r=t.parent.convertToWorldSpaceAR(t.position),a=this.canvasNode.convertToNodeSpaceAR(r);n.equals(cc.Vec2.ZERO)?i.position=a:i.position=a.add(n,i.position);var s=i.getComponentInChildren(cc.Label);s&&(s.string=""+~~e,o&&this[o+"ScoreFont"]?s.font=this[o+"ScoreFont"]:s.font=this.defaultScoreFont);var c=i.getComponent(cc.Animation);c&&c.play()},e.prototype.createNewObtainedScoreLabel=function(){var t=this,e=cc.instantiate(this.obtainedScoreLabelPrefab),o=e.getComponent(cc.Animation);return o&&o.on("finished",function(){t.obtainedScoreLabelsPool.put(e)}),e},e.prototype.doEndGameScoreAnimation=function(){for(var t=this,e=this.slingshot.getLemmingQueueNodes(),o=function(o){var i=e[o],r=new cc.Vec2(0,42);n.scheduleOnce(function(){t.showObtainedScoreLabel(i,t.slingshot.lemmingBonusScore,"lemming",r)},(1+o)*n.endGameScoreDeltaTime)},n=this,i=0;i<e.length;++i)o(i);this.scheduleOnce(function(){t.winGame()},e.length*this.endGameScoreDeltaTime+this.endGameWaitTime+1)},e.prototype.displayGrizzy=function(){this.grizzyScaredAppeared||(s.isZero(this.clockCounter)?(this.PlayReaction("loop_3"),this.grizzyScaredClip&&cc.audioEngine.playEffect(this.grizzyScaredClip,!1)):(this.PlayReaction("loop_2"),this.grizzyAwakeningClip&&cc.audioEngine.playEffect(this.grizzyAwakeningClip,!1)))},e.prototype.displaySleepingGrizzy=function(t){var e;this.PlayReaction("loop_1"),(e=s.isZero(t)?this.grizzyLevelFailedClip:this.grizzySleepingClip)&&cc.audioEngine.playEffect(e,!1)},e.prototype.scheduleHideGrizzy=function(){var t=this;this.scheduleOnce(function(){--t.grizzyAnimSwitchCount,s.isZero(t.grizzyAnimSwitchCount)&&t.hideReaction()},this.grizzyWaitHideTime)},e.prototype.ReactionAnimationFinished=function(){var t=this;"reaction_in"==this.GrizzyReactionAnimParent.currentClip.name?this.scheduleHideGrizzy():"reaction_out"==this.GrizzyReactionAnimParent.currentClip.name&&(this.sligshotButtonShouldBeVisible=!0,1===this.playGrizzyAwakeFlag?this.scheduleOnce(function(){t.cameraController.targetNode=t._slingshot.node,t.setFreeCameraSetUp(),t.cameraController.isUserControllable=!1,t.doEndGameScoreAnimation(),s.isZero(t._slingshot.LaunchTries)||(t.scoreIncrementTime=t.endGameScoreDeltaTime*t._slingshot.LaunchTries,t.scheduleOnce(function(){t._slingshot.calculateBonusScore()},t.endGameScoreDeltaTime))},this.cameraReturnWaitTime):s.isZero(this.slingshot.LaunchTries)&&s.isZero(this.lemmingActiveCount)?this.scheduleOnce(function(){t.cameraController.targetNode=t._slingshot.node,t.setFreeCameraSetUp(),t.cameraController.isUserControllable=!1,t.scheduleOnce(t.loseGame,t.scoreIncrementTime+t.endGameWaitTime)},this.cameraReturnWaitTime):this.scheduleOnce(function(){s.isPositive(t.lemmingActiveCount)||t.cameraController.targetNode===t.structure&&(t.cameraController.targetNode=t._slingshot.node,t.setFreeCameraSetUp())},this.cameraReturnWaitTime),this.GrizzyReactionAnimParent.node.active=!1)},e.prototype.playOrNotifyAwakeFlag=function(t,e){this.GrizzyReactionAnimParent.node.active?this.playGrizzyAwakeFlag=e:this.PlayReaction(t)},e.prototype.RestartLevel=function(){this.playButtonSound(),i.default.DefaultInstance.SceneManager.ChangeScene("auto_gameplay")},e.prototype.GoToLevelSelect=function(){this.playButtonSound(),i.default.DefaultInstance.SceneManager.ChangeScene("level_select")},e.prototype.openPause=function(){},e.prototype.enableInputSlingshot=function(){this._slingshot.enabledInput()},e.prototype.disableInputSlingshot=function(){this._slingshot.disableInput()},e.prototype.onCameraHardLeft=function(){i.default.log("focusing on slingshot"),this.cameraController.targetNode=this._slingshot.node},e.prototype.onCameraHardRight=function(){i.default.log("Focusing on structure"),this.cameraController.targetNode=this.structure},e.prototype.setLaunchCameraSetUp=function(){this.cameraController.maxRange=200,this.cameraController.catchSpeed=300},e.prototype.setFreeCameraSetUp=function(){!this.goToSlingshot.node.active&&this.slingshot.isProjectileLoaded&&this.sligshotButtonShouldBeVisible&&this.cameraController.hasBeenMovedByInput&&!s.isZero(this.clockCounter)&&(this.goToSlingshot.node.active=!0,i.default.log("Slingshot button appeared")),this.cameraController.maxRange=1e4,this.cameraController.catchSpeed=7e3},e.prototype.camFocusOnSlingshotAsButton=function(){this.playButtonSound(),this.camFocusOnSlingshot()},e.prototype.camFocusOnSlingshot=function(){this.setFreeCameraSetUp(),this.onCameraHardLeft()},e.prototype.onLemmingLaunch=function(t){var e=this;this.sligshotButtonShouldBeVisible=!1,this.cameraController.isOffsetAhead=!0,this.cameraController.hasBeenMovedByInput=!1,this.cameraController.targetNode=t.node,this.setLaunchCameraSetUp(),p.default.onCollisionCallback=function(){if(e.cameraController.isOffsetAhead=!1,!e.isMoveCheckActive){e.isMoveCheckActive=!0,e.schedule(e.movementCheck,1,cc.macro.REPEAT_FOREVER,1)}e.cameraController.hasBeenMovedByInput||(e.setCameraTargetAfterCollision(),e.setFreeCameraSetUp())}},e.prototype.onBallLaunch=function(t){var e=this;this.sligshotButtonShouldBeVisible=!1,this.cameraController.isOffsetAhead=!0,this.cameraController.hasBeenMovedByInput=!1,this.cameraController.targetNode=t.node,this.setLaunchCameraSetUp(),t.onDestroyCallback=function(o){e.cameraController.targetNode==t.node&&(e.cameraController.targetNode=o)},p.default.onCollisionCallback=function(){if(e.cameraController.isOffsetAhead=!1,!e.isMoveCheckActive){e.isMoveCheckActive=!0,e.schedule(e.movementCheck,1,cc.macro.REPEAT_FOREVER,1)}e.cameraController.hasBeenMovedByInput||(e.setCameraTargetAfterCollision(),e.setFreeCameraSetUp())}},e.prototype.setCameraTargetAfterCollision=function(){if(null==this.cameraController.targetNode)this.cameraController.targetNode=this.structure;else{var t=this.cameraController.targetNode,e=t.parent.convertToWorldSpaceAR(t.position),o=this.structure.parent.convertToWorldSpaceAR(this.structure.position).x-cc.view.getViewportRect().size.width/this.cameraController.camera.zoomRatio*.5;e.x>o?this.cameraController.targetNode=this.structure:this.cameraController.targetNode=null}},e.prototype.movementCheck=function(){for(var t=this,e=.5*Number.MAX_VALUE,o=cc.rect(-e,-e,Number.MAX_VALUE,Number.MAX_VALUE),n=cc.director.getPhysicsManager().testAABB(o),r=0;r<n.length;++r){var a=this.movementBaseSpdCheck*~~this.moveCheckMultiplier;if(n[r].body.linearVelocity.magSqr()>a)return i.default.log("Object "+n[r].node.name+" is moving."),void(this.moveCheckMultiplier+=this.movementAccSpdDelta)}i.default.log("Nothing is moving"),this.moveCheckMultiplier=1,this.isMoveCheckActive=!1,this.unschedule(this.movementCheck);if(s.isZero(this.lemmingActiveCount)){var c=this.slingshot.LaunchTries;this.scheduleOnce(function(){t.grizzyShouldAppear?t.displayGrizzy():t.displaySleepingGrizzy(c),t.grizzyShouldAppear=!1},this.grizzyWaitTimeBeforeAppearing)}(this._slingshot.LaunchTries<1||s.isZero(this.clockCounter))&&this._slingshot.disableInput()},e.prototype.gameStart=function(){var t=this;this.cameraController.targetNode=this.structure,this.cameraController.isUserControllable=!0;this.scheduleOnce(function(){t.hasGameStarted=!0,t.cameraController.hasBeenMovedByInput||t.camFocusOnSlingshot()},2),this._slingshot.onLemmingLaunch=function(e){return t.onLemmingLaunch(e)},this._slingshot.onBallLaunch=function(e){return t.onBallLaunch(e)},this.cameraController.onHardLeft=this.onCameraHardLeft.bind(this),this.cameraController.onHardRight=this.onCameraHardRight.bind(this),this.cameraController.onUserControlStart=this.setFreeCameraSetUp.bind(this)},e.prototype.start=function(){var t=this;this.score=0,this.moveCheckMultiplier=1,this.lemmingActiveCount=0,this.lastLemmingDestroyedTimestamp=i.default.DefaultInstance.inGameElapsed/1e3,null==this.canvasNode&&(this.canvasNode=cc.find("Canvas")),this._slingshot=this.canvasNode.getComponentInChildren(l.default),this.cameraController=this.canvasNode.getComponentInChildren(u.default),this.structure=cc.find("Level_Root/Root_Structure",this.canvasNode),this.structure||(this.structure=cc.find("Level_Root/root_structure",this.canvasNode)),this.physicsBounds=cc.find("Level_Root/Bounds",this.canvasNode).getComponent(cc.PhysicsPolygonCollider),this.cameraMaxBounds=cc.find("Level_Root/Camera_Max",this.canvasNode),this.xCameraMaxBoundDefault=this.cameraMaxBounds.position.x,this.cameraController.node.x=this.cameraController.node.parent.convertToNodeSpaceAR(this.structure.parent.convertToWorldSpaceAR(this.structure.position)).x,this.cameraController.forceNodePosUpdate(),this.GrizzyReactionAnimParent.on("finished",function(e){return t.ReactionAnimationFinished(e)}),this.LemmingDestroyed.sub(function(){return t.lemmingProjectileDestroyed()}),h.default.init("Canvas/TrajectoryMarkerPool"),this.outLemmingsParent.getComponentsInChildren(cc.Animation).forEach(function(t){t.on("finished",function(){t.node.active=!1},t)}),this.gameStart(),this.onFocus=function(){cc.director.isPaused()||t.pauseGame()},i.default.DefaultInstance.subscribeOnFocusEvent(this.onFocus);this.scheduleOnce(function(){var e=t.levelStartClips.randomClip;e&&cc.audioEngine.playEffect(e,!1)},.2);for(var e=0;e<32;++e)this.obtainedScoreLabelsPool.put(this.createNewObtainedScoreLabel())},e.prototype.onDestroy=function(){i.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus)},e.prototype.lemmingProjectileDestroyed=function(){i.default.log("lemming Projectile Destroyed")},e.prototype.playButtonSound=function(){var t=i.default.DefaultInstance.GetPersistentNode().getComponent(m.default);t&&t.playButtonClip()},e.prototype.lateUpdate=function(){if(this.hasGameStarted&&this.slingshot.isProjectileLoaded&&!function(t,e,o){if(void 0===o&&(o=!1),!e)return!1;for(var n=cc.view.getViewportRect(),i=n.width/cc.view.getScaleX(),r=n.height/cc.view.getScaleY(),a=t;a;){var c=a.getContentSize(),l=c.width*t.scaleX,u=c.height*t.scaleY,p=new cc.Vec2;if(e.getWorldToCameraPoint(a.parent.convertToWorldSpaceAR(a.position),p),!s.isNegative(p.x)&&!s.isNegative(p.y)&&l<i&&u<r)return!0;if(!o)break;if(s.isPositive(a.childrenCount))a=a.children[0];else for(;;){if(a.getSiblingIndex()!==a.parent.childrenCount-1){a=a.parent.children[a.getSiblingIndex()+1];break}if(a.parent===t){a=null;break}a=a.parent}}return!1}(this._slingshot.node,this.cameraController.camera)?!this.goToSlingshot.node.active&&this.slingshot.isProjectileLoaded&&this.sligshotButtonShouldBeVisible&&this.cameraController.hasBeenMovedByInput&&!s.isZero(this.clockCounter)&&(this.goToSlingshot.node.active=!0):this.goToSlingshot.node.active&&(this.goToSlingshot.node.active=!1),this.cameraMaxBounds){var t=cc.view.getScaleX(),e=cc.view.getViewportRect(),o=void 0;if(this.cameraMaxBounds.parent===this.structure)o=this.structure.x+.5*e.size.width/t;else{var n=this.structure.parent.convertToWorldSpaceAR(this.structure.position);o=this.cameraMaxBounds.parent.convertToNodeSpaceAR(n).x+.5*e.size.width/t}if(this.xCameraMaxBoundDefault<o?this.cameraMaxBounds.x=o:this.cameraMaxBounds.x=this.xCameraMaxBoundDefault,this.physicsBounds){var i=this.cameraMaxBounds.parent.convertToWorldSpaceAR(this.cameraMaxBounds.position).x-this.physicsBounds.points[2].x+64;this.physicsBounds.node.x=this.physicsBounds.node.parent.convertToNodeSpaceAR(new cc.Vec2(i,E)).x,this.physicsBounds.body.syncPosition(!1)}}},__decorate([v({displayName:"State Machine",type:r.default})],e.prototype,"fsm",void 0),__decorate([v(sp.Skeleton)],e.prototype,"GrizzyReaction",void 0),__decorate([v(cc.Animation)],e.prototype,"GrizzyReactionAnimParent",void 0),__decorate([v({type:cc.Prefab})],e.prototype,"obtainedScoreLabelPrefab",void 0),__decorate([v({type:cc.Font})],e.prototype,"defaultScoreFont",void 0),__decorate([v({type:cc.Font})],e.prototype,"noiseScoreFont",void 0),__decorate([v({type:cc.Font})],e.prototype,"pickupScoreFont",void 0),__decorate([v({type:cc.Font})],e.prototype,"lemmingScoreFont",void 0),__decorate([v(cc.Component.EventHandler)],e.prototype,"onScoreChanged",void 0),__decorate([v(cc.Node)],e.prototype,"canvasNode",void 0),__decorate([v(cc.Node)],e.prototype,"uiRootNode",void 0),__decorate([v({tooltip:"Time in seconds"})],e.prototype,"scoreIncrementTime",void 0),__decorate([v({tooltip:"Time in seconds"})],e.prototype,"grizzyWaitHideTime",void 0),__decorate([v(cc.Button)],e.prototype,"goToSlingshot",void 0),__decorate([v({tooltip:"Time in seconds"})],e.prototype,"endGameWaitTime",void 0),__decorate([v({tooltip:"Time in seconds"})],e.prototype,"endGameScoreDeltaTime",void 0),__decorate([v({tooltip:"Base speed check value. If an object squared speed is higher than this value * accumulator, then it is considered moving"})],e.prototype,"movementBaseSpdCheck",void 0),__decorate([v({tooltip:"Movement accumulator delta. It tells how many units per seconds the accumulator grows."})],e.prototype,"movementAccSpdDelta",void 0),__decorate([v(cc.Node)],e.prototype,"outLemmingsParent",void 0),__decorate([v],e.prototype,"minLemmingDestroyDelta",void 0),__decorate([v],e.prototype,"grizzyWaitTimeBeforeAppearing",void 0),__decorate([v],e.prototype,"cameraReturnWaitTime",void 0),__decorate([v],e.prototype,"groundMass",void 0),__decorate([v(cc.Prefab)],e.prototype,"projectedTrajectoryDotPrefab",void 0),__decorate([v(f.default)],e.prototype,"levelStartClips",void 0),__decorate([v({type:cc.AudioClip})],e.prototype,"grizzyAwakeningClip",void 0),__decorate([v({type:cc.AudioClip})],e.prototype,"grizzySleepingClip",void 0),__decorate([v({type:cc.AudioClip})],e.prototype,"grizzyScaredClip",void 0),__decorate([v({type:cc.AudioClip})],e.prototype,"grizzyLevelFailedClip",void 0),__decorate([v(d.default)],e.prototype,"pausePopupController",void 0),e=__decorate([_],e)}(n.default);o.default=D,cc._RF.pop()},{"../../../../CrabWare/AudioClipCollection":"AudioClipCollection","../../../../CrabWare/Components/PhysicsProjectile":"PhysicsProjectile","../../../../CrabWare/Components/StateMachine":"StateMachine","../../../../CrabWare/Core/BaseSceneController":"BaseSceneController","../../../../CrabWare/Core/Maestro":"Maestro","../../../../CrabWare/Utils/MathUtils":"MathUtils","../../../Components/SingleLemmingProjectile":"SingleLemmingProjectile","../../../Components/StructureUnit":"StructureUnit","../../../MusicPlayer":"MusicPlayer","../../../UIAudioClips":"UIAudioClips","../../CameraController":"CameraController","../../LemmingsLauncherController":"LemmingsLauncherController","../../PausePopupController":"PausePopupController","ste-signals":8}],GameplayDebugUIController:[function(t,e,o){"use strict";cc._RF.push(e,"467e1iB/VdLg6KlE5uaa+Yk","GameplayDebugUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("../CrabWare/Utils/MathUtils"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cursorPosition=null,e.scoreInfo=null,e.camera=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.node.destroy();this.scheduleOnce(function(){var e=n.default.DefaultInstance.GetConcreteState(),o=e.StateContainer.currentLevelData,i=e.getScoreRatio(e.StateContainer.currentLevel),r=i.firstStarRatio*o.MaxScore,a=i.secondStarRatio*o.MaxScore,s=i.thirdStarRatio*o.MaxScore;t.scoreInfo.string=o.MaxScore+"\n"+r+"\n"+a+"\n"+s},0);var e=cc.find("Canvas/Main Camera");e&&(this.camera=e.getComponent(cc.Camera)),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.onInputMove,this)},e.prototype.onInputMove=function(t){var e,o,n=t.getLocation();e=4-Math.log10(n.x),o=4-Math.log10(n.y),i.isNegative(e)&&(e=0),i.isNegative(o)&&(o=0);var r,a=n.x.toFixed(e)+", "+n.y.toFixed(o);if(this.camera){var s=void 0;s=this.camera.getCameraToWorldPoint(n,s),e=4-Math.log10(s.x),o=4-Math.log10(s.y),i.isNegative(e)&&(e=0),i.isNegative(o)&&(o=0),r=s.x.toFixed(e)+", "+s.y.toFixed(o)}else r="Unavailable :C";this.cursorPosition.string=a+"\n"+r},__decorate([s(cc.Label)],e.prototype,"cursorPosition",void 0),__decorate([s(cc.Label)],e.prototype,"scoreInfo",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","../CrabWare/Utils/MathUtils":"MathUtils"}],GrizzyBirdsMaster:[function(t,e,o){"use strict";cc._RF.push(e,"e41f6F6AMRAtoCKg2O6gq08","GrizzyBirdsMaster"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return __extends(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){return n.default.GetInstance(o)},enumerable:!0,configurable:!0}),e=o=__decorate([i],e)}(n.default);o.default=r,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro"}],GrizzyBirdsState:[function(t,e,o){"use strict";cc._RF.push(e,"d7477/oatlE6b9Oy+8LGGhM","GrizzyBirdsState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./GameState"),i=t("typescript-collections"),r=cc._decorator,a=r.ccclass,s=r.property;o.DEFAULT_MAX_LEVELS=20,o.MAX_UNLOCKED_BY_DEFAULT_LEVEL_ID=1,o.DEFAULT_LEVEL_ID=1;var c=0,l=0,u=0,p=!0,d=!1,h=!1,f=0,m=.1,y=.3,g=.6,_=function(){function t(){this.IsLocked=p,this.LevelID=o.DEFAULT_LEVEL_ID,this.Stars=c,this.Score=l,this.MaxScore=l,this.WinThreshold=u,this.IsFreshlyUnlocked=d,this.NeedsStarsUpdate=h}return t.Default=function(){var e=new t;return e.LevelID=o.DEFAULT_LEVEL_ID,e.Score=l,e.MaxScore=l,e.Stars=c,e.IsLocked=p,e.WinThreshold=u,e.IsFreshlyUnlocked=d,e.NeedsStarsUpdate=h,e},t}();o.LevelData=_;var v=function(){function t(){this.firstStarRatio=m,this.secondStarRatio=y,this.thirdStarRatio=g}return __decorate([s(cc.Float)],t.prototype,"firstStarRatio",void 0),__decorate([s(cc.Float)],t.prototype,"secondStarRatio",void 0),__decorate([s(cc.Float)],t.prototype,"thirdStarRatio",void 0),t=__decorate([a("ScoreRatio")],t)}(),C=function(){function t(){this.saveFileVersion="0.0.0",this.currentLevel=o.DEFAULT_LEVEL_ID,this.confettiAppeared=!1,this.LevelsData=new i.Dictionary,this._lastLevelCompleted=f,this.shouldDisplayComic=!0,this._isMusicEnabled=!0,this._isSFXEnabled=!0}return t.prototype.AllLevelHasStars=function(){var t=!0;return this.LevelsData.values().forEach(function(e){(e.IsLocked||e.Stars<1)&&(t=!1)}),t},Object.defineProperty(t.prototype,"currentLevelData",{get:function(){return this.LevelsData.getValue(this.currentLevel)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastLevelFlags",{get:function(){return this._lastLevelCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMusicEnabled",{get:function(){return this._isMusicEnabled},set:function(t){this._isMusicEnabled=t;cc.audioEngine.setMusicVolume(t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSFXEnabled",{get:function(){return this._isSFXEnabled},set:function(t){this._isSFXEnabled=t;cc.audioEngine.setEffectsVolume(t?1:0)},enumerable:!0,configurable:!0}),t}(),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.StateContainer=new C,e.LevelPrefabs=[],e._levelPrefab=null,e.scoreRatios=[],e.defaultScoreRatio=null,e}return __extends(e,t),e.prototype.GetVersion=function(){return"1.0.0"},e.prototype.GetPrefix=function(){return"lemmings_launcher"},Object.defineProperty(e.prototype,"LevelPrefab",{get:function(){return this._levelPrefab},set:function(t){this._levelPrefab=t},enumerable:!0,configurable:!0}),e.prototype.Save=function(){var t=this;cc.sys.localStorage.setItem(this.GetPersistentKey("currentLevel"),this.StateContainer.currentLevel),cc.sys.localStorage.setItem(this.GetPersistentKey("saveVersion"),this.GetVersion()),cc.sys.localStorage.setItem(this.GetPersistentKey("levelCount"),o.DEFAULT_MAX_LEVELS),cc.sys.localStorage.setItem(this.GetPersistentKey("confettiAppeared"),this.StateContainer.confettiAppeared),cc.sys.localStorage.setItem(this.GetPersistentKey("comicFlag"),this.StateContainer.shouldDisplayComic),this.StateContainer.LevelsData.values().forEach(function(e){cc.sys.localStorage.setItem(t.GetPersistentKey("level_"+e.LevelID),JSON.stringify(e))}),this.SaveAudioSettings()},e.prototype.SaveAudioSettings=function(){cc.sys.localStorage.setItem(this.GetPersistentKey("musicEnabled"),this.StateContainer.isMusicEnabled),cc.sys.localStorage.setItem(this.GetPersistentKey("sfxEnabled"),this.StateContainer.isSFXEnabled)},e.prototype.Load=function(){this.StateContainer=new C,this.StateContainer.LevelsData=new i.Dictionary,null==cc.sys.localStorage.getItem(this.GetPersistentKey("saveVersion"))&&(this.ResetState(),this.Save()),this.StateContainer.currentLevel=parseInt(cc.sys.localStorage.getItem(this.GetPersistentKey("currentLevel"))),this.StateContainer.saveFileVersion=cc.sys.localStorage.getItem(this.GetPersistentKey("saveVersion")),this.StateContainer.confettiAppeared=JSON.parse(cc.sys.localStorage.getItem(this.GetPersistentKey("confettiAppeared"))),this.StateContainer.shouldDisplayComic=JSON.parse(cc.sys.localStorage.getItem(this.GetPersistentKey("comicFlag"))),this.LoadAudioSettings();var t=cc.sys.localStorage.getItem(this.GetPersistentKey("comicFlag"));t&&(this.StateContainer.shouldDisplayComic="true"===t);for(var e=cc.sys.localStorage.getItem(this.GetPersistentKey("levelCount")),o=1;o<=e;o++){var n=JSON.parse(cc.sys.localStorage.getItem(this.GetPersistentKey("level_"+o)));this.StateContainer.LevelsData.setValue(o,n)}},e.prototype.LoadAudioSettings=function(){var t=cc.sys.localStorage.getItem(this.GetPersistentKey("musicEnabled")),e=cc.sys.localStorage.getItem(this.GetPersistentKey("sfxEnabled"));t&&(this.StateContainer.isMusicEnabled="true"===t),e&&(this.StateContainer.isSFXEnabled="true"===e)},e.prototype.getScoreRatio=function(t){return this.scoreRatios[t]?this.scoreRatios[t]:this.defaultScoreRatio},e.prototype.ResetState=function(){this.StateContainer=new C,this.StateContainer.LevelsData=new i.Dictionary,this.StateContainer.currentLevel=1,this.StateContainer.confettiAppeared=!1;for(var t=1;t<=20;t++){var e=_.Default();e.LevelID=t,this.StateContainer.LevelsData.setValue(t,e),t<=o.MAX_UNLOCKED_BY_DEFAULT_LEVEL_ID&&(this.StateContainer.LevelsData.getValue(t).IsFreshlyUnlocked=d,this.StateContainer.LevelsData.getValue(t).NeedsStarsUpdate=h,this.StateContainer.LevelsData.getValue(t).IsLocked=p,this.StateContainer.LevelsData.getValue(t).Stars=1)}var n=new _;n.IsFreshlyUnlocked=!0,n.NeedsStarsUpdate=!0,n.IsLocked=!1,this.StateContainer.LevelsData.setValue(1,n)},__decorate([s([cc.Prefab])],e.prototype,"LevelPrefabs",void 0),__decorate([s({type:cc.Prefab,visible:!0})],e.prototype,"_levelPrefab",void 0),__decorate([s({type:[v]})],e.prototype,"scoreRatios",void 0),__decorate([s({type:v})],e.prototype,"defaultScoreRatio",void 0),e=__decorate([a],e)}(n.default);o.GrizzyBirdsState=S,cc._RF.pop()},{"./GameState":"GameState","typescript-collections":28}],ImpulseApplier:[function(t,e,o){"use strict";cc._RF.push(e,"799ccN77BpEraz66nPd5DWJ","ImpulseApplier"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=1,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sensor=null,e.colliders=[],e.constantImpulse=!1,e.applyImpulseThroughTime=!0,e.impulseValue=s,e}return __extends(e,t),e.prototype.applyImpulse=function(t){var e=this.getDisplacement(t.body),o=n.isZero(e.magSqr())?1e-7:e.mag(),i=s/o;this.applyLinearImpulseOnBody(t.body,e,i*i)},e.prototype.applyConstantImpulse=function(t){var e=this.getDisplacement(t.body);this.applyLinearImpulseOnBody(t.body,e,s)},e.prototype.getDisplacement=function(t){var e,o;return e=this.sensor.body.getWorldPosition(e),(o=t.getWorldPosition(o)).sub(e)},e.prototype.applyLinearImpulseOnBody=function(t,e,o){var n=this.impulseValue*this.impulseValue*this.impulseValue*o*this.sensor.density;t.applyLinearImpulse(e.mul(n),t.getWorldCenter(),!0)},e.prototype.applyImpulseOnColliders=function(){var t=this;this.constantImpulse?this.colliders.forEach(function(e){t.applyConstantImpulse(e)}):this.colliders.forEach(function(e){t.applyImpulse(e)})},e.prototype.start=function(){if(this.sensor instanceof cc.PhysicsCircleCollider)this.impulseValue*=this.sensor.radius;else if(this.sensor instanceof cc.PhysicsBoxCollider){var t=this.sensor.size.height>this.sensor.size.width?this.sensor.size.height:this.sensor.size.width;this.impulseValue*=t}else this.impulseValue*=this.sensor.density},e.prototype.onBeginContact=function(t,e,o){this.applyImpulseThroughTime||(this.constantImpulse?this.applyConstantImpulse(o):this.applyImpulse(o)),this.colliders.push(o)},e.prototype.onEndContact=function(t,e,o){var i=this.colliders.indexOf(o);if(!n.isNegative(i)){this.colliders.splice(i,1)}},e.prototype.update=function(){this.applyImpulseThroughTime&&this.applyImpulseOnColliders()},__decorate([a(cc.PhysicsCollider)],e.prototype,"sensor",void 0),__decorate([a],e.prototype,"constantImpulse",void 0),__decorate([a],e.prototype,"applyImpulseThroughTime",void 0),__decorate([a],e.prototype,"impulseValue",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../Scripts/CrabWare/Utils/MathUtils":"MathUtils"}],InspectorFSM:[function(t,e,o){"use strict";cc._RF.push(e,"feeb5uR7DdME6b93peaYhrz","InspectorFSM"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("typescript-collections"),i=t("../../CrabWare/FSM/FiniteStateMachine"),r=t("../../CrabWare/Core/Maestro"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(){function t(){this.ParentState="",this.TargetState="",this.Action=""}return t.prototype.toString=function(){return"\n Parent: "+this.ParentState+"\n Target: "+this.TargetState+"\n Action: "+this.Action},__decorate([c(cc.String)],t.prototype,"ParentState",void 0),__decorate([c(cc.String)],t.prototype,"TargetState",void 0),__decorate([c(cc.String)],t.prototype,"Action",void 0),t=__decorate([s("InspectorFSMTransition")],t)}(),u=function(){function t(){this.AnimStateID="",this.ActionOnAnimFinish=""}return t.prototype.toString=function(){return"\n AnimStateID: "+this.AnimStateID+"\n ActionOnAnimFinish: "+this.ActionOnAnimFinish},__decorate([c(cc.String)],t.prototype,"AnimStateID",void 0),__decorate([c(cc.String)],t.prototype,"ActionOnAnimFinish",void 0),t=__decorate([s("AnimState")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fsm=null,e.AutoStartFSM=!1,e.StatesAreAnimations=!1,e.DefaultState="",e.AnimStates=[],e.transitions=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"FSM",{get:function(){return this.fsm},enumerable:!0,configurable:!0}),e.prototype.PrintFSM=function(){r.default.log(this.FSM.toString())},e.prototype.IssueFSMCommand=function(t){this.FSM.IssueCommand(t)},e.prototype.BeginFSM=function(){this.FSM.Begin()},e.prototype.ForceBeginFSM=function(t){this.FSM.BeginForce(t)},e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this,e=new n.LinkedList;this.AnimStates.forEach(function(t){e.add(t.AnimStateID)}),this.fsm=new i.FiniteStateMachine(e.toArray(),this.DefaultState,i.eWrapStyle.Loop),this.fsm.StateEnter.subscribe(function(e){return t.StateEnter(e)}),this.transitions.forEach(function(e){t.fsm.AddTransitionToState(e.ParentState,e.Action,e.TargetState)}),this.StatesAreAnimations&&(this.animation=this.getComponent(cc.Animation),this.animation.on("finished",function(e){return t.AnimationFinished(e)})),this.AutoStartFSM&&this.FSM.Begin()},e.prototype.AnimationClipExists=function(t){var e=!1;return this.animation.getClips().forEach(function(o){o.name==t&&(e=!0)}),e},e.prototype.StateEnter=function(t){r.default.log("StateEnter: "+t),this.StatesAreAnimations&&this.AnimationClipExists(t)&&this.animation.play(t)},e.prototype.AnimationFinished=function(){var t=this;r.default.log("animation finished : "+this.fsm.CurrentStateID),this.AnimStates.forEach(function(e){e.AnimStateID==t.FSM.CurrentStateID&&""!=e.ActionOnAnimFinish&&(r.default.log("Command: "+e.ActionOnAnimFinish),t.FSM.IssueCommand(e.ActionOnAnimFinish))})},__decorate([c],e.prototype,"AutoStartFSM",void 0),__decorate([c],e.prototype,"StatesAreAnimations",void 0),__decorate([c],e.prototype,"DefaultState",void 0),__decorate([c([u])],e.prototype,"AnimStates",void 0),__decorate([c([l])],e.prototype,"transitions",void 0),e=__decorate([s],e)}(cc.Component);o.InspectorFSM=p,cc._RF.pop()},{"../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/FSM/FiniteStateMachine":"FiniteStateMachine","typescript-collections":28}],LemmingBoosterListener:[function(t,e,o){"use strict";cc._RF.push(e,"6465fn45/JHV4CWTr8eOrIs","LemmingBoosterListener"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Components/PhysicsProjectile"),i=t("../CrabWare/Core/Maestro"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.projectile=null,e.inputFlag=!1,e}return __extends(e,t),e.prototype.doEffect=function(){var t=i.default.DefaultInstance.SceneManager.GetController();if(t){var e=t.removeBooster();e&&e.doEffect(this.projectile)}},e.prototype.onInputDown=function(t){this.inputFlag=!0,t.stopPropagation()},e.prototype.onInputUp=function(t){this.inputFlag&&(this.doEffect(),t.stopPropagation())},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.space:this.doEffect()}},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},__decorate([s(n.default)],e.prototype,"projectile",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../CrabWare/Components/PhysicsProjectile":"PhysicsProjectile","../CrabWare/Core/Maestro":"Maestro"}],LemmingQueue:[function(t,e,o){"use strict";cc._RF.push(e,"abc40mwIzJKvJwq7HGIccbO","LemmingQueue"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=4,c=0,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lemmingQueueAnimation=null,e.standAnimationMaxIndex=s,e.boostedLemmings=[],e.currentAnimIndex=c,e}return __extends(e,t),e.prototype.suscribeOnAnimationFinished=function(t){this.lemmingQueueAnimation.on("finished",t)},e.prototype.boostNextLemming=function(){for(var t=this.lemmingQueueAnimation.getComponentsInChildren(cc.Animation),e=0;e<t.length;++e){var o=t[e];if(o!==this.lemmingQueueAnimation&&(o.node.active&&"lemming_boosted"!=o.currentClip.name)){this.boostedLemmings.push(o),o.play("lemming_boosted");break}}},e.prototype.getLemmingQueueNodes=function(){return this.node.children},e.prototype.hideLemmings=function(t){for(var e=0;e<this.node.children.length&&e<t;++e){var o=this.node.children.length-e-1;this.node.children[o].active=!1}},e.prototype.advance=function(){var t=this.lemmingQueueAnimation.getClips();this.lemmingQueueAnimation.play(t[this.currentAnimIndex].name),++this.currentAnimIndex},e.prototype.start=function(){var t=this;this.lemmingQueueAnimation.on("play",function(){t.lemmingQueueAnimation.getComponentsInChildren(cc.Animation).forEach(function(e){e!==t.lemmingQueueAnimation&&e.node.active&&e.play("lemming_run")})}),this.lemmingQueueAnimation.on("finished",function(){var e=!0;t.lemmingQueueAnimation.getComponentsInChildren(cc.Animation).forEach(function(o){if(o!==t.lemmingQueueAnimation&&o.node.active)if(e)o.node.active=!1,e=!1;else{if(-1!=t.boostedLemmings.indexOf(o))o.play("lemming_boosted");else{var i=o.getClips(),r=n.randomIntFromInterval(0,t.standAnimationMaxIndex);o.play(i[r].name,n.randomFloatFromInterval(0,.5))}}})})},__decorate([a(cc.Animation)],e.prototype,"lemmingQueueAnimation",void 0),__decorate([a],e.prototype,"standAnimationMaxIndex",void 0),e=__decorate([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../CrabWare/Utils/MathUtils":"MathUtils"}],LemmingsLauncherController:[function(t,e,o){"use strict";cc._RF.push(e,"c01556gApZJ0rQyO86JjJ6B","LemmingsLauncherController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("@gamestdio/mathf"),i=t("../Components/Slingshot"),r=t("../GrizzyBirdsMaster"),a=t("../Components/SingleLemmingProjectile"),s=t("../Components/MultipleLemmingsProjectile"),c=t("../../CrabWare/Core/Maestro"),l=t("../BoosterSpeedEffect"),u=t("../BoosterSpreadEffect"),p=t("../LemmingQueue"),d=t("../../CrabWare/AudioClipCollection"),h=t("../../CrabWare/Utils/MathUtils"),f=t("../Components/TrajectoryMarker"),m=cc._decorator,y=m.ccclass,g=m.property,_=m.menu,v=3,C=5,S=10,b=50,E=1e4,A=130,T=0,P=0,M=new cc.Vec2(10,0),I=135,L=850,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTutorialLaunch=!1,e.tutorialLaunchAngle=I,e.tutorialLaunchSpeed=L,e.lemmingOnSlingShotExtendedOffset=M,e.maxLaunchTries=v,e.lemmingBonusScore=E,e.isTouching=!1,e.startInputPosition=cc.Vec2.ZERO,e.endInputPosition=cc.Vec2.ZERO,e.SpawnPoint=null,e.StartPointDummy=null,e.EndPointDummy=null,e.MaxPointDummy=null,e.MinInitialImpulse=C,e.MaxInitialImpulse=S,e.MaxRadius=b,e.projectilePrefabs=[],e.isSpawningSingleObject=!0,e.slingshot=null,e.camera=null,e.maxAngle=A,e.currentProjectileIndex=T,e._isProjectileLoaded=!0,e.lemmingQueue=null,e.boostAnimation=null,e.onLaunchTriesModified=null,e.slingshotClip=null,e.boosterClip=null,e.lowShotClip=null,e.highShotClip=null,e.shotClips=new d.default,e.projectedTrajectoryDots=[],e.shouldBeEnabled=!0,e.boostedLemmingsCount=P,e.audioIndex=P,e}return __extends(e,t),e.prototype.ActivateTutorialLaunch=function(){this.isTutorialLaunch=!0},Object.defineProperty(e.prototype,"LaunchTries",{get:function(){return this.launchTries},set:function(t){this.launchTries=t,null!=this.onLaunchTriesModified&&this.onLaunchTriesModified.emit([this.launchTries])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProjectileLoaded",{get:function(){return this._isProjectileLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNextLemmingBoosted",{get:function(){return h.isPositive(this.boostedLemmingsCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lemmingInSlingshotPosition",{get:function(){return this.isProjectileLoaded?this.slingshot.lemmingPosition:null},enumerable:!0,configurable:!0}),e.prototype.enabledInput=function(){this.shouldBeEnabled&&(this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMouseMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this.onMouseWheel,this))},e.prototype.disableInput=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMouseMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},e.prototype.start=function(){var t=this;this.node.anchorX=.4,this.node.anchorY=.65,this.node.setContentSize(150,150),this.LaunchTries=this.maxLaunchTries;var e=c.default.DefaultInstance.GetConcreteState(),o=e.StateContainer.LevelsData,i=e.StateContainer.currentLevel;o.getValue(i).MaxScore+=this.LaunchTries*this.lemmingBonusScore,null!=this.lemmingQueue&&(this.lemmingQueue.suscribeOnAnimationFinished(function(){h.isPositive(t.boostedLemmingsCount)&&t.boostAnimation?(t.selectLemmingProjectile(T),t.slingshot.activateProjectileSprite(),--t.boostedLemmingsCount):t._reload()}),this._isProjectileLoaded=!1,this.disableInput(),this.lemmingQueue.advance()),this.boostAnimation&&this.boostAnimation.on("smoke-screen",function(){t._reload()}),c.default.log(this.node.getContentSize()+" - "+this.node.position),this.enabledInput();if(this.lemmingQueue.hideLemmings(5-this.launchTries),!this.isTutorialLaunch){console.log("tl asdfasf");for(var r=c.default.DefaultInstance.SceneManager.GetController().projectedTrajectoryDotPrefab,a=0;a<16;++a){var s=cc.instantiate(r);s.removeComponent(f.default),s.zIndex=cc.macro.MAX_ZINDEX,s.scale=n.lerp(1,.5,a/16),s.active=!1,this.node.parent.addChild(s),this.projectedTrajectoryDots.push(s)}}this.drawProjectedTrajectoryCallback=function(){t.drawProjectedTrajectory(t.cursorPos)}},e.prototype.SelectSingleLemming=function(){this.isSpawningSingleObject=!0,c.default.log(this.isSpawningSingleObject)},e.prototype.SelectMultipleLemming=function(){this.isSpawningSingleObject=!1,c.default.log(this.isSpawningSingleObject)},e.prototype.boostNextLemming=function(){this.boostAnimation&&++this.boostedLemmingsCount},e.prototype.getLemmingQueueNodes=function(){var t=this;return this.lemmingQueue.getLemmingQueueNodes().filter(function(e,o){return o>=t.maxLaunchTries-t.launchTries&&e.active})},e.prototype.onMouseMove=function(t){if(t.stopPropagation(),this.isTouching){this.isDragging=!0;var e=void 0;e=this.camera.getCameraToWorldPoint(t.getLocation(),e),this.slingshot.extendBand(e,this.maxAngle,this.MaxRadius),this.cursorPos=e}},e.prototype.onMouseWheel=function(t){this.isTouching=!0,c.default.log("Mouse down"),c.default.log(this.isTouching),this.startInputPosition=new cc.Vec2(t.getLocationX(),t.getLocationY())},e.prototype.onInputDown=function(t){this.isDragging=!1,t.stopPropagation(),this.isTouching=!0,c.default.log("Mouse down"),c.default.log(this.isTouching),this.startInputPosition=new cc.Vec2(t.getLocationX()+this.lemmingOnSlingShotExtendedOffset.x,t.getLocationY()+this.lemmingOnSlingShotExtendedOffset.y);var e=new cc.Vec2;this.isTutorialLaunch||(this.cursorPos=this.camera.getCameraToWorldPoint(t.getLocation(),e),this.schedule(this.drawProjectedTrajectoryCallback,P,cc.macro.REPEAT_FOREVER,P)),this.slingshotClip&&cc.audioEngine.playEffect(this.slingshotClip,!1)},e.prototype.SelectNextLemmingProjectile=function(){this.selectLemmingProjectile(this.currentProjectileIndex+1)},e.prototype.selectLemmingProjectile=function(t){void 0===t&&(t=0),this.currentProjectileIndex=t%this.projectilePrefabs.length;var e=this.projectilePrefabs[this.currentProjectileIndex].data.getComponent(cc.Sprite);null==e&&(e=this.projectilePrefabs[this.currentProjectileIndex].data.getComponentInChildren(cc.Sprite)),this.slingshot.setLemmingSprite(e.spriteFrame,e.node.getContentSize())},e.prototype.onInputUp=function(t){(this.isTutorialLaunch||(this.unschedule(this.drawProjectedTrajectoryCallback),this.hideProjectedTrajectoryDots()),this.LaunchTries<=0)||(this.isTouching=!1,c.default.log("Mouse up"),c.default.log(this.isTouching),this.endInputPosition=new cc.Vec2(t.getLocationX(),t.getLocationY()),this.DebugInputPositions(this.startInputPosition,this.endInputPosition)?(this._isProjectileLoaded=!1,this.disableInput(),this.LaunchTries--,this.slingshot.releaseBand()):(this.slingshot.releaseBand(),this.slingshot.activateProjectileSprite()))},e.prototype.releaseWithoutThrowing=function(){this.slingshot.releaseBand(),this.isTouching=!1,this.slingshot.activateProjectileSprite()},e.prototype.reload=function(){null!=this.lemmingQueue?(h.isPositive(this.boostedLemmingsCount)&&this.boostAnimation&&(this.boostAnimation.play(),this.boosterClip&&cc.audioEngine.playEffect(this.boosterClip,!1)),this.lemmingQueue.advance()):this._reload()},e.prototype._reload=function(){var t=c.default.DefaultInstance.SceneManager.GetController();if(t){var e=t.getCurrentBooster();if(e)switch(!0){case e instanceof l.default:this.selectLemmingProjectile(1);break;case e instanceof u.default:this.selectLemmingProjectile(2);break;default:this.selectLemmingProjectile(T)}else this.selectLemmingProjectile(T)}this.enabledInput(),this.slingshot.activateProjectileSprite(),this._isProjectileLoaded=!0},e.prototype.DebugInputPositions=function(t,e){var o=cc.find("Canvas/Main Camera").getComponent(cc.Camera),n=cc.Vec2.ZERO,i=cc.Vec2.ZERO;n=o.getCameraToWorldPoint(t,n);var r=(i=o.getCameraToWorldPoint(e,i)).sub(n),a=this.NormalizeInputVector(r,this.MaxRadius),s=this.GetInitialSpeed(a.mag(),0,this.MaxRadius,this.MinInitialImpulse,this.MaxInitialImpulse);r.mag()>this.MaxRadius?this.MaxPointDummy.position=this.node.position.add(r.normalize().mul(this.MaxRadius)):this.MaxPointDummy.position=this.node.position.add(r);var c=180/Math.PI,l=a.signAngle(cc.Vec2.RIGHT)*c,u=Math.abs(l);if(u>this.maxAngle)return!1;var p;if(45<u&&u<135?p=h.isPositive(l)?this.lowShotClip:this.highShotClip:(p=this.shotClips.getClip(this.audioIndex),++this.audioIndex,this.audioIndex===this.shotClips.clipCount&&(this.audioIndex=P)),p&&cc.audioEngine.playEffect(p,!1),this.isTutorialLaunch){this.isTutorialLaunch=!1;var d=cc.Vec2.RIGHT.rotate(this.tutorialLaunchAngle*c);this.LaunchLemming(d,45,this.tutorialLaunchSpeed)}else this.LaunchLemming(a,45,s);return!0},e.prototype.GetInitialSpeed=function(t,e,o,i,r){var a=n.inverseLerp(e,o,t);return n.lerp(i,r,a)},e.prototype.normalizeVector=function(t){return this.NormalizeInputVector(t,this.MaxRadius).mul(-1)},e.prototype.NormalizeInputVector=function(t,e){return t.normalize().mul(Math.min(t.mag(),e)).mul(-1)},e.prototype.LaunchLemming=function(t,e,o){var n=this.node.convertToNodeSpaceAR(this.slingshot.lemmingPosition),i=this.SpawnLemming(n,t,e,o),c=i.getComponent(a.default);if(null!=c)null!=this.onLemmingLaunch&&this.onLemmingLaunch(c);else{var l=i.getComponent(s.default);null!=this.onBallLaunch&&this.onBallLaunch(l)}r.default.Instance.SceneManager.GetController().changeState("lemming-launched")},e.prototype.SpawnLemming=function(t,e,o,n){var i=this.projectilePrefabs[this.currentProjectileIndex];if(null!=i){var r=cc.instantiate(i);r.setPosition(t);var a=r.getComponent(cc.RigidBody);return a||(a=r.getComponentInChildren(cc.RigidBody)),a.linearVelocity=e.normalize().mul(n),this.node.addChild(r),r}return null},e.prototype.hideProjectedTrajectoryDots=function(){for(var t=this.projectedTrajectoryDots.length,e=0;e<t;++e)this.projectedTrajectoryDots[e].active=!1},e.prototype.drawProjectedTrajectory=function(t){var e=cc.find("Canvas/Main Camera").getComponent(cc.Camera),o=cc.Vec2.ZERO;o=e.getCameraToWorldPoint(this.startInputPosition,o);var i=t.sub(o),r=this.NormalizeInputVector(i,this.MaxRadius),a=this.GetInitialSpeed(r.mag(),0,this.MaxRadius,this.MinInitialImpulse,this.MaxInitialImpulse);r.normalizeSelf(),r.mulSelf(a);var s=180/Math.PI,c=r.signAngle(cc.Vec2.RIGHT)*s,l=Math.abs(c),u=this.projectedTrajectoryDots.length;if(l>this.maxAngle)this.hideProjectedTrajectoryDots();else for(var p=n.inverseLerp(this.MinInitialImpulse,this.MaxInitialImpulse,a),d=n.lerp(8*u,4*u,p),h=cc.director.getTotalFrames()%cc.game.getFrameRate()/cc.game.getFrameRate(),f=0;f<u;++f){var m=n.lerp(P,d,(f+h)/u),y=this.getDotPositionInTrajectory(this.slingshot.lemmingPosition,r,m);this.projectedTrajectoryDots[f].position=this.projectedTrajectoryDots[f].parent.convertToNodeSpaceAR(y),this.projectedTrajectoryDots[f].active=!0}},e.prototype.getDotPositionInTrajectory=function(t,e,o){var n,i=cc.PhysicsManager.FIXED_TIME_STEP,r=e.mul(i,n),a=cc.director.getPhysicsManager().gravity.mul(i*i,n);return t.add(r.mul(o,n),n).add(a.mul(.5*(o*o+o)),n)},e.prototype.calculateBonusScore=function(){c.default.DefaultInstance.SceneManager.GetController().score+=this.LaunchTries*this.lemmingBonusScore},__decorate([g],e.prototype,"tutorialLaunchAngle",void 0),__decorate([g],e.prototype,"tutorialLaunchSpeed",void 0),__decorate([g],e.prototype,"lemmingOnSlingShotExtendedOffset",void 0),__decorate([g],e.prototype,"maxLaunchTries",void 0),__decorate([g],e.prototype,"lemmingBonusScore",void 0),__decorate([g(cc.Node)],e.prototype,"SpawnPoint",void 0),__decorate([g(cc.Node)],e.prototype,"StartPointDummy",void 0),__decorate([g(cc.Node)],e.prototype,"EndPointDummy",void 0),__decorate([g(cc.Node)],e.prototype,"MaxPointDummy",void 0),__decorate([g],e.prototype,"MinInitialImpulse",void 0),__decorate([g],e.prototype,"MaxInitialImpulse",void 0),__decorate([g],e.prototype,"MaxRadius",void 0),__decorate([g([cc.Prefab])],e.prototype,"projectilePrefabs",void 0),__decorate([g],e.prototype,"isSpawningSingleObject",void 0),__decorate([g(i.default)],e.prototype,"slingshot",void 0),__decorate([g(cc.Camera)],e.prototype,"camera",void 0),__decorate([g],e.prototype,"maxAngle",void 0),__decorate([g(p.default)],e.prototype,"lemmingQueue",void 0),__decorate([g(cc.Animation)],e.prototype,"boostAnimation",void 0),__decorate([g(cc.Component.EventHandler)],e.prototype,"onLaunchTriesModified",void 0),__decorate([g({type:cc.AudioClip})],e.prototype,"slingshotClip",void 0),__decorate([g({type:cc.AudioClip})],e.prototype,"boosterClip",void 0),__decorate([g({type:cc.AudioClip})],e.prototype,"lowShotClip",void 0),__decorate([g({type:cc.AudioClip})],e.prototype,"highShotClip",void 0),__decorate([g({type:d.default})],e.prototype,"shotClips",void 0),e=__decorate([y,_("Controllers/LemmingsLauncherController")],e)}(cc.Component);o.default=O,cc._RF.pop()},{"../../CrabWare/AudioClipCollection":"AudioClipCollection","../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/Utils/MathUtils":"MathUtils","../BoosterSpeedEffect":"BoosterSpeedEffect","../BoosterSpreadEffect":"BoosterSpreadEffect","../Components/MultipleLemmingsProjectile":"MultipleLemmingsProjectile","../Components/SingleLemmingProjectile":"SingleLemmingProjectile","../Components/Slingshot":"Slingshot","../Components/TrajectoryMarker":"TrajectoryMarker","../GrizzyBirdsMaster":"GrizzyBirdsMaster","../LemmingQueue":"LemmingQueue","@gamestdio/mathf":1}],LevelBuilder:[function(t,e,o){"use strict";cc._RF.push(e,"7ee8dRonWFPHrja3HwIc7X9","LevelBuilder"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("../CrabWare/Components/PropertyLabel"),r=t("./Controllers/LemmingsLauncherController"),a=t("../CrabWare/Utils/MathUtils"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stageRoot=null,e.bgImages=[],e}return __extends(e,t),e.prototype.onLoad=function(){var t=n.default.DefaultInstance.GetConcreteState(),e=t.LevelPrefabs[t.StateContainer.currentLevel-1],o=cc.instantiate(e);this.stageRoot.addChild(o),o.name="Level_Root",o.getComponent(cc.Widget).enabled=!0;var s=o.children[0];if(o.removeChild(s,!1),this.stageRoot.addChild(s,0),this.stageRoot.removeChild(this.stageRoot.children[0]),o.setSiblingIndex(0),s.setSiblingIndex(0),a.isPositive(this.bgImages.length)){var c=cc.find("bg",o);if(c){var l=c.getComponent(cc.Sprite);if(l){var u=t.StateContainer.currentLevel%this.bgImages.length;l.spriteFrame=this.bgImages[u]}}}var p=cc.find("UI_Container/counter_container",this.stageRoot);if(null!=p){var d=p.getComponentInChildren(i.default),h=o.getComponentInChildren(r.default),f=new cc.Component.EventHandler;f.target=d.node,f.component="PropertyLabel",f.handler="setValue",h.onLaunchTriesModified=f}for(var m=cc.find("UI_Container",this.stageRoot),y=0;y<o.children.length;){var g=o.children[y];a.isNegative(g.name.indexOf("[UI]"))?++y:(o.removeChild(g),m.addChild(g))}},e.prototype.onDestroy=function(){},__decorate([l(cc.Node)],e.prototype,"stageRoot",void 0),__decorate([l({type:[cc.SpriteFrame]})],e.prototype,"bgImages",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../CrabWare/Components/PropertyLabel":"PropertyLabel","../CrabWare/Core/Maestro":"Maestro","../CrabWare/Utils/MathUtils":"MathUtils","./Controllers/LemmingsLauncherController":"LemmingsLauncherController"}],LevelButton:[function(t,e,o){"use strict";cc._RF.push(e,"76f824z+hFMcIFHV0PHFL3E","LevelButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../CrabWare/Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=0,c=0,l="stage_unlocked",u="stage_unlock",p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NeedStarsUpdate=!1,e.IsFreshlyUnlocked=!1,e.animation=null,e.starsCount=c,e.LevelNumber=s,e.IsLocked=!0,e.levelNumberLabel=null,e}return __extends(e,t),e.prototype.SetStars=function(t){n.default.log("Stars set to "+t+" On "+this.LevelNumber)},e.prototype.onLoad=function(){this.levelNumberLabel=this.getComponentInChildren(cc.Label),this.animation=this.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.UpdateButtonState=function(){if(this.IsFreshlyUnlocked)n.default.DefaultInstance.GetConcreteState().StateContainer.LevelsData.getValue(this.LevelNumber).IsFreshlyUnlocked=!1,this.IsFreshlyUnlocked=!1,n.default.log("set IsFreshlyUnlocked to false on level: "+this.LevelNumber),this.NeedStarsUpdate?(this.animation.play(u),this.scheduleOnce(this.UpdateButtonState,1)):this.animation.play(u),n.default.DefaultInstance.SceneManager.GetController().PlayUnlockedAudioEffect();else if(this.IsLocked)this.animation.play("stage_locked");else if(this.NeedStarsUpdate){switch(this.starsCount){case c:this.animation.play(l);break;case 1:this.animation.play("stage_star1");break;case 2:this.animation.play("stage_star2");break;case 3:this.animation.play("stage_star3")}n.default.DefaultInstance.GetConcreteState().StateContainer.LevelsData.getValue(this.LevelNumber).NeedsStarsUpdate=!1,n.default.log("set isFirstTimeSeen to false on level: "+this.LevelNumber)}else switch(this.starsCount){case c:this.animation.play(l);break;case 1:this.animation.play("iddle_star1");break;case 2:this.animation.play("iddle_star2");break;case 3:this.animation.play("iddle_star3")}this.levelNumberLabel.string=this.LevelNumber.toString()},e.prototype.goToGameplay=function(){this.IsLocked||n.default.DefaultInstance.SceneManager.GetController().selectLevel(this.LevelNumber)},__decorate([a(cc.Boolean)],e.prototype,"LevelNumber",void 0),__decorate([a(cc.Boolean)],e.prototype,"IsLocked",void 0),__decorate([a(cc.Label)],e.prototype,"levelNumberLabel",void 0),e=__decorate([r],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../CrabWare/Core/Maestro":"Maestro"}],LevelSelectController:[function(t,e,o){"use strict";cc._RF.push(e,"b7da8mz0k1EQYrtTbNpaIqN","LevelSelectController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../CrabWare/Core/Maestro"),i=t("../../../../CrabWare/Core/BaseSceneController"),r=t("./LevelButton"),a=t("../../../UIAudioClips"),s=t("../../../MusicPlayer"),c=t("../../../NodeHoverScaler"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unlockedLevelAudioEffect=null,e.hasUnlockedLevelPlayed=!1,e.targetPageView=null,e.LevelButtons=[],e.backButton=null,e.nextButton=null,e.confettiNode=null,e.confettiClip=null,e}return __extends(e,t),e.prototype.SceneEnter=function(){var t=s.default.instance;t&&!t.isPlayingMenu&&t.playMenuMusic(),n.default.log("enter on level_select");var e=n.default.DefaultInstance.GetConcreteState();e.StateContainer.currentLevel<=10?(this.targetPageView.scrollToPage(0,0),this.backButton.active=!1):(this.targetPageView.scrollToPage(1,0),this.nextButton.active=!1),e.StateContainer.AllLevelHasStars()&&!e.StateContainer.confettiAppeared&&(this.confettiNode&&(this.confettiNode.active=!0),this.confettiClip&&cc.audioEngine.playEffect(this.confettiClip,!1),e.StateContainer.confettiAppeared=!0,e.Save()),this.hasUnlockedLevelPlayed=!1},e.prototype.SceneExit=function(){n.default.log("exit on level_select"),n.default.DefaultInstance.GetConcreteState().Save(),this.hasUnlockedLevelPlayed=!1},e.prototype.start=function(){var t=this;this.updateLevelButtons();var e=this.targetPageView.node.getContentSize();this.targetPageView.node.on("page-turning",function(){var o=t.targetPageView.getCurrentPageIndex(),n=1;n=t.targetPageView.getPages().length-n,0===o?(t.backButton.active=!1,t.nextButton.active=!0):o===n?(t.nextButton.active=!1,t.backButton.active=!0):(t.backButton.active=!0,t.nextButton.active=!0),t.targetPageView.enabled||(t.targetPageView.enabled=!0),t.targetPageView.node.setContentSize(e)})},e.prototype.PlayUnlockedAudioEffect=function(){this.hasUnlockedLevelPlayed||(this.hasUnlockedLevelPlayed=!0,this.unlockedLevelAudioEffect&&cc.audioEngine.playEffect(this.unlockedLevelAudioEffect,!1))},e.prototype.updateLevelButtons=function(){this.LevelButtons.forEach(function(t){if(n.default.DefaultInstance.GetConcreteState().StateContainer.LevelsData.containsKey(t.LevelNumber)){var e;if(e=n.default.DefaultInstance.GetConcreteState().StateContainer.LevelsData.getValue(t.LevelNumber),t.starsCount=e.Stars,t.IsLocked=e.IsLocked,t.IsFreshlyUnlocked=e.IsFreshlyUnlocked,t.NeedStarsUpdate=e.NeedsStarsUpdate,t.UpdateButtonState(),!t.IsLocked){var o=t.node.getComponent(c.default);o&&(o.enabled=!0)}}})},e.prototype.selectLevel=function(t){this.playButtonSound();var e=n.default.DefaultInstance.GetConcreteState();e.StateContainer.currentLevel=t,e.StateContainer.LevelsData.getValue(t).MaxScore=0,n.default.DefaultInstance.SceneManager.ChangeScene("gameplay")},e.prototype.gotoMainMen=function(){this.playButtonSound(),n.default.DefaultInstance.SceneManager.ChangeScene("main")},e.prototype.gotoNextPage=function(){this.playButtonSound();var t=this.targetPageView.getPages().length-1,e=this.targetPageView.getCurrentPageIndex()+1,o=e>t?t:e;this.targetPageView.scrollToPage(o,1),o===t&&(this.nextButton.active=!1),this.backButton.active=!0,this.targetPageView.node.setContentSize(cc.Size.ZERO)},e.prototype.gotoPreviousPage=function(){this.playButtonSound();var t=this.targetPageView.getCurrentPageIndex()-1,e=t<0?0:t;this.targetPageView.scrollToPage(e,1),0===e&&(this.backButton.active=!1),this.nextButton.active=!0,this.targetPageView.node.setContentSize(cc.Size.ZERO)},e.prototype.playButtonSound=function(){var t=n.default.DefaultInstance.GetPersistentNode().getComponent(a.default);t&&t.playButtonClip()},__decorate([p({type:cc.AudioClip,visible:!0})],e.prototype,"unlockedLevelAudioEffect",void 0),__decorate([p(cc.PageView)],e.prototype,"targetPageView",void 0),__decorate([p([r.default])],e.prototype,"LevelButtons",void 0),__decorate([p(cc.Node)],e.prototype,"backButton",void 0),__decorate([p(cc.Node)],e.prototype,"nextButton",void 0),__decorate([p(cc.Node)],e.prototype,"confettiNode",void 0),__decorate([p({type:cc.AudioClip})],e.prototype,"confettiClip",void 0),e=__decorate([u],e)}(i.default);o.default=d,cc._RF.pop()},{"../../../../CrabWare/Core/BaseSceneController":"BaseSceneController","../../../../CrabWare/Core/Maestro":"Maestro","../../../MusicPlayer":"MusicPlayer","../../../NodeHoverScaler":"NodeHoverScaler","../../../UIAudioClips":"UIAudioClips","./LevelButton":"LevelButton"}],LoadingPopup:[function(t,e,o){"use strict";cc._RF.push(e,"be401o73zpCXowjW/ho2x7z","LoadingPopup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Components/PopupController"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingBar=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"loadingBarProgress",{get:function(){return this.loadingBar.progress},set:function(t){this.loadingBar.progress=t},enumerable:!0,configurable:!0}),__decorate([a(cc.ProgressBar)],e.prototype,"loadingBar",void 0),e=__decorate([r],e)}(n.default);o.default=s,cc._RF.pop()},{"../CrabWare/Components/PopupController":"PopupController"}],LocalizationAsset:[function(t,e,o){"use strict";cc._RF.push(e,"f61d6t2oRxLnYGx7BDTvfrs","LocalizationAsset"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(t){var e=this;this._key=t,this.getValue().then(function(t){t&&(e.target=t)})},enumerable:!0,configurable:!0}),e.prototype.getValue=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.localizationManager.getAsset(this.key,Object.getPrototypeOf(this.target).constructor)];case 1:return[2,t.sent()]}})})},e}(t("./LocalizationItem").default);o.default=n,cc._RF.pop()},{"./LocalizationItem":"LocalizationItem"}],LocalizationBindTextComponent:[function(t,e,o){"use strict";cc._RF.push(e,"2e905Ed3n9DwJklKv4H8Tc0","LocalizationBindTextComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationTextComponent"),i=t("./ExposedLocalizationBindText"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=t.call(this)||this;return e.localizationText=new i.default,e}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.localizationText.value},set:function(t){this.localizationText.value=t},enumerable:!0,configurable:!0}),__decorate([s({type:i.default,visible:!1,override:!0})],e.prototype,"localizationText",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"./ExposedLocalizationBindText":"ExposedLocalizationBindText","./LocalizationTextComponent":"LocalizationTextComponent"}],LocalizationBindText:[function(t,e,o){"use strict";cc._RF.push(e,"30cb5hGJRVMZpVftr3lTfV+","LocalizationBindText"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationText"),i=t("./Utils/MathUtils"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.replaceValues()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{set:function(t){this.textCache=t,this.replaceValues()},enumerable:!0,configurable:!0}),e.prototype.replaceValues=function(){var t=this;if(this.textCache)if(this._value)if("object"==typeof this._value){var e=this.textCache;Object.keys(this._value).forEach(function(o){e=t.replaceValue(e,o,t._value[o])}),this._text.string=e}else this._text.string=this.replaceValue(this.textCache,"value",this._value);else this._text.string=this.textCache},e.prototype.replaceValue=function(t,e,o){for(var n=new RegExp("(\\\\*)(\\$[\\{]("+e+")[\\}])","gm"),r=0,a=n.exec(t),s="";a;){if(i.isZero(a[1].length%2)){var c=a[0].length,l=a[1].length/2;s+=""+t.substr(r,a.index-r+l)+o.toString(),r=a.index+c}a=n.exec(t)}return s+=""+t.substr(r)},e}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationText":"LocalizationText","./Utils/MathUtils":"MathUtils"}],LocalizationImageComponent:[function(t,e,o){"use strict";cc._RF.push(e,"67ddbMv1otENbefkiHJPfHC","LocalizationImageComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./ExposedLocalizationImage"),i=t("./LocalizationManager"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.localizationImage=new n.default,e}return __extends(e,t),Object.defineProperty(e.prototype,"spriteComponent",{get:function(){return this.localizationImage.spriteComponent},set:function(t){this.localizationImage.spriteComponent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.localizationImage.key},set:function(t){this.localizationImage.key=t},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.spriteComponent||(this.spriteComponent=this.node.getComponent(cc.Sprite)),this.localizationImage.key=this.key},e.prototype.onEnable=function(){var t=i.default.instance;t&&t.subscribeItem(this.localizationImage)},e.prototype.onDisable=function(){var t=i.default.instance;t&&t.unsubscribeItem(this.localizationImage)},__decorate([s({type:n.default,visible:!1})],e.prototype,"localizationImage",void 0),__decorate([s({type:cc.Sprite})],e.prototype,"spriteComponent",null),__decorate([s({type:cc.String})],e.prototype,"key",null),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./ExposedLocalizationImage":"ExposedLocalizationImage","./LocalizationManager":"LocalizationManager"}],LocalizationImage:[function(t,e,o){"use strict";cc._RF.push(e,"23796UplEtJiaSjLP3e+F/v","LocalizationImage"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationAsset"),i=cc._decorator.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.sprite.spriteFrame},set:function(t){console.log("setting sprite frame"),this.sprite.spriteFrame=t},enumerable:!0,configurable:!0}),__decorate([i({type:cc.Sprite})],e.prototype,"sprite",void 0),e}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationAsset":"LocalizationAsset"}],LocalizationItem:[function(t,e,o){"use strict";cc._RF.push(e,"f106ffowAJPAYdv/PR/j+d9","LocalizationItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationManager"),i=cc._decorator.property,r=function(){function t(){this._key=""}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},set:function(t){this._key=t;var e=this.getValue();e&&this.checkEqualType(e)&&(this.target=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localizationManager",{get:function(){return n.default.instance},enumerable:!0,configurable:!0}),t.prototype.checkEqualType=function(t){return Object.getPrototypeOf(t)===Object.getPrototypeOf(this.target)},__decorate([i(cc.String)],t.prototype,"_key",void 0),t}();o.default=r,cc._RF.pop()},{"./LocalizationManager":"LocalizationManager"}],LocalizationManager:[function(t,e,o){"use strict";cc._RF.push(e,"d52619IicJA6ZcgRgKqWWbT","LocalizationManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Utils/MathUtils"),i=t("typescript-collections"),r=cc._decorator,a=r.ccclass,s=r.property,c={"[img]":{type:cc.SpriteFrame,extension:"png",transform:function(t){return t?(t instanceof HTMLImageElement?((e=new cc.Texture2D).initWithElement(t),console.log(e)):e=t,new cc.SpriteFrame(e)):null;var e}}},l=function(){function t(){this.font=null,this.locales=[]}return __decorate([s({type:cc.Font})],t.prototype,"font",void 0),__decorate([s({type:[cc.String]})],t.prototype,"locales",void 0),t=__decorate([a("FontLocale")],t)}(),u="en",p=function(t){function e(){var e=t.call(this)||this;return e._locale=u,e.localesFonts=[],e.localizationItems=[],e.localeData={},e.localeAssetCache=new i.Dictionary,window.localizationCode&&(e._locale=window.localizationCode),e}var o;return __extends(e,t),o=e,Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale=t,this.changeLocale()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeFont",{get:function(){return this.getFont(this._locale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultFont",{get:function(){return this.getFont(u)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return o.lm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeStr",{get:function(){return this.locale},enumerable:!0,configurable:!0}),e.prototype.subscribeItem=function(t){n.isNegative(this.localizationItems.indexOf(t))&&this.localizationItems.push(t)},e.prototype.unsubscribeItem=function(t){var e=this.localizationItems.indexOf(t);n.isNegative(e)||this.localizationItems.splice(e,1)},e.prototype.getString=function(t){var e=this.localeData[t];return e?e[this.localeStr]:null},e.prototype.getAsset=function(t,e,o,n){var i=this;return void 0===e&&(e=null),new Promise(function(e,r){if(i.localeAssetCache.containsKey(t))e(i.localeAssetCache.getValue(t));else{var a=i.getString(t);a&&cc.loader.load("localization/assets/"+a+"."+o,function(o,r){if(o)console.error(o);else if(n){var a=n(r);i.localeAssetCache.setValue(t,a),e(a)}else i.localeAssetCache.setValue(t,r),e(r)})}})},e.prototype.changeLocale=function(){this.localeAssetCache.clear(),this.preloadAssets(),this.updateAllItems()},e.prototype.preloadAssets=function(){var t=this;this.localeData&&Object.keys(this.localeData).forEach(function(e){if(n.isZero(e.indexOf("["))){for(var o,i=Object.keys(c),r=0;r<i.length;++r)if(n.isZero(e.indexOf(i[r]))){o=c[i[r]];break}t.getAsset(e,o.type,o.extension,o.transform)}})},e.prototype.updateAllItems=function(){var t=this;this.localizationItems.forEach(function(e){if(e.target instanceof cc.Asset){var o=t.getAsset(e.key,Object.getPrototypeOf(e.target).constructor);o&&o.then(function(t){e.target=t})}else{var n=t.getString(e.key);n&&(e.target=n)}})},e.prototype.getFont=function(t){for(var e=0;e<this.localesFonts.length;++e){var o=this.localesFonts[e];if(-1!=o.locales.indexOf(t))return o.font}return null},e.prototype.onLoad=function(){var t=this;o.lm&&o.lm.node?this.destroy():(o.lm=this,cc.loader.load.bind(cc.loader)("localization/localization.json",function(e,o){e?console.error(e):(o instanceof cc.JsonAsset?t.localeData=o.json:t.localeData=o,t.changeLocale())}))},e.lm=null,__decorate([s({type:[l]})],e.prototype,"localesFonts",void 0),e=o=__decorate([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Utils/MathUtils":"MathUtils","typescript-collections":28}],LocalizationTextComponent:[function(t,e,o){"use strict";cc._RF.push(e,"7dbc0dAYyRLcJR6sjtfLOAE","LocalizationTextComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./ExposedLocalizationText"),i=t("./LocalizationManager"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._overrideFont=!0,e.localizationText=new n.default,e}return __extends(e,t),Object.defineProperty(e.prototype,"textComponent",{get:function(){return this.localizationText.textComponent},set:function(t){this.localizationText.textComponent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.localizationText.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.localizationText.key},set:function(t){this.localizationText.key=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overrideFont",{get:function(){return this._overrideFont},set:function(t){this._overrideFont!==t&&(this._overrideFont=t),this.swapFont(t)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.textComponent||(this.textComponent=this.node.getComponent(cc.Label)),this.localizationText.key=this.key,this.swapFont(this._overrideFont)},e.prototype.onEnable=function(){var t=i.default.instance;t&&t.subscribeItem(this.localizationText)},e.prototype.onDisable=function(){var t=i.default.instance;t&&t.unsubscribeItem(this.localizationText)},e.prototype.swapFont=function(t){var e,o=i.default.instance;o&&((e=t?o.localeFont:o.defaultFont)&&(this.textComponent.font=e))},__decorate([s({visible:!0})],e.prototype,"_overrideFont",void 0),__decorate([s({type:n.default,visible:!1})],e.prototype,"localizationText",void 0),__decorate([s({type:cc.Label})],e.prototype,"textComponent",null),__decorate([s({type:cc.String})],e.prototype,"key",null),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./ExposedLocalizationText":"ExposedLocalizationText","./LocalizationManager":"LocalizationManager"}],LocalizationText:[function(t,e,o){"use strict";cc._RF.push(e,"f5d8cVxoFxBV4DQLOmt6Xf7","LocalizationText"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LocalizationItem"),i=cc._decorator.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._text=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._text.string},set:function(t){this._text.string=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.target},enumerable:!0,configurable:!0}),e.prototype.checkEqualType=function(t){return typeof t==typeof this.target},e.prototype.getValue=function(){return this.localizationManager.getString(this.key)},__decorate([i({type:cc.Label})],e.prototype,"_text",void 0),e}(n.default);o.default=r,cc._RF.pop()},{"./LocalizationItem":"LocalizationItem"}],Maestro:[function(t,e,o){"use strict";cc._RF.push(e,"86455QD8p5N+qfpnllgZX4H","Maestro"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Singleton"),i=t("../Utils/SceneManager"),r=t("../Utils/GameState"),a=t("./CrabWareSettings"),s=t("ste-signals"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameState=null,e.SceneManager=null,e.onFocus=new s.SignalDispatcher,e.onBlur=new s.SignalDispatcher,e.onOrientationChange=new s.SignalDispatcher,e.focusLost=!1,e}var o;return __extends(e,t),o=e,e.prototype.GetConcreteState=function(){return this.GameState},e.prototype.GetConcreteMaestro=function(){return o.DefaultInstance},Object.defineProperty(e,"DefaultInstance",{get:function(){return o.GetInstance(o)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"screenOrientation",{get:function(){return(screen.orientation||{angle:~~window.orientation}).angle},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLandscape",{get:function(){var t=cc.game.frame;return console.log(t.clientWidth+" - "+t.clientHeight),t.clientWidth>=t.clientHeight},enumerable:!0,configurable:!0}),e.log=function(t){0},e.prototype.GetPersistentNode=function(){return cc.find(a.default.DEFAULT_ROOT_NODE_NAME)},e.prototype.subscribeOnFocusEvent=function(t){this.onFocus.subscribe(t)},e.prototype.unsubscribeOnFocusEvent=function(t){this.onFocus.unsubscribe(t)},e.prototype.subscribeOnBlurEvent=function(t){this.onBlur.subscribe(t)},e.prototype.unsubscribeOnBlurEvent=function(t){this.onBlur.unsubscribe(t)},e.prototype.subscribeOnOrientationChangeEvent=function(t){this.onOrientationChange.subscribe(t)},e.prototype.unsubscribeOnOrientationChangeEvent=function(t){this.onOrientationChange.unsubscribe(t)},Object.defineProperty(e.prototype,"realTimeElapsed",{get:function(){return(new Date).getTime()-this._realTimeStartTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realTimeStartTimestamp",{get:function(){return this._realTimeStartTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inGameElapsed",{get:function(){return(new Date).getTime()-this._inGameStartTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inGameStartTimestamp",{get:function(){return this._inGameStartTimestamp},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this._realTimeStartTimestamp=(new Date).getTime(),this._inGameStartTimestamp=this._realTimeStartTimestamp;var n=-1;window.onfocus=function(){if(o.log("[WINDOW] focus"),cc.audioEngine.resumeAll(),cc.director.getScene().getComponentsInChildren(cc.AudioSource).forEach(function(t){t.resume()}),cc.game.resume(),-1!=n){var t=(new Date).getTime()-n;e._inGameStartTimestamp+=t,n=-1}e.onFocus.dispatch(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){e.focusLost=!1,e.beforeBlurOrientation!=o.screenOrientation&&cc.view.emit("canvas-resize")})},window.onblur=function(){o.log("[WINDOW] blur"),cc.audioEngine.pauseAll(),cc.director.getScene().getComponentsInChildren(cc.AudioSource).forEach(function(t){t.pause()}),e.onBlur.dispatch(),n=(new Date).getTime(),e.beforeBlurOrientation=o.screenOrientation,cc.game.pause(),e.focusLost=!0},cc.sys.isMobile&&cc.view.on("canvas-resize",function(){e.focusLost||(o.isLandscape?(cc.game.resume(),cc.audioEngine.resumeAll(),cc.director.getScene().getComponentsInChildren(cc.AudioSource).forEach(function(t){t.resume()}),e.onOrientationChange.dispatch(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){e.onFocus.dispatch()})):(cc.audioEngine.pauseAll(),cc.director.getScene().getComponentsInChildren(cc.AudioSource).forEach(function(t){t.pause()}),e.onOrientationChange.dispatch(),e.onBlur.dispatch(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){cc.game.pause()})))},this)},__decorate([u(r.default)],e.prototype,"GameState",void 0),__decorate([u(i.default)],e.prototype,"SceneManager",void 0),e=o=__decorate([l,p("CrabWare/Core/Maestro")],e)}(n.default);o.default=d,cc._RF.pop()},{"../Utils/GameState":"GameState","../Utils/SceneManager":"SceneManager","./CrabWareSettings":"CrabWareSettings","./Singleton":"Singleton","ste-signals":8}],MainMenuController:[function(t,e,o){"use strict";cc._RF.push(e,"ef61d9dVmFJSb9svSfujTXW","MainMenuController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../CrabWare/Core/Maestro"),i=t("../../../../CrabWare/Core/BaseSceneController"),r=t("../../../UIAudioClips"),a=t("../../../MusicPlayer"),s=cc._decorator,c=s.ccclass,l=s.property,u=["in_tab","out_tab"],p=0,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PausePopup=null,e.mainTarget=null,e.playTarget=null,e.settingsAnimation=null,e.settingsButton=null,e.animationIndex=p,e}return __extends(e,t),e.prototype.SceneEnter=function(){var t=a.default.instance;t&&!t.isPlayingMenu&&t.playMenuMusic(),n.default.log("enter on main_menu"),n.default.DefaultInstance.GetConcreteState().LoadOrCreate();var e=n.default.DefaultInstance.GetConcreteState();null==cc.sys.localStorage.getItem(e.GetPersistentKey("saveVersion"))?(e.ResetState(),e.Save()):e.Load()},e.prototype.SceneExit=function(){n.default.log("exit on main_menu")},e.prototype.stopLoopAnimation=function(){this.playTarget.getComponent("cc.Animation").stop("play_loop")},e.prototype.playLoopAnimation=function(){this.playTarget.getComponent("cc.Animation").play("play_loop")},e.prototype.showSettings=function(){if(this.settingsAnimation){var t=n.default.DefaultInstance.GetPersistentNode().getComponent(r.default);t&&t.playButtonClip(),this.settingsAnimation.play(u[this.animationIndex]),this.animationIndex=this.animationIndex===p?1:p}},e.prototype.onInAnimationEnd=function(){this.settingsButton.enabled=!0,this.playLoopAnimation()},e.prototype.onOutAnimationEnd=function(){n.default.DefaultInstance.GetConcreteState().StateContainer.shouldDisplayComic?n.default.DefaultInstance.SceneManager.ChangeScene("comic"):n.default.DefaultInstance.SceneManager.ChangeScene("level_select")},e.prototype.gotoLevelSelect=function(){this.mainTarget.getComponent(cc.Animation).play("mm_out"),this.playTarget.getComponentInChildren(cc.Button).enabled=!1,this.hideSettings(),this.settingsButton.enabled=!1;var t=n.default.DefaultInstance.GetPersistentNode().getComponent(r.default);t&&t.playButtonClip()},e.prototype.hideSettings=function(){1===this.animationIndex&&(this.settingsAnimation.play(u[this.animationIndex]),this.animationIndex=p)},__decorate([l(cc.Node)],e.prototype,"mainTarget",void 0),__decorate([l(cc.Node)],e.prototype,"playTarget",void 0),__decorate([l(cc.Animation)],e.prototype,"settingsAnimation",void 0),__decorate([l(cc.Button)],e.prototype,"settingsButton",void 0),e=__decorate([c],e)}(i.default);o.default=d,cc._RF.pop()},{"../../../../CrabWare/Core/BaseSceneController":"BaseSceneController","../../../../CrabWare/Core/Maestro":"Maestro","../../../MusicPlayer":"MusicPlayer","../../../UIAudioClips":"UIAudioClips"}],MathUtils:[function(t,e,o){"use strict";cc._RF.push(e,"30592ohJmpHI7MU9UJe7WZ3","MathUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=Math.cos,i=Math.sin,r=Math.PI,a=function(t){return t*r/180};o.cosd=function(t){return n(a(t))},o.sind=function(t){return i(a(t))},o.remap=function(t,e,o,n,i){return n+(t-e)/(o-e)*(i-n)},o.isPositive=function(t){return t>0},o.isNegative=function(t){return t<0},o.isZero=function(t){return 0===t},o.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},o.randomFloatFromInterval=function(t,e){return Math.random()*(e-t+1)+t},o.randomWeightedBoolean=function(t){return Math.random()<t},o.randomBoolean=function(){return o.randomWeightedBoolean(.5)},o.numberChecks={ifPositive:function(t,e){return void 0===e&&(e=!0),new Promise(function(o,n){t>0&&e?o():n()})},ifNegative:function(t,e){return void 0===e&&(e=!0),new Promise(function(o,n){t<0&&e?o():n()})},ifZero:function(t,e){return void 0===e&&(e=!0),new Promise(function(o,n){0===t&&e?o():n()})}},cc._RF.pop()},{}],MultipleLemmingsProjectile:[function(t,e,o){"use strict";cc._RF.push(e,"4a49eW6OsBEtLj2lpFVenx8","MultipleLemmingsProjectile"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Components/PhysicsProjectile"),i=t("../../CrabWare/Core/Maestro"),r=cc._decorator,a=r.ccclass,s=r.property,c=500,l=2e3,u=.1,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSplit=!1,e.TrajectoryMarkerSpawnRate=u,e.TrajectoryMarkerPrefab=null,e.SpawneableObject=null,e.spreadActivationClip=null,e.minDisperseTime=c,e.maxDisperseTime=l,e}return __extends(e,t),e.prototype.start=function(){var t=this;i.default.DefaultInstance.SceneManager.GetController().OnLemmingLaunched(),this.spawnTrajectoryMarker(),this.schedule(this.spawnTrajectoryMarker,this.TrajectoryMarkerSpawnRate),this.maxDisperseTime<0?(this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onInputDown,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onInputDown,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputUp,this)):(this.scheduleOnce(this.SpawnSubLemmings,this.maxDisperseTime/1e3),this.scheduleOnce(this.DestroyNode,this.MaxLifetime/1e3),i.default.log(this.SpawneableObject),i.default.log(this.MaxLifetime/1e3));this.scheduleOnce(function(){t.node.group="gameplay-lemmings",t.node.getComponentsInChildren(cc.PhysicsCollider).forEach(function(t){t.apply()})},.12)},e.prototype.onInputDown=function(t){this.maxDisperseTime=-2,t.stopPropagation()},e.prototype.onInputUp=function(t){-2==this.maxDisperseTime&&(this.maxDisperseTime=-1,this.hasSplit||(this.hasSplit=!0,this.SpawnSubLemmings(),this.DestroyNode())),t.stopPropagation()},e.prototype.onBeginContact=function(e,o,n){t.prototype.onBeginContact.call(this,e,o,n),"gameplay-boosters"!==n.node.group&&this.maxDisperseTime<0&&(this.hasSplit||(this.hasSplit=!0,this.SpawnSubLemmings(),this.DestroyNode()))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);this.scheduleOnce(function(){i.default.DefaultInstance.SceneManager.GetController().OnLemmingDestroyed()},0)},e.prototype.DestroyNode=function(){this.node.destroy();var t=i.default.DefaultInstance.SceneManager.GetController();t&&t.removeBooster()},e.prototype.SpawnSubLemmings=function(){this.SpawnSingleLemmings(new cc.Vec2(0,100));var t=this.SpawnSingleLemmings(cc.Vec2.ZERO);this.SpawnSingleLemmings(new cc.Vec2(0,-100)),t.getComponent(n.default).onDestroyCallback=this.onChildDestroy;var e=this.onDestroyCallback;this.onDestroyCallback=function(){return e(t)},this.spreadActivationClip&&cc.audioEngine.playEffect(this.spreadActivationClip,!1)},e.prototype.SpawnSingleLemmings=function(t){if(this.SpawneableObject){var e=cc.instantiate(this.SpawneableObject);return e.getComponent(cc.RigidBody).linearVelocity=this.getComponent(cc.RigidBody).linearVelocity.add(t),e.setPosition(this.node.position),this.node.parent.addChild(e),e}return null},e.prototype.spawnTrajectoryMarker=function(){var t=cc.instantiate(this.TrajectoryMarkerPrefab),e=this.node.convertToWorldSpace(this.node.position),o=this.node.convertToNodeSpace(e);t.position=o,t.zIndex=cc.macro.MIN_ZINDEX,this.node.parent.addChild(t)},__decorate([s],e.prototype,"TrajectoryMarkerSpawnRate",void 0),__decorate([s(cc.Prefab)],e.prototype,"TrajectoryMarkerPrefab",void 0),__decorate([s({type:cc.SpriteFrame}),s(cc.Prefab)],e.prototype,"SpawneableObject",void 0),__decorate([s({type:cc.AudioClip})],e.prototype,"spreadActivationClip",void 0),__decorate([s],e.prototype,"minDisperseTime",void 0),__decorate([s],e.prototype,"maxDisperseTime",void 0),e=__decorate([a],e)}(n.default);o.default=p,cc._RF.pop()},{"../../CrabWare/Components/PhysicsProjectile":"PhysicsProjectile","../../CrabWare/Core/Maestro":"Maestro"}],MusicPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"80457uMsaNFQIlK+7Y7uNbS","MusicPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=function(){function t(){if(this.menuMusic=null,this.gameplayMusic=null,this.currentPlayingMusicId=null,this.currentlyPlaying=null,Audio){var t=new Audio;"probably"===("probably"!=t.canPlayType('audio/ogg; codecs="opus"')?t.canPlayType('audio/ogg; codecs="vorbis"'):"probably")?(n.default.log("OGG test passed - OGG files selected"),this.loadOgg()):(n.default.log("Fallback audio file format to be used - MP3 files selected"),this.loadMp3())}}return Object.defineProperty(t,"instance",{get:function(){return this._i||(this._i=new t),this._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingMenu",{get:function(){return this.currentlyPlaying===this.menuMusic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingGameplay",{get:function(){return this.currentlyPlaying===this.gameplayMusic},enumerable:!0,configurable:!0}),t.prototype.playMenuMusic=function(){this.currentPlayingMusicId,this.currentlyPlaying=this.menuMusic,this.currentPlayingMusicId=cc.audioEngine.playMusic(this.menuMusic,!0)},t.prototype.playGameplayMusic=function(){this.currentPlayingMusicId,this.currentlyPlaying=this.gameplayMusic,this.currentPlayingMusicId=cc.audioEngine.playMusic(this.gameplayMusic,!0)},t.prototype.stopCurrentMusic=function(){cc.audioEngine.stopMusic(),this.currentPlayingMusicId=null},t.prototype.loadOgg=function(){var t=this;cc.loader.loadRes("Music/ogg/music_gameplay",cc.AudioClip,function(e,o){e?console.error(e):(t.gameplayMusic=o,n.default.log("OGG - Gameplay music loaded"))}),cc.loader.loadRes("Music/ogg/music_menu",cc.AudioClip,function(e,o){e?console.error(e):(t.menuMusic=o,n.default.log("OGG - Menu music loaded"))})},t.prototype.loadMp3=function(){var t=this;cc.loader.loadRes("Music/mp3/music_gameplay",cc.AudioClip,function(e,o){e?console.error(e):(t.gameplayMusic=o,n.default.log("MP3 - Gameplay music loaded"))}),cc.loader.loadRes("Music/mp3/music_menu",cc.AudioClip,function(e,o){e?console.error(e):(t.menuMusic=o,n.default.log("MP3 - Menu music loaded"))})},t}();o.default=i,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro"}],NodeHoverScaler:[function(t,e,o){"use strict";cc._RF.push(e,"c2a4fYLa7FE6pDKcm8misWN","NodeHoverScaler"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.menu,c=1.2,l=.1,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zoomScale=c,e.duration=l,e.fromScale=cc.Vec2.ZERO,e.toScale=cc.Vec2.ZERO,e.hovered=!1,e.transitionFinished=!1,e}return __extends(e,t),e.prototype.onMouseMoveIn=function(){this.enabledInHierarchy&&(this.hovered||(this.hovered=!0,this.zoomIn()))},e.prototype.onMouseMoveOut=function(){this.hovered&&(this.hovered=!1,this.zoomOut())},e.prototype.zoomIn=function(){this.fromScale.x=this.originalScale.x,this.fromScale.y=this.originalScale.y,this.toScale.x=this.originalScale.x*this.zoomScale,this.toScale.y=this.originalScale.y*this.zoomScale,this.time=0,this.transitionFinished=!1},e.prototype.zoomOut=function(){this.fromScale.x=this.node.scaleX,this.fromScale.y=this.node.scaleY,this.toScale.x=this.originalScale.x,this.toScale.y=this.originalScale.y,this.time=0,this.transitionFinished=!1},e.prototype.onLoad=function(){this.originalScale=new cc.Vec2(this.node.scaleX,this.node.scaleY),this.transitionFinished=!0},e.prototype.update=function(t){if(!this.transitionFinished){this.time+=t;var e=1;n.isPositive(this.duration)&&(e=this.time/this.duration)>1&&(e=1);var o=this.fromScale.lerp(this.toScale,e);this.node.scaleX=o.x,this.node.scaleY=o.y,1==e&&(this.transitionFinished=!0)}},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseMoveIn,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseMoveOut,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseMoveOut,this)},__decorate([a],e.prototype,"zoomScale",void 0),__decorate([a({range:[0,10]})],e.prototype,"duration",void 0),e=__decorate([r,s("NodeStuff/NodeHoverScaler")],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../CrabWare/Utils/MathUtils":"MathUtils"}],NodeRatioPositioner:[function(t,e,o){"use strict";cc._RF.push(e,"cb42750MVBKr6oZXGdrkqo0","NodeRatioPositioner"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=1,s=0,c=function(){function t(){this.size=new cc.Size(a,a),this.position=new cc.Vec2(s,s)}return Object.defineProperty(t.prototype,"ratio",{get:function(){return this.size.width/this.size.height},enumerable:!0,configurable:!0}),__decorate([r(cc.Size)],t.prototype,"size",void 0),__decorate([r(cc.Vec2)],t.prototype,"position",void 0),t=__decorate([i("RatioPosItem")],t)}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ratioScaleItem=new c,e}return __extends(e,t),e.prototype.updatePosition=function(){var t=cc.view.getCanvasSize(),e=t.width/t.height,o=cc.view.getDesignResolutionSize(),n=o.width/o.height;if(e<n){var i=(this.defaultPos.x-this.ratioScaleItem.position.x)/(n-this.ratioScaleItem.ratio),r=i*(e-this.ratioScaleItem.ratio)+this.ratioScaleItem.position.x,a=(i=(this.defaultPos.y-this.ratioScaleItem.position.y)/(n-this.ratioScaleItem.ratio))*(e-this.ratioScaleItem.ratio)+this.ratioScaleItem.position.y,s=new cc.Vec2(r,a);this.node.position.equals(s)||(this.node.position=s)}else this.node.position.equals(this.defaultPos)||(this.node.position=this.defaultPos)},e.prototype.start=function(){this.defaultPos=this.node.position},e.prototype.lateUpdate=function(){this.updatePosition()},__decorate([r(c)],e.prototype,"ratioScaleItem",void 0),e=__decorate([i],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],NodeRatioScaler:[function(t,e,o){"use strict";cc._RF.push(e,"55aa3mG6dhNkpY9Q/nkkEaT","NodeRatioScaler"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=1,c=1,l=function(){function t(){this.size=new cc.Size(c,c),this.scale=s}return Object.defineProperty(t.prototype,"ratio",{get:function(){return this.size.width/this.size.height},enumerable:!0,configurable:!0}),__decorate([a(cc.Size)],t.prototype,"size",void 0),__decorate([a(cc.Float)],t.prototype,"scale",void 0),t=__decorate([r("RatioScaleItem")],t)}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ratioScaleItem=new l,e.getScaleUsingCurrentRatio=!1,e}return __extends(e,t),e.prototype.updateScale=function(){var t=cc.view.getCanvasSize(),e=t.width/t.height,o=cc.view.getDesignResolutionSize(),i=o.width/o.height;if(e<i){var r=void 0;if(this.getScaleUsingCurrentRatio)r=e/i;else r=(s-this.ratioScaleItem.scale)/(i-this.ratioScaleItem.ratio)*(e-this.ratioScaleItem.ratio)+this.ratioScaleItem.scale;r!==this.node.scaleX&&(this.node.scaleX=r,this.node.scaleY=r,n.default.log("Ratio: "+e+" - Scale: "+r))}else c!==this.node.scaleX&&(this.node.scaleX=c,this.node.scaleY=c)},e.prototype.start=function(){},e.prototype.lateUpdate=function(){this.updateScale()},__decorate([a(l)],e.prototype,"ratioScaleItem",void 0),__decorate([a],e.prototype,"getScaleUsingCurrentRatio",void 0),e=__decorate([r],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Core/Maestro":"Maestro"}],NoiseGeneratorPickup:[function(t,e,o){"use strict";cc._RF.push(e,"3592bhDE1pHprSNTYTPEiNr","NoiseGeneratorPickup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("./BasePickup"),r=cc._decorator,a=r.ccclass,s=r.property,c=1,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.awakeningValue=c,e}return __extends(e,t),e.prototype.onBeginContact=function(){n.default.DefaultInstance.SceneManager.GetController().destroyClock(),t.prototype.onBeginContact.call(this)},e.prototype.start=function(){n.default.DefaultInstance.SceneManager.GetController().createClock(),t.prototype.start.call(this)},__decorate([s],e.prototype,"awakeningValue",void 0),e=__decorate([a],e)}(i.default);o.default=l,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","./BasePickup":"BasePickup"}],NoiseGenerator:[function(t,e,o){"use strict";cc._RF.push(e,"10a69WfGj1KtLlc1eDqmNQM","NoiseGenerator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("./Components/StructureUnit"),r=t("../CrabWare/Utils/MathUtils"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDestroyed=!1,e.destroyAnimationName="OUT_",e.animation=null,e.singlePlaybackDestroyClip=null,e}var o;return __extends(e,t),o=e,e.prototype.onHpReachedZero=function(){var e=this;if(!this.isDestroyed){this.isDestroyed=!0,n.default.DefaultInstance.SceneManager.GetController().destroyClock();if(-1===o.singlePlaybackTracker.indexOf(this.singlePlaybackDestroyClip)&&this.singlePlaybackDestroyClip){cc.audioEngine.playEffect(this.singlePlaybackDestroyClip,!1);var i=o.singlePlaybackTracker.push(this.singlePlaybackDestroyClip);window.setTimeout(function(){var t=o.singlePlaybackTracker.indexOf(e.singlePlaybackDestroyClip);o.singlePlaybackTracker.splice(t,1)},1e3*cc.audioEngine.getDuration(i))}var r=this.destroyClips.randomClip;if(r&&cc.audioEngine.playEffect(r,!1),this.animation){this.animation.play(this.destroyAnimationName);var a=this.node.getComponentsInChildren(cc.PhysicsCollider),s=this.node.getComponent(cc.RigidBody);a.forEach(function(t){t.destroy()}),s.destroy()}else t.prototype.onHpReachedZero.call(this)}},e.prototype.getScore=function(){var t=0;return(r.isZero(this.hp)||r.isNegative(this.hp))&&(t=this.score),t},e.prototype.onBeginContact=function(e,o,n){"Bounds"===n.node.name?(this.hp=0,i.default.gameplayController.score+=this.getScore()):t.prototype.onBeginContact.call(this,e,o,n)},e.prototype.start=function(){var e=this;this.animation||(this.animation=this.getComponent(cc.Animation),this.animation||(this.animation=this.getComponentInChildren(cc.Animation))),this.animation&&this.animation.on("finished",function(){e.animation.currentClip.name===e.destroyAnimationName&&e.node.destroy()}),n.default.DefaultInstance.SceneManager.GetController().createClock(),this.scoreStyleKey="noise",t.prototype.start.call(this)},e.singlePlaybackTracker=[],__decorate([c],e.prototype,"destroyAnimationName",void 0),__decorate([c],e.prototype,"animation",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"singlePlaybackDestroyClip",void 0),e=o=__decorate([s],e)}(i.default);o.default=l,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","../CrabWare/Utils/MathUtils":"MathUtils","./Components/StructureUnit":"StructureUnit"}],ObjectPool:[function(t,e,o){"use strict";cc._RF.push(e,"afa15jfmmhK0ozy6dGa7OcO","ObjectPool"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=0,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.objectPrefab=null,e._inUseObjectsCount=a,e}return __extends(e,t),Object.defineProperty(e.prototype,"inUseObjectCount",{get:function(){return this._inUseObjectsCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"areAllObjectsInUse",{get:function(){return this.inUseObjectCount==this.objectPoolCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectPool",{get:function(){return this.node.children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectPoolCount",{get:function(){return this.node.childrenCount},enumerable:!0,configurable:!0}),e.prototype.getObject=function(){return this.areAllObjectsInUse?null:this.getExistingObject()},e.prototype.getObjectSafe=function(){return this.areAllObjectsInUse?this.instantiateAndUseNewObject():this.getExistingObject()},e.prototype.returnObject=function(t){t&&(this.returnToUnusedPool(t),t.active=!1,--this._inUseObjectsCount)},e.prototype.returnAllObject=function(){for(;0<this.inUseObjectCount;)this.returnObject(this.objectPool[0])},e.prototype.returnToUnusedPool=function(t){t.setSiblingIndex(this.inUseObjectCount)},e.prototype.addToPool=function(t){this.node.addChild(t)},e.prototype.getExistingObject=function(){var t=this.inUseObjectCount,e=this.objectPool[t];return e.active=this.objectPrefab.data.active,++this._inUseObjectsCount,e},e.prototype.instantiateAndUseNewObject=function(){return++this._inUseObjectsCount,this.instantiateNewObject()},e.prototype.instantiateNewObject=function(){var t=this,e=cc.instantiate(this.objectPrefab);return this.addToPool(e),e.destroy=function(){return t.nodeDestroy(e),!1},e},e.prototype.nodeDestroy=function(t){this.returnObject(t)},__decorate([r(cc.Prefab)],e.prototype,"objectPrefab",void 0),e=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],OrientationPopup:[function(t,e,o){"use strict";cc._RF.push(e,"6d682mKNrFP7JgJkR/2QKao","OrientationPopup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Components/PopupController"),i=t("../CrabWare/Core/Maestro"),r=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),cc.sys.isMobile?(i.default.isLandscape&&this.close(),this.showOnOrientationChange=function(){i.default.isLandscape?e.close():e.show()},i.default.DefaultInstance.subscribeOnOrientationChangeEvent(this.showOnOrientationChange)):this.node.destroy()},e.prototype.onDestroy=function(){i.default.DefaultInstance.unsubscribeOnOrientationChangeEvent(this.showOnOrientationChange)},e=__decorate([r],e)}(n.default);o.default=a,cc._RF.pop()},{"../CrabWare/Components/PopupController":"PopupController","../CrabWare/Core/Maestro":"Maestro"}],PausePopupController:[function(t,e,o){"use strict";cc._RF.push(e,"ac02dMCxgdMCJa7GsH/FkpI","PausePopupController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Components/PopupController"),i=t("./ConfirmPopupController"),r=t("../../CrabWare/Utils/MathUtils"),a=t("../../CrabWare/Core/Maestro"),s=t("../UIAudioClips"),c=cc._decorator,l=c.ccclass,u=c.property,p=1e3,d=function(t){function e(){var e=t.call(this)||this;return e.confirmationPopup=null,e.onRestart=null,e.onQuit=null,e.pauseAnimationManager=new cc.AnimationManager,e.intervalHandler=null,e.onFocus=function(){null===e.intervalHandler&&(e.intervalHandler=window.setInterval(function(){e.pseudoUpdate()},p/cc.game.getFrameRate()))},e.onBlur=function(){clearInterval(e.intervalHandler),e.intervalHandler=null},e}return __extends(e,t),e.prototype.showConfirmRestart=function(){this.playButtonSound(),this.playPopupSound();this.confirmationPopup.textKey="restart_confirmation",this.confirmationPopup.acceptCallback[0]=this.onRestart,this.confirmationPopup.show()},e.prototype.showConfirmQuit=function(){this.playButtonSound(),this.playPopupSound();this.confirmationPopup.textKey="quit_confirmation",this.confirmationPopup.acceptCallback[0]=this.onQuit,this.confirmationPopup.show()},e.prototype.startPauseUpdate=function(){var t=this;a.default.DefaultInstance.subscribeOnFocusEvent(this.onFocus),a.default.DefaultInstance.subscribeOnBlurEvent(this.onBlur),null===this.intervalHandler&&(this.intervalHandler=window.setInterval(function(){t.pseudoUpdate()},p/cc.game.getFrameRate())),this.defaultAnimationManager=cc.director._animationManager,cc.director._animationManager=this.pauseAnimationManager,this.node.active=!0,this.pseudoUpdate()},e.prototype.endPauseUpdate=function(){a.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),a.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur),cc.director._animationManager=this.defaultAnimationManager,clearInterval(this.intervalHandler),this.intervalHandler=null},e.prototype.pseudoUpdate=function(){var e,o=1e3/cc.game.getFrameRate();(e=this.node.getComponents(cc.Component)).push.apply(e,this.node.getComponentsInChildren(cc.Component)),e.forEach(function(t){t.start&&r.isZero(65536&t._objFlags)&&(t._objFlags|=65536,t.start())}),e.forEach(function(t){t.update&&t.update(o),t instanceof cc.Widget&&t.updateAlignment()}),cc.director.getAnimationManager().update(o/p),t.prototype.lateUpdate.call(this),e.forEach(function(t){t.lateUpdate&&t.lateUpdate()})},e.prototype.onDestroy=function(){a.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),a.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur),cc.director.isPaused()&&(cc.director.resume(),cc.director._animationManager=this.defaultAnimationManager,clearInterval(this.intervalHandler),this.intervalHandler=null)},e.prototype.playButtonSound=function(){var t=a.default.DefaultInstance.GetPersistentNode().getComponent(s.default);t&&t.playButtonClip()},e.prototype.playPopupSound=function(){var t=a.default.DefaultInstance.GetPersistentNode().getComponent(s.default);t&&t.playPopupClip()},__decorate([u(i.default)],e.prototype,"confirmationPopup",void 0),__decorate([u(cc.Component.EventHandler)],e.prototype,"onRestart",void 0),__decorate([u(cc.Component.EventHandler)],e.prototype,"onQuit",void 0),e=__decorate([l],e)}(n.default);o.default=d,cc._RF.pop()},{"../../CrabWare/Components/PopupController":"PopupController","../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/Utils/MathUtils":"MathUtils","../UIAudioClips":"UIAudioClips","./ConfirmPopupController":"ConfirmPopupController"}],PersistenceTest:[function(t,e,o){"use strict";cc._RF.push(e,"aacbeqeUydOVYJP1FiWMDy7","PersistenceTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.counter=null,e.slider=null,e.toggle=null,e.editBox=null,e}return __extends(e,t),e.prototype.start=function(){this.load(),this.loadObj()},e.prototype.add=function(){this.counter.string=(parseInt(this.counter.string)+1).toString()},e.prototype.subs=function(){this.counter.string=(parseInt(this.counter.string)-1).toString()},e.prototype.save=function(){cc.sys.localStorage.setItem("counter",this.counter.string)},e.prototype.load=function(){var t=cc.sys.localStorage.getItem("counter");null==t&&(t=0),this.counter.string=t.toString()},e.prototype.saveObj=function(){var t={b:this.toggle.isChecked,n:this.slider.progress,s:this.editBox.string};cc.sys.localStorage.setItem("obj",JSON.stringify(t))},e.prototype.loadObj=function(){var t=JSON.parse(cc.sys.localStorage.getItem("obj"));null==t&&(t={b:!1,n:0,s:""}),this.slider.progress=t.n,this.toggle.isChecked=t.b,this.editBox.string=t.s},__decorate([r(cc.Label)],e.prototype,"counter",void 0),__decorate([r(cc.Slider)],e.prototype,"slider",void 0),__decorate([r(cc.Toggle)],e.prototype,"toggle",void 0),__decorate([r(cc.EditBox)],e.prototype,"editBox",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PhysicsProjectile:[function(t,e,o){"use strict";cc._RF.push(e,"20bd4wy5AtOybYCUvEJIjCt","PhysicsProjectile"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.requireComponent,s=n.menu,c=1e3,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MaxLifetime=c,e}var o;return __extends(e,t),o=e,e.prototype.start=function(){},e.prototype.onDestroy=function(){null!=this.onDestroyCallback&&this.onDestroyCallback()},e.prototype.ScheduleDestruction=function(){this.schedule(this.DestroyProjectile,this.MaxLifetime/1e3)},e.prototype.DestroyProjectile=function(){this.node.destroy()},e.prototype.onBeginContact=function(t,e,n){"gameplay-boosters"!==n.node.group&&(null!=o.onCollisionCallback&&(o.onCollisionCallback(),o.onCollisionCallback=null),"Bounds"===n.node.name&&this.DestroyProjectile())},__decorate([r],e.prototype,"MaxLifetime",void 0),e=o=__decorate([i,a(cc.RigidBody),s("CrabWare/Components/PhysicsProjectile")],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PlatformAnimationSelector:[function(t,e,o){"use strict";cc._RF.push(e,"6a2e0EedP9CTYXQSXMwa4Xc","PlatformAnimationSelector"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.requireComponent,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.desktopAnimation="",e.mobileAnimation="",e}return __extends(e,t),e.prototype.start=function(){var t=this.node.getComponent(cc.Animation);t&&(cc.sys.isMobile?t.play(this.mobileAnimation):t.play(this.desktopAnimation))},__decorate([r],e.prototype,"desktopAnimation",void 0),__decorate([r],e.prototype,"mobileAnimation",void 0),e=__decorate([i,a(cc.Animation)],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],PlatformGraphicChanger:[function(t,e,o){"use strict";cc._RF.push(e,"b9d56Y4z69FKrHdMd+0mdur","PlatformGraphicChanger"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mobile=null,e.desktop=null,e.sprite=null,e}return __extends(e,t),e.prototype.start=function(){this.sprite||(this.sprite=this.node.getComponent(cc.Sprite),this.sprite||this.destroy()),cc.sys.isMobile?this.sprite.spriteFrame=this.mobile:this.sprite.spriteFrame=this.desktop,this.destroy()},__decorate([r(cc.SpriteFrame)],e.prototype,"mobile",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"desktop",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprite",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopupController:[function(t,e,o){"use strict";cc._RF.push(e,"e35d8mAiLtJzLwPRmHKihkQ","PopupController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.menu,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._shouldBlock=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"shouldBlock",{get:function(){return this._shouldBlock},set:function(t){this._shouldBlock!=t&&(!0===t?this.suscribeBlock():this.unsuscribeBlock())},enumerable:!0,configurable:!0}),e.prototype.goToScene=function(t,e){n.default.DefaultInstance.SceneManager.ChangeScene(e)},e.prototype.show=function(){this.node.active=!0},e.prototype.close=function(){this.node.active=!1},e.prototype.closeAndDestroy=function(){this.node.destroy()},e.prototype.blockInput=function(t){t.stopPropagationImmediate()},e.prototype.suscribeBlock=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.blockInput,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.blockInput,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.blockInput,this),this.node.on(cc.Node.EventType.TOUCH_END,this.blockInput,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.blockInput,this),this._shouldBlock=!0},e.prototype.unsuscribeBlock=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.blockInput,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.blockInput,this),this.node.off(cc.Node.EventType.MOUSE_MOVE,this.blockInput,this),this.node.off(cc.Node.EventType.TOUCH_END,this.blockInput,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.blockInput,this),this._shouldBlock=!1},e.prototype.onLoad=function(){!0===this._shouldBlock&&this.suscribeBlock()},e.prototype.lateUpdate=function(){if(this.shouldBlock){var t=cc.view.getScaleX(),e=cc.view.getScaleY(),o=new cc.Size(cc.view.getViewportRect().size.width/t+Math.abs(this.node.x),cc.view.getViewportRect().size.height/e+Math.abs(this.node.y));this.node.setContentSize(o)}},__decorate([a({visible:!0,tooltip:"True if this popup should block input"})],e.prototype,"_shouldBlock",void 0),e=__decorate([r,s("CrabWare/Controllers/PopupController")],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Core/Maestro":"Maestro"}],PopupTutorial:[function(t,e,o){"use strict";cc._RF.push(e,"14666r53XRA65lvDTvzoDrD","PopupTutorial"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Core/Maestro"),i=t("../CrabWare/Utils/MathUtils"),r=t("../CrabWare/Components/PopupController"),a=t("./UIAudioClips"),s=t("./OrientationPopup"),c=cc._decorator,l=c.ccclass,u=c.property,p=1e3,d=function(t){function e(){var e=t.call(this)||this;return e.popupAnimation=null,e.popup=null,e.pauseAnimationManager=new cc.AnimationManager,e.rotationPopup=null,e.rotationPopupParent=null,e.intervalHandler=null,e.onFocus=function(){null===e.intervalHandler&&(e.intervalHandler=window.setInterval(function(){e.pseudoUpdate()},p/cc.game.getFrameRate()))},e.onBlur=function(){clearInterval(e.intervalHandler),e.intervalHandler=null},e}return __extends(e,t),e.prototype.startTutorial=function(){var t=this;this.node.parent.children.forEach(function(e){e!==t.node&&(e.active=!1)}),cc.director.pause(),this.startPauseUpdate(),this.popupAnimation.play("tutorial_popup_in")},e.prototype.endTutorial=function(){var t=n.default.DefaultInstance.GetPersistentNode().getComponent(a.default);t&&t.playButtonClip(),this.popupAnimation.play("tutorial_popup_out")},e.prototype.onAnimationFinished=function(){var t=this;"tutorial_popup_out"===this.popupAnimation.currentClip.name&&(cc.director.resume(),this.node.parent.children.forEach(function(e){e!==t.node&&(e.active=!0)}),this.endPauseUpdate(),this.node.destroy())},e.prototype.startPauseUpdate=function(){var t=this;n.default.DefaultInstance.subscribeOnFocusEvent(this.onFocus),n.default.DefaultInstance.subscribeOnBlurEvent(this.onBlur),null===this.intervalHandler&&(this.intervalHandler=window.setInterval(function(){t.pseudoUpdate()},p/cc.game.getFrameRate())),this.defaultAnimationManager=cc.director._animationManager,cc.director._animationManager=this.pauseAnimationManager;var e=cc.director.getScene().getComponentsInChildren(s.default);if(i.isPositive(e.length)){this.rotationPopup=e[0],this.rotationPopup&&this.rotationPopup.node&&(this.rotationPopupParent=this.rotationPopup.node.parent,this.rotationPopup.node.removeFromParent(),this.node.addChild(this.rotationPopup.node))}this.pseudoUpdate()},e.prototype.endPauseUpdate=function(){n.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),n.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur),cc.director._animationManager=this.defaultAnimationManager,clearInterval(this.intervalHandler),this.intervalHandler=null,this.rotationPopup&&this.rotationPopup.node&&(this.rotationPopup.node.removeFromParent(),this.rotationPopupParent.addChild(this.rotationPopup.node))},e.prototype.pseudoUpdate=function(){var t,e=p/cc.game.getFrameRate();(t=this.node.getComponents(cc.Component)).push.apply(t,this.node.getComponentsInChildren(cc.Component)),t.forEach(function(t){t.start&&i.isZero(65536&t._objFlags)&&(t._objFlags|=65536,t.start())}),t.forEach(function(t){t.update&&t.update(e),t instanceof cc.Widget&&t.updateAlignment()}),cc.director.getAnimationManager().update(e/p),t.forEach(function(t){t.lateUpdate&&t.lateUpdate()})},e.prototype.onLoad=function(){var t=this;this.scheduleOnce(function(){t.popupAnimation.on("finished",t.onAnimationFinished,t),t.startTutorial(),t.popup.onLoad(),t.popup.show()},0)},e.prototype.onDestroy=function(){var t=this;n.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),n.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur),cc.director.isPaused()&&(cc.director.resume(),this.node.parent.children.forEach(function(e){e!==t.node&&(e.active=!0)}),cc.director._animationManager=this.defaultAnimationManager,clearInterval(this.intervalHandler),this.intervalHandler=null)},__decorate([u(cc.Animation)],e.prototype,"popupAnimation",void 0),__decorate([u(r.default)],e.prototype,"popup",void 0),e=__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../CrabWare/Components/PopupController":"PopupController","../CrabWare/Core/Maestro":"Maestro","../CrabWare/Utils/MathUtils":"MathUtils","./OrientationPopup":"OrientationPopup","./UIAudioClips":"UIAudioClips"}],PreGameplayTest:[function(t,e,o){"use strict";cc._RF.push(e,"ad2fa+BYIRCA7guJ0YC80Pq","PreGameplayTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/Maestro"),i=t("../../Scripts/CrabWare/Core/BaseSceneController"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.n=null,e}return __extends(e,t),e.prototype.SceneEnter=function(){console.log("in")},e.prototype.SceneExit=function(){console.log("out")},e.prototype.start=function(){n.default.DefaultInstance.GetConcreteState().loadLevel().then(function(t){n.default.DefaultInstance.SceneManager.ChangeScene("gameplay_load_test")}).catch(function(t){console.log(t)})},e.prototype.update=function(t){this.n.rotation+=10},__decorate([s(cc.Node)],e.prototype,"n",void 0),e=__decorate([a],e)}(i.default);o.default=c,cc._RF.pop()},{"../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController","../../Scripts/CrabWare/Core/Maestro":"Maestro"}],PropertyLabel:[function(t,e,o){"use strict";cc._RF.push(e,"789ddqA6hBDYpx1nhyNq4Vj","PropertyLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.requireComponent,s=n.menu,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e._text="",e._value=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.updateLabelString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.updateLabelString()},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){this.value=t},e.prototype.updateLabelString=function(){var t=this;null==this._text||""==this._text.trim()?this.label.string=this._value.toString():Object.keys(this._value).forEach(function(e){var o=new RegExp("(^|\\s)(\\\\\\\\)*(\\$[{]("+e+")[}])");t.label.string=t._text.replace(o,t._value[e].toString())})},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r],e.prototype,"_text",void 0),__decorate([r],e.prototype,"text",null),e=__decorate([i,a(cc.Label),s("CrabWare/Components/PopupController")],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],STCtrller1:[function(t,e,o){"use strict";cc._RF.push(e,"b34e8/k1JtOq4H8fKAUOgGU","STCtrller1"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/BaseSceneController"),i=t("../../Scripts/CrabWare/Components/PopupController"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupPrefab=null,e}return __extends(e,t),e.prototype.SceneEnter=function(){var t=this.node.parent.getComponentInChildren(cc.Canvas),e=cc.instantiate(this.popupPrefab),o=e.getComponent(i.default);o.node.x+=100,o.node.y+=100,o.node.active=!1,t.node.addChild(e);var n=o;(o=(e=cc.instantiate(this.popupPrefab)).getComponent(i.default)).node.x-=100,o.node.y-=100,o.shouldBlock=!1,t.node.addChild(e),this.scheduleOnce(function(){n.node.active=!0},5)},e.prototype.SceneExit=function(){console.log("Exit")},__decorate([s({type:cc.Prefab})],e.prototype,"popupPrefab",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"../../Scripts/CrabWare/Components/PopupController":"PopupController","../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController"}],STCtrller2:[function(t,e,o){"use strict";cc._RF.push(e,"593754iSDBB+6FejNyGDbRF","STCtrller2"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/BaseSceneController"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupPrefab=null,e.targetScene="",e}return __extends(e,t),e.prototype.SceneEnter=function(){var t=this.node.parent.getComponentInChildren(cc.Canvas),e=cc.instantiate(this.popupPrefab);t.node.addChild(e),e.children[1].getComponent(cc.Button).clickEvents[0].customEventData=this.targetScene},e.prototype.SceneExit=function(){console.log("Exit")},__decorate([a({type:cc.Prefab})],e.prototype,"popupPrefab",void 0),__decorate([a],e.prototype,"targetScene",void 0),e=__decorate([r],e)}(n.default);o.default=s,cc._RF.pop()},{"../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController"}],STCtrller3A:[function(t,e,o){"use strict";cc._RF.push(e,"628b0hMHDNGMp7lJrgaGTHJ","STCtrller3A"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/BaseSceneController"),i=t("../../Scripts/CrabWare/Core/Maestro"),r=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.SceneEnter=function(){console.log("Enter")},e.prototype.SceneExit=function(){console.log("Exit")},e.prototype.goToCase2=function(){i.default.DefaultInstance.SceneManager.ChangeScene("popup-test-c-b")},e=__decorate([r],e)}(n.default);o.default=a,cc._RF.pop()},{"../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController","../../Scripts/CrabWare/Core/Maestro":"Maestro"}],STCtrller3B:[function(t,e,o){"use strict";cc._RF.push(e,"aa238JARHhDTJano+bM+Ips","STCtrller3B"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/BaseSceneController"),i=t("../../Scripts/CrabWare/Components/PopupController"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popup=null,e.button=null,e}return __extends(e,t),e.prototype.SceneEnter=function(){this.button.enabled=!0},e.prototype.SceneExit=function(){console.log("Exit")},__decorate([s({type:i.default})],e.prototype,"popup",void 0),__decorate([s({type:cc.Button})],e.prototype,"button",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"../../Scripts/CrabWare/Components/PopupController":"PopupController","../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController"}],STCtrller3C:[function(t,e,o){"use strict";cc._RF.push(e,"b9442MHGZBL0642l1O8o3PW","STCtrller3C"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Scripts/CrabWare/Core/BaseSceneController"),i=t("../../Scripts/CrabWare/Components/PopupController"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupPrefab=null,e.button=null,e.popup=null,e}return __extends(e,t),e.prototype.SceneEnter=function(){},e.prototype.SceneExit=function(){console.log("Exit")},e.prototype.createPopup=function(){var t=this;if(null==this.popup){var e=this.node.parent.getComponentInChildren(cc.Canvas),o=cc.instantiate(this.popupPrefab);e.node.addChild(o),o.children[1].getComponent(cc.Button).clickEvents[0].customEventData="popup-test-c-a";var n=new cc.Component.EventHandler;n.target=o,n.handler="closeAndDestroy",n.component="PopupController",o.children[0].getComponent(cc.Button).clickEvents[0]=n,this.popup=o.getComponent(i.default);var r=this.popup.closeAndDestroy;r=r.bind(this.popup),this.popup.closeAndDestroy=function(e){r(),t.popup=null}}},__decorate([s({type:cc.Prefab})],e.prototype,"popupPrefab",void 0),__decorate([s({type:cc.Button})],e.prototype,"button",void 0),e=__decorate([a],e)}(n.default);o.default=c,cc._RF.pop()},{"../../Scripts/CrabWare/Components/PopupController":"PopupController","../../Scripts/CrabWare/Core/BaseSceneController":"BaseSceneController"}],SceneManager:[function(t,e,o){"use strict";cc._RF.push(e,"f08a3g8KvJPNrfB9TzR/JkJ","SceneManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Core/BaseSceneController"),i=t("../Core/CrabWareSettings"),r=t("typescript-string-operations"),a=t("../Core/Maestro"),s=cc._decorator,c=s.ccclass,l=s.menu,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.GoToWin=function(){this.ChangeScene("game_complete")},e.prototype.GoToLose=function(){this.ChangeScene("gameover")},e.prototype.GetController=function(){var t=cc.find(i.default.DEFAULT_CONTROLLER_NODE_NAME);return t?t.getComponent(n.default):null},e.prototype.GetCurrentScene=function(){return cc.director.getScene()},e.prototype.ChangeScene=function(t){a.default.log(r.String.Format("Changing Scene From: {0} to: {1}",a.default.DefaultInstance.SceneManager.GetCurrentScene().name,t)),a.default.DefaultInstance.SceneManager.GetController()&&a.default.DefaultInstance.SceneManager.GetController().SceneExit(),cc.director.loadScene(t,this.SceneChanged)},e.prototype.SceneChanged=function(){a.default.DefaultInstance.SceneManager.GetController()&&a.default.DefaultInstance.SceneManager.GetController().SceneEnter(),a.default.log(r.String.Format("New Scene is: {0}",a.default.DefaultInstance.SceneManager.GetCurrentScene().name))},e.prototype.onLoad=function(){this.GetController().SceneEnter()},e=__decorate([c,l("CrabWare/Core/SceneManager")],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Core/BaseSceneController":"BaseSceneController","../Core/CrabWareSettings":"CrabWareSettings","../Core/Maestro":"Maestro","typescript-string-operations":30}],SingleLemmingProjectile:[function(t,e,o){"use strict";cc._RF.push(e,"3d218SjwLNEIYHcVG2UAU60","SingleLemmingProjectile"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Components/PhysicsProjectile"),i=t("../../CrabWare/Core/Maestro"),r=t("./ObjectPool"),a=t("@gamestdio/mathf"),s=t("../../CrabWare/Utils/MathUtils"),c=t("../../CrabWare/AudioClipCollection"),l=t("./StructureUnit"),u=cc._decorator,p=u.ccclass,d=u.property,h=.5,f=0,m=1e3,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boostedAnimName="",e.destroyEffect=null,e.TrajectoryMarkerMinSpawnRate=h,e.TrajectoryMarkerMaxSpawnRate=h,e.TrajectoryMarkerMinSpeed=f,e.TrajectoryMarkerMaxSpeed=m,e.TrajectoryMarkerPrefab=null,e.animation=null,e.DestroyParticles=null,e.hitClips=new c.default,e.grassHitClips=new c.default,e.exitClips=new c.default,e.hasHit=!1,e.enqueuedToDestroy=!1,e}var o;return __extends(e,t),o=e,Object.defineProperty(e.prototype,"trajectoryMarkerPool",{get:function(){return o._trajectoryMarkerPool},enumerable:!0,configurable:!0}),e.init=function(t){o._trajectoryMarkerPool=cc.find(t).getComponent(r.default)},e.prototype.DestroyProjectile=function(){var t=i.default.DefaultInstance.SceneManager.GetController(),e=t.lemmingExitWaitTimeRemaining;i.default.log("Destroy time: "+e),s.isZero(e)?(t.resetLastLemmmingDestroyedTimestamp(),this.node.destroy()):this.schedule(this.DestroyProjectile,e+.05,cc.macro.REPEAT_FOREVER,e)},e.prototype.onLoad=function(){var t=null;if(null!=this.animation&&(t=this.animation.getClips()),null!=this.animation&&null!=t&&!s.isZero(t.length))for(var e=Math.random(),o=1/t.length,n=1;n<t.length;++n)if(e<o*(n+1)){this.animation.play(t[n].name);break}},e.prototype.onDestroy=function(){i.default.log("DESTROYED!");var t=i.default.DefaultInstance.SceneManager.GetController();if(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position);t.OnLemmingDestroyed(e);var o=this.exitClips.randomClip;o&&cc.audioEngine.playEffect(o,!1)}},e.prototype.onBeginContact=function(e,o,n){if(t.prototype.onBeginContact.call(this,e,o,n),"gameplay-boosters"!==n.node.group){var r=o.body.linearVelocity.magSqr();if(n.node.getComponent(l.default)&&r>15e4)(a=this.hitClips.randomClip)&&cc.audioEngine.playEffect(a,!1);else if("Bounds"!==n.node.name&&r>1e4){var a;(a=this.grassHitClips.randomClip)&&cc.audioEngine.playEffect(a,!1)}if(!this.enqueuedToDestroy)i.default.log("BEGIN CONTACT"),this.ScheduleDestruction(),this.enqueuedToDestroy=!0,i.default.DefaultInstance.SceneManager.GetController().OnLemmingHit(),this.hasHit=!0,null!=this.DestroyParticles&&(this.DestroyParticles.active=!0)}},e.prototype.start=function(){var t=this;i.default.DefaultInstance.SceneManager.GetController().OnLemmingLaunched(),this.spawnTrajectoryMarker();var e=this.node.getComponent(cc.RigidBody).linearVelocity.mag(),o=a.inverseLerp(f,m,e);this.schedule(this.spawnTrajectoryMarker,a.lerp(this.TrajectoryMarkerMinSpawnRate,this.TrajectoryMarkerMaxSpawnRate,o));this.scheduleOnce(function(){t.node.group="gameplay-lemmings",t.node.getComponentsInChildren(cc.PhysicsCollider).forEach(function(t){t.apply()})},.12)},e.prototype.spawnTrajectoryMarker=function(){if(!this.hasHit){var t=cc.instantiate(this.TrajectoryMarkerPrefab),e=this.node.convertToWorldSpace(this.node.position),o=this.node.convertToNodeSpace(e);t.position=o,t.zIndex=cc.macro.MIN_ZINDEX,this.node.parent.addChild(t)}},e.prototype.BoostLemmingGraphics=function(){this.animation.play(this.boostedAnimName)},e._trajectoryMarkerPool=null,__decorate([d],e.prototype,"boostedAnimName",void 0),__decorate([d(cc.Prefab)],e.prototype,"destroyEffect",void 0),__decorate([d],e.prototype,"TrajectoryMarkerMinSpawnRate",void 0),__decorate([d],e.prototype,"TrajectoryMarkerMaxSpawnRate",void 0),__decorate([d],e.prototype,"TrajectoryMarkerMinSpeed",void 0),__decorate([d],e.prototype,"TrajectoryMarkerMaxSpeed",void 0),__decorate([d(cc.Prefab)],e.prototype,"TrajectoryMarkerPrefab",void 0),__decorate([d(cc.Animation)],e.prototype,"animation",void 0),__decorate([d({type:cc.ParticleSystem})],e.prototype,"DestroyParticles",void 0),__decorate([d({type:c.default})],e.prototype,"hitClips",void 0),__decorate([d({type:c.default})],e.prototype,"grassHitClips",void 0),__decorate([d({type:c.default})],e.prototype,"exitClips",void 0),e=o=__decorate([p],e)}(n.default);o.default=y,cc._RF.pop()},{"../../CrabWare/AudioClipCollection":"AudioClipCollection","../../CrabWare/Components/PhysicsProjectile":"PhysicsProjectile","../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/Utils/MathUtils":"MathUtils","./ObjectPool":"ObjectPool","./StructureUnit":"StructureUnit","@gamestdio/mathf":1}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"9ca55Ah4TpE45extWBg6r11","Singleton"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.menu,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.GetInstance=function(t){return this.instance||(this.instance=new t),this.instance},e.instance=null,e=o=__decorate([i,r("CrabWare/Core/Singleton")],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],SlingshotTutorial:[function(t,e,o){"use strict";cc._RF.push(e,"eb39fTufchAb6XnMLLBtUxp","SlingshotTutorial"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=t("../CrabWare/Core/Maestro"),r=t("./Controllers/CameraController"),a=t("./Controllers/LemmingsLauncherController"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.WaitingInput=0]="WaitingInput",t[t.WaitingInputResult=1]="WaitingInputResult",t[t.TutorialDone=2]="TutorialDone"})(n||(n={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handAnimation=null,e.cursorAnimation=null,e.targetAnimation=null,e.camController=null,e.tutorialStage=n.WaitingInput,e.inputFlag=!1,e}return __extends(e,t),e.prototype.onInputStart=function(){this.inputFlag=!0,this.tutorialStage=n.WaitingInputResult,this.targetAnimation.node.active=!0,this.stopHandAnimation()},e.prototype.onInputMove=function(t){if(this.inputFlag){var e=this.node.getComponent(a.default),o=cc.find("Canvas/Main Camera").getComponent(cc.Camera),n=t.getLocation();o.getCameraToWorldPoint(n,n),n=this.targetAnimation.node.parent.convertToNodeSpaceAR(n);if(this.targetAnimation.node.position.sub(e.normalizeVector(n)).magSqr()<=this.targetAnimation.node.getContentSize().width/2*(this.targetAnimation.node.getContentSize().height/2)){var r=this.targetAnimation.node.parent.convertToWorldSpaceAR(this.targetAnimation.node.position),s=void 0;s=o.getWorldToCameraPoint(r,s),i.default.log("Tutorial setting pos to "+s.toString()),t.setLocation(s.x,s.y)}}},e.prototype.onInputEnd=function(t){var e=this.node.getComponent(a.default),o=cc.find("Canvas/Main Camera").getComponent(cc.Camera),r=t.getLocation();o.getCameraToWorldPoint(r,r),r=this.targetAnimation.node.parent.convertToNodeSpaceAR(r);var s=this.targetAnimation.node.position.sub(r).magSqr(),c=this.targetAnimation.node.getContentSize().width/2*(this.targetAnimation.node.getContentSize().height/2);if(s>c){var l=e.lemmingInSlingshotPosition;l&&(r=this.targetAnimation.node.parent.convertToNodeSpaceAR(l),s=this.targetAnimation.node.position.sub(r).magSqr())}if(s<=c){var u=this.targetAnimation.node.parent.convertToWorldSpaceAR(this.targetAnimation.node.position),p=void 0;p=o.getWorldToCameraPoint(u,p),i.default.log("Tutorial setting pos to "+p.toString()),t.setLocation(p.x,p.y),this.targetAnimation.node.active=!1}else{e.disableInput(),e.releaseWithoutThrowing(),this.scheduleOnce(function(){e.enabledInput()},0),this.tutorialStage=n.WaitingInput,this.startHandAnimation()}},e.prototype.onLemmingLaunched=function(){this.tutorialStage=n.TutorialDone,this.deactivateHandAnimation(),this.disableTutorialInput()},e.prototype.startHandAnimation=function(){cc.sys.isMobile?(this.handAnimation.stop(),this.handAnimation.play("IN_handtutorial"),this.handAnimation.node.children[0].position=this.handStartPos.clone()):(this.cursorAnimation.stop(),this.cursorAnimation.play("IN_arrowtutorial"),this.cursorAnimation.node.children[0].children[0].position=this.handStartPos.clone())},e.prototype.stopHandAnimation=function(){cc.sys.isMobile?this.handAnimation.play("OUT_handtutorial"):this.cursorAnimation.play("OUT_arrowtutorial")},e.prototype.deactivateHandAnimation=function(){cc.sys.isMobile?this.handAnimation.stop():this.cursorAnimation.stop()},e.prototype.onHandAnimationEnd=function(){this.handAnimation.currentClip&&("IN_handtutorial"===this.handAnimation.currentClip.name?this.handAnimation.play("LOOP_handtutorial"):"OUT_handtutorial"===this.handAnimation.currentClip.name&&this.deactivateHandAnimation())},e.prototype.onCursorAnimationEnd=function(){this.cursorAnimation.currentClip&&("IN_arrowtutorial"===this.cursorAnimation.currentClip.name?this.cursorAnimation.play("LOOP_arrowtutorial"):"OUT_arrowtutorial"===this.cursorAnimation.currentClip.name&&this.deactivateHandAnimation())},e.prototype.onLoad=function(){var t=this;this.gpc=i.default.DefaultInstance.SceneManager.GetController(),this.cbLemmingLaunched=function(){t.onLemmingLaunched()},this.enableTutorialInput()},e.prototype.start=function(){var t=this;cc.sys.isMobile?this.handStartPos=this.handAnimation.node.children[0].position.clone():this.handStartPos=this.cursorAnimation.node.children[0].position.clone();var e=function(){t.tutorialStage===n.WaitingInput&&t.startHandAnimation()},o=function(){t.scheduleOnce(e,1)},i=this.camController.onUserControlStart;this.camController.onUserControlStart=function(){t.unschedule(o),o(),i?(i(),t.camController.onUserControlStart=i):t.camController.onUserControlStart=null},this.scheduleOnce(o,2),this.handAnimation.on("finished",this.onHandAnimationEnd.bind(this)),this.cursorAnimation.on("finished",this.onCursorAnimationEnd.bind(this)),this.targetAnimation.node.active=!1,this.node.getComponent(a.default).ActivateTutorialLaunch()},e.prototype.enableTutorialInput=function(){this.tutorialStage!==n.TutorialDone&&(this.gpc.LemmingLaunched.subscribe(this.cbLemmingLaunched),this.node.on(cc.Node.EventType.TOUCH_START,this.onInputStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onInputEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onInputEnd,this))},e.prototype.disableTutorialInput=function(){this.gpc.LemmingLaunched.unsubscribe(this.cbLemmingLaunched),this.node.off(cc.Node.EventType.TOUCH_START,this.onInputStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onInputEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onInputEnd,this)},__decorate([l({type:cc.Animation})],e.prototype,"handAnimation",void 0),__decorate([l({type:cc.Animation})],e.prototype,"cursorAnimation",void 0),__decorate([l({type:cc.Animation})],e.prototype,"targetAnimation",void 0),__decorate([l({type:r.default})],e.prototype,"camController",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","./Controllers/CameraController":"CameraController","./Controllers/LemmingsLauncherController":"LemmingsLauncherController"}],Slingshot:[function(t,e,o){"use strict";cc._RF.push(e,"d7e16qpHuFBcqI4CB9iQrCe","Slingshot"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Utils/MathUtils"),i=cc._decorator,r=i.ccclass,a=i.property,s=180,c=Math.PI/s,l=s/Math.PI,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bandNodeLeft=null,e.bandNodeRight=null,e.lemming=null,e.lemmingStaticOffset=cc.Vec2.ZERO,e}return __extends(e,t),Object.defineProperty(e.prototype,"lemmingPosition",{get:function(){return this.lemming.node.parent.convertToWorldSpaceAR(this.lemming.node.position)},enumerable:!0,configurable:!0}),e.prototype.extendBand=function(t,e,o){var i=this.node.convertToNodeSpaceAR(t),r=-i.signAngle(cc.Vec2.RIGHT),a=r*l;a=n.isPositive(a)?a-s:a+s,a%=s;var u=Math.abs(a);if(u>e){var p=1,d=(u-s)/(e-s);p=n.isPositive(r)?p:-p,i=new cc.Vec2(i.mag()*d,0),r=(e-s)*-p*c,i.rotateSelf(r)}var h=o*Math.cos(r),f=o*Math.sin(r);Math.abs(i.x)>Math.abs(h)&&(i.x=h),Math.abs(i.y)>Math.abs(f)&&(i.y=f);var m=i.sub(this.bandNodeLeft.position),y=i.sub(this.bandNodeRight.position),g=m.mag(),_=y.mag();this.bandNodeLeft.rotation=-Math.atan2(m.y,m.x)*l,this.bandNodeRight.rotation=s+-Math.atan2(y.y,y.x)*l,this.bandNodeLeft.scaleX=g/this.bandNodeLeft.getContentSize().width,this.bandNodeRight.scaleX=_/this.bandNodeRight.getContentSize().width;var v=n.remap(i.x,0,o,0,.5*this.lemming.node.getContentSize().width),C=n.remap(i.y,0,o,0,.5*this.lemming.node.getContentSize().height);v+=this.lemmingStaticOffset.x,C+=this.lemmingStaticOffset.y,this.lemming.node.position=i.sub(new cc.Vec2(v,C)),this.bandNodeLeft.setSiblingIndex(2)},e.prototype.releaseBand=function(){this.bandNodeLeft.rotation=-5,this.bandNodeRight.rotation=0,this.bandNodeLeft.scaleX=1,this.bandNodeRight.scaleX=1,this.lemming.node.position=new cc.Vec2(10,-4.2),this.lemming.node.active=!1,this.bandNodeLeft.setSiblingIndex(1),this.lemming.node.setSiblingIndex(2),this.bandNodeRight.setSiblingIndex(0)},e.prototype.activateProjectileSprite=function(){this.lemming.node.active=!0},e.prototype.setLemmingSprite=function(t,e){this.lemming.spriteFrame=t,this.lemming.node.setContentSize(e)},__decorate([a(cc.Node)],e.prototype,"bandNodeLeft",void 0),__decorate([a(cc.Node)],e.prototype,"bandNodeRight",void 0),__decorate([a(cc.Sprite)],e.prototype,"lemming",void 0),__decorate([a(cc.Vec2)],e.prototype,"lemmingStaticOffset",void 0),e=__decorate([r],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../CrabWare/Utils/MathUtils":"MathUtils"}],StateAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"18908LnMwFDcZuLXtEj+bDc","StateAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.spine=this.node.getComponent(sp.Skeleton),this.statesAnimations=[],this.statesAnimations.stand={loop:!0,track:0,animation:"stand",toJump:"jump",toRandom:"random",toAttack:"attack",toVulnerable:"vulnerable",toLeft:"left",toRight:"right"},this.statesAnimations.jump={loop:!0,track:0,animation:"jump_loop",toStand:"stand",toRandom:"random",toAttack:"attack",toVulnerable:"vulnerable",toLeft:"left",toRight:"right"},this.statesAnimations.random={loop:!1,track:0,animation:"random",toStand:"stand",toJump:"jump",toAttack:"attack",toVulnerable:"vulnerable",toLeft:"left",toRight:"right"},this.statesAnimations.attack={loop:!1,track:0,animation:"attack_1",toStand:"stand",toJump:"jump",toRandom:"random",toVulnerable:"vulnerable",toLeft:"left",toRight:"right"},this.statesAnimations.vulnerable={loop:!1,track:1,animation:"vulnerable",toStand:"stand",toJump:"jump",toRandom:"random",toAttack:"attack",toLeft:"left",toRight:"right"},this.statesAnimations.left={loop:!0,track:0,animation:"run",toStand:"stand",toJump:"jump",toRandom:"random",toAttack:"attack",toVulnerable:"vulnerable",toRight:"right"},this.statesAnimations.right={loop:!0,track:0,animation:"run",toStand:"stand",toJump:"jump",toRandom:"random",toAttack:"attack",toVulnerable:"vulnerable",toLeft:"left"},this.currentState="stand",this.spine.setAnimation(0,"stand",!0)},e.prototype.changeState=function(t){if(void 0!==this.statesAnimations[this.currentState][t]){this.currentState=this.statesAnimations[this.currentState][t];var e=this.statesAnimations[this.currentState].track,o=this.statesAnimations[this.currentState].animation,n=this.statesAnimations[this.currentState].loop;this.spine.setAnimation(e,o,n),"left"===this.currentState&&(this.node.scaleX=-1),"right"===this.currentState&&(this.node.scaleX=1)}else console.log("In transition: "+this.currentState+"no exist transition"+t)},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],StateComponent:[function(t,e,o){"use strict";cc._RF.push(e,"a7e15sfXnNMx7uHeJjN2vLm","StateComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e.events=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.stateName},enumerable:!0,configurable:!0}),e.prototype.do=function(){this.events.forEach(function(t){return t.emit([])})},__decorate([r(cc.String)],e.prototype,"stateName",void 0),__decorate([r([cc.Component.EventHandler])],e.prototype,"events",void 0),e=__decorate([i,a("CrabWare/Components/FSM/StateComponent")],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],StateMachine:[function(t,e,o){"use strict";cc._RF.push(e,"5c670syiedOYJlC9vxpzILx","StateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("typescript-string-operations"),i=t("./StateComponent"),r=t("./BaseStateMachine"),a=cc._decorator,s=a.ccclass,c=a.property,l=a.menu,u=function(){function t(){this.fromState="",this.toState="",this.action=""}return __decorate([c(cc.String)],t.prototype,"fromState",void 0),__decorate([c(cc.String)],t.prototype,"toState",void 0),__decorate([c(cc.String)],t.prototype,"action",void 0),t=__decorate([s("TransitionMeta")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transitionFile=null,e.transitionsArray=[],e.startState="",e}return __extends(e,t),e.prototype.start=function(){var t,e=this;this.states=this.node.getComponents(i.default),this.states.length||(this.states=this.node.getComponentsInChildren(i.default)),t=null!=this.transitionFile?this.transitionFile.json:this.transitionsArray,this.transitions=[],t.forEach(function(t){e.transitions.push({fromState:e.states.find(function(e){return t.fromState==e.name}),toState:e.states.find(function(e){return t.toState==e.name}),action:t.action})}),n.String.IsNullOrWhiteSpace(this.startState)||this.setState(this.startState)},e.prototype.onDestroy=function(){},__decorate([c({type:cc.JsonAsset,tooltip:"JSON file containig the transitions. If this reference isn't set, then the transitions from transitionsArray will be used"})],e.prototype,"transitionFile",void 0),__decorate([c({type:[u]})],e.prototype,"transitionsArray",void 0),__decorate([c(cc.String)],e.prototype,"startState",void 0),e=__decorate([s,l("CrabWare/Components/FSM/StateMachine")],e)}(r.default);o.default=p,cc._RF.pop()},{"./BaseStateMachine":"BaseStateMachine","./StateComponent":"StateComponent","typescript-string-operations":30}],StateSwitcher:[function(t,e,o){"use strict";cc._RF.push(e,"9b1fb9ryM5OgbfieEuxu8nP","StateSwitcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Core/Maestro"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.menu,c=function(){function t(){this.keyCode=cc.macro.KEY.a,this.event=""}return __decorate([a({type:cc.Enum(cc.macro.KEY)})],t.prototype,"keyCode",void 0),__decorate([a(cc.String)],t.prototype,"event",void 0),t=__decorate([r("EventMapper")],t)}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.switchTransitions=[],e.switchStates=[],e.stateSwitchEvent=null,e.stateJumpEvent=null,e.switchCasesTransitions={},e.switchCasesStates={},e}return __extends(e,t),e.prototype.switchState=function(t){var e=this.switchCasesTransitions[t.keyCode];if(e)return n.default.log("Switching... action triggered '"+e+"' through the state switcher"),void this.stateSwitchEvent.emit([e]);var o=this.switchCasesStates[t.keyCode];return o?(n.default.log("Switching... state triggered '"+o+"' through the state switcher"),void this.stateJumpEvent.emit([o])):void 0},e.prototype.start=function(){var t=this;return this.switchTransitions.forEach(function(e){t.switchCasesTransitions[e.keyCode]=e.event,n.default.log("Switch action "+e.event+" added (Key to switch is "+e.keyCode+")")}),this.switchStates.forEach(function(e){t.switchCasesStates[e.keyCode]=e.event,n.default.log("Switch state "+e.event+" added (Key to switch is "+e.keyCode+")")}),(Object.keys(this.switchCasesTransitions).length||Object.keys(this.switchCasesStates).length)&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.switchState,this),null},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.switchState,this)},__decorate([a({type:[c]})],e.prototype,"switchTransitions",void 0),__decorate([a({type:[c]})],e.prototype,"switchStates",void 0),__decorate([a(cc.Component.EventHandler)],e.prototype,"stateSwitchEvent",void 0),__decorate([a(cc.Component.EventHandler)],e.prototype,"stateJumpEvent",void 0),e=__decorate([r,s("CrabWare/Components/FSM/StateSwitcher")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Core/Maestro":"Maestro"}],State:[function(t,e,o){"use strict";cc._RF.push(e,"c76c3XgX+BLtZ4g/V7xKpIt","State"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.menu,i=function(){function t(t,e){this.events=[],this.stateName="",this.events=null==e?[]:e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.stateName},enumerable:!0,configurable:!0}),t.prototype.do=function(){this.events.forEach(function(t){return t.emit([])})},t=__decorate([n("CrabWare/Components/FSM/State")],t)}();o.default=i,cc._RF.pop()},{}],StructureUnit:[function(t,e,o){"use strict";cc._RF.push(e,"991bbfiIXVMjox7N2rpA5pV","StructureUnit"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=t("../../CrabWare/Core/Maestro"),r=t("../../CrabWare/AudioClipCollection"),a=t("../../CrabWare/Utils/MathUtils"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.requireComponent,p=.333333,d=.666666,h=1,f=3,m=300;(function(t){t[t.None=0]="None",t[t.Wood=1]="Wood",t[t.Glass=2]="Glass",t[t.Rock=3]="Rock",t[t.Metal=4]="Metal"})(n||(n={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.materialType=n.Wood,e.Density=h,e.maxHp=f,e.destroyEffect=null,e.debrisPrefab=null,e.UndamagedSprite=null,e.DamageMinSprite=null,e.DamageMaxSprite=null,e.score=m,e.lemmingHitClips=new r.default,e.destroyClips=new r.default,e.changeStateHitClips=new r.default,e.scoreStyleKey=null,e}var o;return __extends(e,t),o=e,Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){var e=this._hp/this.maxHp;this._hp=t;var o=this._hp/this.maxHp,n=!1;if(o>0){if(o>d?this.ChangeSpriteFrame(this.UndamagedSprite):o>p?(this.ChangeSpriteFrame(this.DamageMinSprite),e>d&&(n=!0)):o>0&&(this.ChangeSpriteFrame(this.DamageMaxSprite),e>p&&(n=!0)),n){var i=this.changeStateHitClips.randomClip;i&&cc.audioEngine.playEffect(i,!1)}}else this.onHpReachedZero()},enumerable:!0,configurable:!0}),e.prototype.destroyNode=function(){this.node.destroy()},e.init=function(){this.gameplayController=i.default.DefaultInstance.SceneManager.GetController()},e.prototype.onBeginContact=function(t,e,n){if("bullet"===n.node.name&&(e.node.destroy(),n.node.destroy()),"gameplay-lemmings"===n.node.group){var r=this.lemmingHitClips.randomClip;r&&cc.audioEngine.playEffect(r,!1)}var s,c=e.body.linearVelocity,l=n.body.linearVelocity,u=e.body.getMass();s=n.body.type===cc.RigidBodyType.Dynamic?n.body.getMass():o.gameplayController.groundMass;var p=c.mul(u),d=l.mul(s),h=p.add(d),f=c.sub(l).mul(e.restitution*s),m=u+s,y=h.add(f).mag()/m,g=Math.abs((y-c.mag())/cc.PhysicsManager.FIXED_TIME_STEP*u);if(g>1e4){var _=(g-1e4)/25e3;i.default.log("Object "+n.node.name+" dealt "+_+" units of damage to "+e.node.name);var v=this.hp;this.hp-=_;var C=this.getScore(v);o.gameplayController.score+=C,a.isZero(C)||(i.default.log("Node "+this.node.name+" - score: "+C),o.gameplayController.showObtainedScoreLabel(this.node,C,this.scoreStyleKey))}},e.prototype.splitBody=function(){if(null!=this.debrisPrefab){i.default.log("Splitting body");var t=cc.instantiate(this.debrisPrefab);t.setPosition(this.node.position),t.setRotation(this.node.rotation);for(var e=t.getComponentsInChildren(cc.RigidBody),o=this.GetRigidBody(),n=0;n<e.length;++n)e[n].linearVelocity=o.linearVelocity;this.node.parent.addChild(t)}},e.prototype.onHpReachedZero=function(){if(this.destroyEffect){var t=cc.instantiate(this.destroyEffect);t.setPosition(this.node.position),t.setRotation(this.node.rotation),this.node.parent.addChild(t)}var e=this.destroyClips.randomClip;e&&cc.audioEngine.playEffect(e,!1),this.destroyNode()},e.prototype.getScore=function(t){var e=t/this.maxHp,o=this.hp/this.maxHp,n=this.score/3,i=0;return e>d?o<=0?i=this.score:o<p?i=2*n:o<d&&(i=n):e>p?o<=0?i=2*n:o<p&&(i=n):o<=0&&(i=n),i},e.prototype.GetCollider=function(){return this.getComponent(cc.PhysicsCollider)},e.prototype.GetRigidBody=function(){return this.getComponent(cc.RigidBody)},e.prototype.ChangeSpriteFrame=function(t){this.GetSprite()&&t&&(this.GetSprite().spriteFrame=t)},e.prototype.GetSprite=function(){return this.getComponent(cc.Sprite)},e.prototype.onLoad=function(){this.GetCollider().density=this.Density,this.hp=this.maxHp,this.GetRigidBody().enabledContactListener=!0},e.prototype.start=function(){var t=i.default.DefaultInstance.GetConcreteState(),e=t.StateContainer.LevelsData,o=t.StateContainer.currentLevel;e.getValue(o).MaxScore+=this.score},__decorate([l],e.prototype,"Density",void 0),__decorate([l],e.prototype,"maxHp",void 0),__decorate([l(cc.Prefab)],e.prototype,"destroyEffect",void 0),__decorate([l(cc.Prefab)],e.prototype,"debrisPrefab",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"UndamagedSprite",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"DamageMinSprite",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"DamageMaxSprite",void 0),__decorate([l],e.prototype,"score",void 0),__decorate([l(r.default)],e.prototype,"lemmingHitClips",void 0),__decorate([l(r.default)],e.prototype,"destroyClips",void 0),__decorate([l({type:r.default})],e.prototype,"changeStateHitClips",void 0),e=o=__decorate([c,u(cc.PhysicsCollider),u(cc.RigidBody)],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../CrabWare/AudioClipCollection":"AudioClipCollection","../../CrabWare/Core/Maestro":"Maestro","../../CrabWare/Utils/MathUtils":"MathUtils"}],TextPopup:[function(t,e,o){"use strict";cc._RF.push(e,"5fe53t44PFGdYvUy+5BHWLh","TextPopup"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../CrabWare/Components/PopupController"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._text=null,e.destroyOnClose=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text.string},set:function(t){this._text.string=t},enumerable:!0,configurable:!0}),e.prototype.suscribeClose=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.destroyOnClose?this.closeAndDestroy:this.close,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.destroyOnClose?this.closeAndDestroy:this.close,this)},e.prototype.unsuscribeClose=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.destroyOnClose?this.closeAndDestroy:this.close,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.destroyOnClose?this.closeAndDestroy:this.close,this)},e.prototype.onLoad=function(){},__decorate([a(cc.Label)],e.prototype,"_text",void 0),__decorate([a],e.prototype,"destroyOnClose",void 0),e=__decorate([r],e)}(n.default);o.default=s,cc._RF.pop()},{"../CrabWare/Components/PopupController":"PopupController"}],TextTutorial:[function(t,e,o){"use strict";cc._RF.push(e,"db395qAxD1CS5SiCivtIFgm","TextTutorial"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./TextPopup"),i=t("../CrabWare/Core/Maestro"),r=t("../CrabWare/Utils/MathUtils"),a=cc._decorator,s=a.ccclass,c=a.property,l=1e3,u=function(t){function e(){var e=t.call(this)||this;return e.startText=null,e.midText=null,e.endText=null,e.pauseAnimationManager=new cc.AnimationManager,e.intervalHandler=null,e.onFocus=function(){null===e.intervalHandler&&(e.intervalHandler=window.setInterval(function(){e.pseudoUpdate()},l/cc.game.getFrameRate()))},e.onBlur=function(){clearInterval(e.intervalHandler),e.intervalHandler=null},e}return __extends(e,t),e.prototype.showTextPopup=function(t){t.show(),cc.director.pause(),this.startPauseUpdate()},e.prototype.unpause=function(){cc.director.resume(),this.endPauseUpdate()},e.prototype.startPauseUpdate=function(){var t=this;i.default.DefaultInstance.subscribeOnFocusEvent(this.onFocus),i.default.DefaultInstance.subscribeOnBlurEvent(this.onBlur),null===this.intervalHandler&&(this.intervalHandler=window.setInterval(function(){t.pseudoUpdate()},l/cc.game.getFrameRate())),this.defaultAnimationManager=cc.director._animationManager,cc.director._animationManager=this.pauseAnimationManager,this.pseudoUpdate()},e.prototype.endPauseUpdate=function(){i.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),i.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur),cc.director._animationManager=this.defaultAnimationManager,clearInterval(this.intervalHandler),this.intervalHandler=null},e.prototype.start=function(){var t=this,e=i.default.DefaultInstance.SceneManager.GetController(),o=function(){t.scheduleOnce(function(){t.showTextPopup(t.midText)},.5),e.LemmingLaunched.unsubscribe(o)},n=function(){t.scheduleOnce(function(){r.isZero(e.clocksLeft)&&(t.showTextPopup(t.endText),e.LemmingHit.unsubscribe(n))},5)};this.scheduleOnce(function(){t.showTextPopup(t.startText)},2),e.LemmingLaunched.subscribe(o),e.LemmingLaunched.subscribe(n)},e.prototype.onDestroy=function(){i.default.DefaultInstance.unsubscribeOnFocusEvent(this.onFocus),i.default.DefaultInstance.unsubscribeOnBlurEvent(this.onBlur)},e.prototype.pseudoUpdate=function(){var t,e=l/cc.game.getFrameRate();(t=this.node.getComponents(cc.Component)).push.apply(t,this.node.getComponentsInChildren(cc.Component)),t.forEach(function(t){t.start&&r.isZero(65536&t._objFlags)&&(t._objFlags|=65536,t.start())}),t.forEach(function(t){t.update&&t.update(e),t instanceof cc.Widget&&t.updateAlignment()}),cc.director.getAnimationManager().update(e/l),t.forEach(function(t){t.lateUpdate&&t.lateUpdate()})},__decorate([c(n.default)],e.prototype,"startText",void 0),__decorate([c(n.default)],e.prototype,"midText",void 0),__decorate([c(n.default)],e.prototype,"endText",void 0),e=__decorate([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../CrabWare/Core/Maestro":"Maestro","../CrabWare/Utils/MathUtils":"MathUtils","./TextPopup":"TextPopup"}],TrajectoryMarker:[function(t,e,o){"use strict";cc._RF.push(e,"886a4z13/5KBJQ45vURKL1m","TrajectoryMarker"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../CrabWare/Core/Maestro"),i=cc._decorator.ccclass,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnqueuedToDestroy=!1,e.hasBeenLanched=!1,e}return __extends(e,t),e.prototype.start=function(){var t=this,e=n.default.DefaultInstance.SceneManager.GetController();e.LemmingLaunched.subscribe(function(){return t.Launched()}),e.LemmingHit.subscribe(function(){return t.Hit()})},e.prototype.Launched=function(){this.isEnqueuedToDestroy&&null!=this.node&&(this.node.destroy(),this.isEnqueuedToDestroy=!1)},e.prototype.Hit=function(){this.isEnqueuedToDestroy=!0},e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{"../../CrabWare/Core/Maestro":"Maestro"}],TypeHelper:[function(t,e,o){"use strict";cc._RF.push(e,"9adf4KclURAZbyjmtpSs7mT","TypeHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.IsUndefined=function(t){return void 0===t},t}();o.default=n,cc._RF.pop()},{}],UIAudioClips:[function(t,e,o){"use strict";cc._RF.push(e,"75a4aRYUIVGHYb+0rZgYghi","UIAudioClips"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupClip=null,e.buttonClip=null,e}return __extends(e,t),e.prototype.playPopupClip=function(){this.popupClip&&cc.audioEngine.playEffect(this.popupClip,!1)},e.prototype.playButtonClip=function(){this.buttonClip&&cc.audioEngine.playEffect(this.buttonClip,!1)},__decorate([r({type:cc.AudioClip})],e.prototype,"popupClip",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"buttonClip",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["AudioClipCollection","BaseExposedLocalizationItem","BaseLocalizationItem","AutoChangeScene.ts","BaseCallOnAction","BaseState","BaseStateMachine","CallOnClick","CallOnContact","CallOnKey","DefaultAnimStateMachine","PhysicsProjectile","PopupController","PropertyLabel","State","StateComponent","StateMachine","StateSwitcher","AudioManager","BaseSceneController","CrabWareSettings","GameEngineSettings","Maestro","Singleton","ExposedLocalizationBindText","ExposedLocalizationImage","ExposedLocalizationText","FSMState","FSMTransition","FiniteStateMachine","LocalizationAsset","LocalizationBindText","LocalizationBindTextComponent","LocalizationImage","LocalizationImageComponent","LocalizationItem","LocalizationManager","LocalizationText","LocalizationTextComponent","NodeRatioPositioner","NodeRatioScaler","DontDestroyOnLoad","DrawDebug","GameState","GrizzyBirdsState","MathUtils","SceneManager","TypeHelper","BaseBoosterEffect","BaseBoosterPickup","BasePickup","BoosterSpeedEffect","BoosterSpeedPickup","BoosterSpreadEffect","BoosterSpreadPickup","BootController","BootOrientationPopup","CloudAnimator","MultipleLemmingsProjectile","ObjectPool","SingleLemmingProjectile","Slingshot","StructureUnit","TrajectoryMarker","AudioSettingsController","CameraController","ConfirmPopupController","DefaultAnimationFSM","InspectorFSM","LemmingsLauncherController","PausePopupController","ComicController","GameOverController","GameplayController","LevelButton","LevelSelectController","MainMenuController","GameplayDebugUIController","GrizzyBirdsMaster","ImpulseApplier","LemmingBoosterListener","LemmingQueue","LevelBuilder","LoadingPopup","MusicPlayer","NodeHoverScaler","NoiseGenerator","NoiseGeneratorPickup","OrientationPopup","PlatformAnimationSelector","PlatformGraphicChanger","PopupTutorial","SlingshotTutorial","TextPopup","TextTutorial","UIAudioClips","ArrayTest","AudioTest","CameraTest","EventChainTest","EventTester","PersistenceTest","PreGameplayTest","STCtrller1","STCtrller2","STCtrller3A","STCtrller3B","STCtrller3C","AnimFSM","StateAnimation"]);